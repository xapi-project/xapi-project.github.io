<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.127.0"><meta name=generator content="Relearn 7.3.2"><meta name=description content="Overview Xenserver has used TLS-encrypted communications between xapi daemons in a pool since its first release. However it does not use TLS certificates to authenticate the servers it connects to. This allows possible attackers opportunities to impersonate servers when the pools’ management network is compromised.
In order to enable certificate verification, certificate exchange as well as proper set up to trust them must be provided by xapi. This is currently done by allowing users to generate, sign and install the certificates themselves; and then enable the Common Criteria mode."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="TLS vertification for intra-pool communications :: XAPI Toolstack Developer Documentation"><meta name=twitter:description content="Overview Xenserver has used TLS-encrypted communications between xapi daemons in a pool since its first release. However it does not use TLS certificates to authenticate the servers it connects to. This allows possible attackers opportunities to impersonate servers when the pools’ management network is compromised.
In order to enable certificate verification, certificate exchange as well as proper set up to trust them must be provided by xapi. This is currently done by allowing users to generate, sign and install the certificates themselves; and then enable the Common Criteria mode."><meta property="og:url" content="https://xapi-project.github.io/new-docs/design/pool-certificates/index.html"><meta property="og:site_name" content="XAPI Toolstack Developer Documentation"><meta property="og:title" content="TLS vertification for intra-pool communications :: XAPI Toolstack Developer Documentation"><meta property="og:description" content="Overview Xenserver has used TLS-encrypted communications between xapi daemons in a pool since its first release. However it does not use TLS certificates to authenticate the servers it connects to. This allows possible attackers opportunities to impersonate servers when the pools’ management network is compromised.
In order to enable certificate verification, certificate exchange as well as proper set up to trust them must be provided by xapi. This is currently done by allowing users to generate, sign and install the certificates themselves; and then enable the Common Criteria mode."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="Design Documents"><meta itemprop=name content="TLS vertification for intra-pool communications :: XAPI Toolstack Developer Documentation"><meta itemprop=description content="Overview Xenserver has used TLS-encrypted communications between xapi daemons in a pool since its first release. However it does not use TLS certificates to authenticate the servers it connects to. This allows possible attackers opportunities to impersonate servers when the pools’ management network is compromised.
In order to enable certificate verification, certificate exchange as well as proper set up to trust them must be provided by xapi. This is currently done by allowing users to generate, sign and install the certificates themselves; and then enable the Common Criteria mode."><meta itemprop=wordCount content="3751"><title>TLS vertification for intra-pool communications :: XAPI Toolstack Developer Documentation</title>
<link href=/new-docs/images/favicon.png?1756301573 rel=icon type=image/png><link href=/new-docs/css/fontawesome-all.min.css?1756301573 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/new-docs/css/fontawesome-all.min.css?1756301573 rel=stylesheet></noscript><link href=/new-docs/css/auto-complete.css?1756301573 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/new-docs/css/auto-complete.css?1756301573 rel=stylesheet></noscript><link href=/new-docs/css/perfect-scrollbar.min.css?1756301573 rel=stylesheet><link href=/new-docs/css/theme.min.css?1756301573 rel=stylesheet><link href=/new-docs/css/format-html.min.css?1756301573 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://xapi-project.github.io/new-docs",window.relearn.min=`.min`,window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.themevariants=["auto","zen-light","zen-dark","red","blue","green","learn","neon","relearn-light","relearn-bright","relearn-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}}))},window.relearn.markVariant=function(){var t=window.localStorage.getItem(window.relearn.absBaseUri+"/variant"),e=document.querySelector("#R-select-variant");e&&(e.value=t)},window.relearn.initVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant(),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link rel=stylesheet href=https://xapi-project.github.io/new-docs/css/misc.css></head><body class="mobile-support html" data-url=/new-docs/design/pool-certificates/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#glossary>Glossary</a></li></ul><ul><li><a href=#cryptography-of-certificates>Cryptography of certificates</a></li></ul><ul><li><a href=#opening-a-connection-with-a-pool-host>Opening a connection with a pool host</a></li><li><a href=#receiving-an-incoming-tls-connection>Receiving an incoming TLS connection</a></li><li><a href=#u1-host-installation>U1. Host Installation</a></li><li><a href=#u2-pool-join>U2. Pool Join</a></li><li><a href=#u3-pool-eject>U3. Pool Eject</a></li><li><a href=#u4-pool-upgrade>U4. Pool Upgrade</a></li><li><a href=#u5-host-certificate-state-inspection>U5. Host certificate state inspection</a></li><li><a href=#u6-migrating-a-vm-to-another-pool>U6. Migrating a VM to another pool</a></li><li><a href=#u7-change-a-hosts-name>U7. Change a host&rsquo;s name</a></li><li><a href=#u8-installing-a-certificate-corporate-ca>U8. Installing a certificate (corporate CA)</a></li><li><a href=#u9-resetting-a-certificate-to-self-signed-certificate>U9. Resetting a certificate (to self-signed certificate)</a></li><li><a href=#u10-enabling-certificate-verification>U10. Enabling certificate verification</a></li><li><a href=#u11-disabling-certificate-verification>U11. Disabling certificate verification</a></li><li><a href=#u12-being-aware-of-certificate-expiry>U12. Being aware of certificate expiry</a></li></ul><ul><li><ul><li><a href=#api>API</a></li><li><a href=#cli>CLI</a></li><li><a href=#feature-flags>Feature Flags</a></li><li><a href=#alerts>Alerts</a></li></ul></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/new-docs/index.html><span itemprop=name>XAPI Toolstack Developer Guide</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/new-docs/design/index.html><span itemprop=name>Designs</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>TLS vertification for intra-pool communications</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-edit" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=https://github.com/xapi-project/xen-api/edit/master/doc/content/design/pool-certificates.md target=_blank title="Edit (CTRL+ALT+w)"><i class="fa-fw fas fa-pen"></i></a></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/new-docs/design/thin-lvhd/index.html title="thin LVHD storage (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/new-docs/design/tunnelling/index.html title="Tunnelling API design (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable design" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline><table class=revision-table><tr><th colspan=2>Design document</th></tr><tr style=background-color:#fff><td>Revision</td><td><span class="label label-default">v2</span></td></tr><tr style=background-color:#fff><td>Status</td><td><span class="label
label-success">released (22.6.0)</span></td></tr></table></header><h1 id=tls-vertification-for-intra-pool-communications>TLS vertification for intra-pool communications</h1><h2 id=overview>Overview</h2><p>Xenserver has used TLS-encrypted communications between xapi daemons in a pool since its first release.
However it does not use TLS certificates to authenticate the servers it connects to.
This allows possible attackers opportunities to impersonate servers when the pools’ management network is compromised.</p><p>In order to enable certificate verification, certificate exchange as well as proper set up to trust them must be provided by xapi.
This is currently done by allowing users to generate, sign and install the certificates themselves; and then enable the Common Criteria mode.
This requires a CA and has a high barrier of entry.</p><p>Using the same certificates for intra-host communication creates friction between what the user needs and what the host needs.
Instead of trying to reconcile these two uses with one set of certificates, host will serve two certificates: one for API calls from external clients, which is the one that can be changed by the users; and one that is use for intra-pool communications.
The TLS server in the host can select which certificate to serve depending on the service name the client requests when opening a TLS connection.
This mechanism is called Server Name Identification or SNI in short.</p><p>Last but not least the update bearing these changes must not disrupt pool operations while or after being applied.</p><h2 id=glossary>Glossary</h2><table><thead><tr><th>Term</th><th>Meaning</th></tr></thead><tbody><tr><td>SNI</td><td>Server Name Identification. This TLS protocol extension allows a server to select a certificate during the initial TLS handshake depending on a client-provided name. This usually allows a single reverse-proxy to serve several HTTPS websites.</td></tr><tr><td>Host certificate</td><td>Certificate that a host sends clients when the latter initiate a connection with the former. The clients may close the connection depending on the properties of this certificate and whether they have decided to trust it previously.</td></tr><tr><td>Trusted certificate</td><td>Certificate that a computer uses to verify whether a host certificate is valid. If the host certificate&rsquo;s chain of trust does not include a trusted certificate it will be considered invalid.</td></tr><tr><td>Default Certificate</td><td>Xenserver hosts present this certificate to clients which do not request an SNI. Users are allowed to install their own custom certificate.</td></tr><tr><td>Pool Certificate</td><td>Xenserver hosts present this certificate to clients which request <code>xapi:pool</code>as the SNI. They are used for host-to-host communications.</td></tr><tr><td>Common Criteria</td><td>Common Criteria for Information Technology Security Evaluation is a certification on computer security.</td></tr></tbody></table><h1 id=certificates-and-identity-management>Certificates and Identity management</h1><p>Currently Xenserver hosts generate self-signed certificates with the IP or FQDN as their subjects, users may also choose to install certificates.
When installing these certificates only the cryptographic algorithms used to generate the certificates (private key and hash) are validated and no properties about them are required.</p><p>This means that using user-installed certificates for intra-pool communication may prove difficult as restrictions regarding FQDN and chain validation need to be ensured before enabling TLS certificate checking or the pool communications will break down.</p><p>Instead a different certificate is used only for pool communication.
This allows to decouple whatever requirements users might have for the certificates they install to the requirements needed for secure pool communication.
This has several benefits:</p><ul><li>Frees the pool from ensuring a sound hostname resolution on the internal communications.</li><li>Allows the pool to rotate the certificates when it deems necessary. (in particular expiration, or forced invalidation)</li><li>Hosts never share a host certificate, and their private keys never get transmitted.</li></ul><p>In general, the project is able to more safely change the parameters of intra-pool communication without disrupting how users use custom certificates.</p><p>To be able to establish trust in a pool, hosts must distribute the certificates to the rest of the pool members.
Once that is done servers can verify whether they are connecting to another host in the pool by comparing the server certificate with the certificates in the trust root.
Certificate pinning is available and would allow more stringent checks, but it doesn&rsquo;t seem a necessity: hosts in a pool already share secret that allows them to have full control of the pool.</p><p>To be able to select a host certificate depending whether the connections is intra-pool or comes from API clients SNI will be used.
This allows clients to ask for a service when establishing a TLS connection.
This allows the server to choose the certificate they want to offer when negotiating the connection with the client.
The hosts will exploit this to request a particular service when they establish a connection with other hosts in the pool.
When initiating a connection to another host in the pool, a server will create requests for TLS connections with the server_name <code>xapi:pool</code> with the <code>name_type</code> <code>DNS</code>, this goes against RFC-6066 as this <code>server_name</code> is not resolvable.
This still works because we control the implementation in both peers of the connection and can follow the same convention.</p><p>In addition connections to the WLB appliance will continue to be validated using the current scheme of user-installed CA certificates.
This means that hosts connecting to the appliance will need a special case to only trust user-installed certificated when establishing the connection.
Conversely pool connections will ignore these certificates.</p><table><thead><tr><th>Name</th><th>Filesystem location</th><th>User-configurable</th><th>Used for</th></tr></thead><tbody><tr><td>Host Default</td><td>/etc/xensource/xapi-ssl.pem</td><td>yes (using API)</td><td>Hosts serve it to normal API clients</td></tr><tr><td>Host Pool</td><td>/etc/xensource/xapi-pool-tls.pem</td><td>no</td><td>Hosts serve to clients requesting &ldquo;xapi:pool&rdquo; as the SNI</td></tr><tr><td>Trusted Default</td><td>/etc/stunnel/certs/</td><td>yes (using API)</td><td>Certificates that users can install for trusting appliances</td></tr><tr><td>Trusted Pool</td><td>/etc/stunnel/certs-pool/</td><td>no</td><td>Certificates that are managed by the pool for host-to-host communications</td></tr><tr><td>Default Bundle</td><td>/etc/stunnel/xapi-stunnel-ca-bundle.pem</td><td>no</td><td>Bundle of certificates that hosts use to verify appliances (in particular WLB), this is kept in sync with &ldquo;Trusted Default&rdquo;</td></tr><tr><td>Pool Bundle</td><td>/etc/stunnel/xapi-pool-ca-bundle.pem</td><td>no</td><td>Bundle of certificates that hosts use to verify other hosts on pool communications, this is kept in sync with &ldquo;Trusted Pool&rdquo;</td></tr></tbody></table><h2 id=cryptography-of-certificates>Cryptography of certificates</h2><p>The certificates until now have been signed using sha256WithRSAEncryption:</p><ul><li>Pre-8.0 releases use 1024-bit RSA keys.</li><li>8.0, 8.1 and 8.2 use 2048-bit RSA keys.</li></ul><p>The Default Certificates served to API clients will continue to use sha256WithRSAEncryption with 2048-bit RSA keys. The Pool certificates will use the same algorithms for consistency.</p><p>The self-signed certificates until now have used a mix of IP and hostname claims:</p><ul><li>All released versions:<ul><li>Subject and issuer have CN FQDN if the hostname is different from localhost, or CN management IP</li><li>Subject Alternate Names extension contains all the domain names as DNS names</li></ul></li><li>Next release:<ul><li>Subject and issuer have CN management IP</li><li>SAN extension contains all domain names as DNS names and the management IP as IP</li></ul></li></ul><p>The Pool certificates do not contain claims about IPs nor hostnames as this may change during runtime and depending on their validity may make pool communication more brittle.
Instead the only claim they have is that their Issuer and their Subject are CN Host UUID, along with a serial number.</p><p>Self-signed certificates produced until now have had validity periods of 3650 days (~10 years).
The Pool certificates will have the same validity period.</p><h1 id=server-components>Server Components</h1><p>HTTPS Connections between hosts usually involve the xapi daemons and stunnel processes:</p><ul><li>When a xapi daemon needs to initiate a connection with another host it starts an HTTP connection with a local stunnel process.</li><li>The stunnel processes wrap http connections inside a TLS connection, allowing HTTPS to be used when hosts communicate</li></ul><p>This means that stunnel needs to be set up correctly to verify certificates when connecting to other hosts.
Some aspects like CA certificates are already managed, but certificate pinning is not.</p><h1 id=use-cases>Use Cases</h1><p>There are several use cases that need to be modified in order correctly manage trust between hosts.</p><h2 id=opening-a-connection-with-a-pool-host>Opening a connection with a pool host</h2><p>This is the main use case for the feature, the rest of use cases that need changes are modified to support this one.
Currently a Xenserver host connecting to another host within the pool does not try to authenticate the receiving server when opening a TLS connection.
(The receiving server authenticates the originating server by xapi authentication, see below)</p><p>Stunnel will be configured to verify the peer certificate against the CA certificates that are present in the host.
The CA certificates must be correctly set up when a host joins the pool to correctly establish trust.</p><p>The previous behaviour for WLB must be kept as the WLB connection <em>must</em> be checked against the user-friendly CA certificates.</p><h2 id=receiving-an-incoming-tls-connection>Receiving an incoming TLS connection</h2><p>All incoming connections authenticate the client using credentials, this does not need the addition of certificates.
(username and password, pool secret)</p><p>The hosts must present the certificate file to incoming connections so the client can authenticate them.
This is already managed by xapi, it configures stunnel to present the configured host certificate.
The configuration has to be changed so stunnel responds to SNI requests containing the string <code>xapi:pool</code> to serve the internal certificate instead of the client-installed one.</p><h2 id=u1-host-installation>U1. Host Installation</h2><p>On xapi startup an additional certificate is created now for pool operations.
It&rsquo;s added to the trusted pool certificates.
The certificate&rsquo;s only claim is the host&rsquo;s UUID.
No IP nor hostname information is kept as the clients only check for the certificate presence in the trust root.</p><h2 id=u2-pool-join>U2. Pool Join</h2><p>This use-case is delicate as it is the point where trust is established between hosts.
This is done with a call from the joiner to the pool coordinator where the certificate of the coordinator is not verified.
In this call the joiner transmits its certificate to the coordinator and the coordinator returns a list of the pool members&rsquo; UUIDs and certificates.
This means that in the policy used is trust on first use.</p><p>To deal with parallel pool joins, hosts download all the Pool certificates in the pool from the coordinator after all restarts.</p><p>The connection is initiated by a client, just like before, there is no change in the API as all the information needed to start the join is already provided (pool username and password, IP of coordinator)</p><pre class="mermaid align-center">
sequenceDiagram
participant clnt as Client
participant join as Joiner
participant coor as Coordinator
participant memb as Member
clnt-&gt;&gt;join: pool.join coordinator_ip coordinator_username coordinator_password
join-&gt;&gt;coor:login_with_password coordinator_ip coordinator_username coordinator_password

Note over join: pre_join_checks
join-&gt;&gt;join: remote_pool_has_tls_enabled = self_pool_has_tls_enabled
alt are different
Note over join: interrupt join, raise error
end
Note right of join: certificate distribution
coor--&gt;&gt;join:
join-&gt;&gt;coor: pool.internal_certificate_list_content
coor--&gt;&gt;join:

join-&gt;&gt;coor: pool.upload_identity_host_certificate joiner_certificate uuid
coor-&gt;&gt;memb: pool.internal_certificates_sync
memb--&gt;&gt;coor:

loop for every &lt;user CA certificate&gt; in Joiner
join-&gt;&gt;coor: Pool.install_ca_certitificate &lt;user CA certificate&gt;
coor--&gt;&gt;join:
end

loop for every &lt;user CRL&gt; in Joiner
join-&gt;&gt;coor: Pool.install_crl &lt;user CRL&gt;
coor--&gt;&gt;join:
end

join-&gt;&gt;coor: host.add joiner
coor--&gt;&gt;join:

join-&gt;&gt;join: restart_as_slave
join-&gt;&gt;coor: pool.user_certificates_sync
join-&gt;&gt;coor: host.copy_primary_host_certs</pre><h2 id=u3-pool-eject>U3. Pool Eject</h2><p>During pool eject the pool must remove the host certificate of the ejected member from the internal trust root, this must be done by the xapi daemon of the coordinator.</p><p>The ejected member will recreate both server certificates to replicate a new installation.
This can be triggered by deleting the certificates and their private keys in the host before rebooting, the current boot scripts automatically generates a new self-signed certificate if the file is not present.
Additionally, both the user and the internal trust roots will be cleared before rebooting as well.</p><h2 id=u4-pool-upgrade>U4. Pool Upgrade</h2><p>When a pool has finished upgrading to the version with certificate checking the database reflects that the feature is turned off, this is done as part of the database upgrade procedure in xen-api.
The internal certificate is created on restart.
It is added to the internal trusted certificates directory.
The distribution of certificate will happens when the tls verification is turned on, afterwards.</p><h2 id=u5-host-certificate-state-inspection>U5. Host certificate state inspection</h2><p>In order to give information about the validity and useful information of installed user-facing certificates to API clients as well as the certificates used for internal purposes, 2 fields are added to certificate records in xapi&rsquo;s datamodel and database:</p><ul><li>type: indicates which of the 3 kind of certificates is the certificate. If it&rsquo;s a user-installed trusted CA certificate, a server certificate served to clients that do not use SNI, and a server certificate served when the SNI xapi:pool is used. The exact values are ca, host and host-internal, respectively.</li><li>name: the human-readable name given by the user. This fields is only present on trusted CA certificates and allows the pool operators to better recognise the certificates.</li></ul><p>Additionally, now the _host field contains a null reference if the certificate is a corporate CA (a ca certificate).</p><p>The fields will get exposed in the CLI whenever a certificate record is listed, this needs a xapi-cli-server to be modified to show the new field.</p><h2 id=u6-migrating-a-vm-to-another-pool>U6. Migrating a VM to another pool</h2><p>To enable a frictionless migration when pools have tls verification enabled, the host certificate of the host receiving the vm is sent to the sender.
This is done by adding the certificate of the receiving host as well as its pool coordinator to the return value of the function migrate_receive function.
The sender can then add the certificate to the folder of CA certificates that stunnel uses to verify the server in a TLS connection.
When the transaction finishes, whether it fails or succeeds the CA certificate is deleted.</p><p>The certificate is stored in a temporary location so xapi can clean up the file when it starts up, in case after the host fences or power cycles while the migration is in progress.</p><p>Xapi invokes sparse_dd with the filename correct trusted bundle as a parameter so it can verify the vhd-server running on the other host.</p><p>Xapi also invokes xcp-rrdd to migrate the VM metrics.
xcp-rrdd is passed the 2 certificates to verify the remote hosts when sending the metrics.</p><p>Clients should not be aware of this change and require no change.</p><p>Xapi-cli-server, the server of xe embedded into xapi, connects to the remote coordinator using TLS to be able to initiate the migration.
Currently no verification is done. A certificate is required to initiate the connection to verify the remote server.</p><p>In u6.3 and u6.4 no changes seem necessary.</p><h2 id=u7-change-a-hosts-name>U7. Change a host&rsquo;s name</h2><p>The Pool certificates do not depend on hostnames.
Changing the hostnames does not affect TLS certificate verification in a pool.</p><h2 id=u8-installing-a-certificate-corporate-ca>U8. Installing a certificate (corporate CA)</h2><p>Installation of corporate CA can be done with current API.
Certificates are added to the database as CA certificates.</p><h2 id=u9-resetting-a-certificate-to-self-signed-certificate>U9. Resetting a certificate (to self-signed certificate)</h2><p>This needs a reimplementation of the current API to reset host certificate, this time allowing the operation to happen when the host is not on emergency node and to be able to do it remotely.</p><h2 id=u10-enabling-certificate-verification>U10. Enabling certificate verification</h2><p>A new API call is introduced to enable tls certificate verification: Pool.enable_tls_verification.
This is used by the CLI command pool-enable-tls-verification.
The call causes the coordinator of the pool to install the Pool certificates of all the members in its internal trust root.
Then calls the api for each member to install all of these certificates.
After this public key exchange is done, TLS certificate verification is enabled on the members, with the coordinator being the last to enable it.</p><p>When there are issues that block enabling the feature, the call returns an error specific to that problem:</p><ul><li>HA must not be enabled, as it can interrupt the procedure when certificates are distributed</li><li>Pool operations that can disrupt the certificate exchange block this operation: These operations are listed in here</li><li>There was an issue with the certificate exchange in the pool.</li></ul><p>The coordinator enabling verification last is done to ensure that if there is any issue enabling the coordinator host can still connect to members and rollback the setting.</p><p>A new field is added to the pool: tls_verification_enabled. This enables clients to query whether TLS verification is enabled.</p><h2 id=u11-disabling-certificate-verification>U11. Disabling certificate verification</h2><p>A new emergency command is added emergency-host-disable-tls-verification.
This command disables tls-verification for the xapi daemon in a host.
This allows the host to communicate with other hosts in the pool.</p><p>After that, the admin can regenerate the certificates using the new host-refresh-server-certificate in the hosts with invalid certificates, finally they can reenable tls certificate checking using the call emergency-host-reenable-tls-verification.</p><p>The documentation will include instructions for administrators on how to reset certificates and manually installing the host certificates as CA certificates to recover pools.</p><p>This means they will not have to disable TLS and compromise on security.</p><h2 id=u12-being-aware-of-certificate-expiry>U12. Being aware of certificate expiry</h2><p>Stockholm hosts provide alerts 30 days before hosts certificates expire, it must be changed to alert about users&rsquo; CA certificates expiring.</p><p>Pool certificates need to be cycled when the certificate expiry is approaching.
Alerts are introduced to warn the administrator this task must be done, or risk the operation of the pool.
A new API is introduced to create certificates for all members in a pool and replace the existing internal certificates with these.
This call imposes the same requirements in a pool as the pool secret rotation: It cannot be run in a pool unless all the host are online, it can only be started by the coordinator, the coordinator is in a valid state, HA is disabled, no RPU is in progress, and no pool operations are in progress.
The API call is Pool.rotate_internal_certificates.
It is exposed by xe as pool-rotate-internal-certificates.</p><h1 id=changes>Changes</h1><p>Xapi startup has to account for host changes that affect this feature and modify the filesystem and pool database accordingly.</p><ul><li>Public certificate changed: On first boot, after a pool join and when doing emergency repairs the server certificate record of the host may not match to the contents in the filesystem. A check is to be introduced that detects if the database does not associate a certificate with the host or if the certificate&rsquo;s public key in the database and the filesystem are different. If that&rsquo;s the case the database is updated with the certificate in the filesystem.</li><li>Pool certificate not present: In the same way the public certificate served is generated on startup, the internal certificate must be generated if the certificate is not present in the filesystem.</li><li>Pool certificate changed: On first boot, after a pool join and after having done emergency repairs the internal server certificate record may not match the contents of the filesystem. A check is to be introduced that detects if the database does not associate a certificate with the host or if the certificate&rsquo;s public key in the database and the filesystem are different. This check is made aware whether the host is joining a pool or is on first-boot, it does this by counting the amount of hosts in the pool from the database. In the case where it&rsquo;s joining a pool it simply updated the database record with the correct information from the filesystem as the filesystem contents have been put in place before the restart. In the case of first boot the public part of the certificate is copied to the directory and the bundle for internally-trusted certificates: /etc/stunnel/certs-pool/ and /etc/stunnel/xapi-pool-ca-bundle.pem.</li></ul><p>The xapi database records for certificates must be changed according with the additions explained before.</p><h3 id=api>API</h3><p>Additions</p><ul><li>Pool.tls_verification_enabled: this is a field that indicates whether TLS verification is enabled.</li><li>Pool.enable_tls_verification: this call is allowed for role _R_POOL_ADMIN. It&rsquo;s not allowed to run if HA is enabled nor pool operations are in progress. All the hosts in the pool transmit their certificate to the coordinator and the coordinator then distributes the certificates to all members of the pool. Once that is done the coordinator tries to initiate a session with all the pool members with TLS verification enabled. If it&rsquo;s successful TLS verification is enabled for the whole pool, otherwise the error COULD_NOT_VERIFY_HOST [member UUID] is emmited.</li><li>TLS_VERIFICATION_ENABLE_IN_PROGRESS is a new error that is produced when trying to do other pool operations while enabling TLS verification is in progress</li><li>Host.emergency_disable_tls_verification: this called is allowed for role _R_LOCAL_ROOT_ONLY: it&rsquo;s an emergency command and acts locally. It forces connections in xapi to stop verifying the peers on outgoing connections. It generates an alert to warn the administrators of this uncommon state.</li><li>Host.emergency_reenable_tls_verification: this call is allowed for role _R_LOCAL_ROOT_ONLY: it&rsquo;s an emergency command and acts locally. It changes the configuration so xapi verifies connections by default after being switched off with the previous command.</li><li>Pool.install_ca_certificate: rename of Pool.certificate_install, add the ca certificate to the database.</li><li>Pool.uninstall_ca_certificate: rename of Pool.certificate_uninstall, removes the certificate from the database.</li><li>Host.reset_server_certificate: replaces Host.emergency_reset_server_certificate, now it&rsquo;s allowed for role _R_POOL_ADMIN. It adds a record for the generated Default Certificate to the database while removing the previous record, if any.</li><li>Pool.rotate_internal_certificates: This call generates new Pool certificates, and substitutes the previous certificates with these. See the certificate expiry section for more details.</li></ul><p>Modifications:</p><ul><li>Pool.join: certificates must be correctly distributed. API Error POOL_JOINING_HOST_TLS_VERIFICATION_MISMATCH is returned if the tls_verification of the two pools doesn&rsquo;t match.</li><li>Pool.eject: all certificates must be deleted from the ejected host&rsquo;s filesystem and the ejected host&rsquo;s certificate must be deleted from the pool&rsquo;s trust root.</li><li>Host.install_server_certificate: the certificate type host for the record must be added to denote it&rsquo;s a Standard Certificate.</li></ul><p>Deprecations:</p><ul><li>pool.certificate_install</li><li>pool.certificate_uninstall</li><li>pool.certificate_list</li><li>pool.wlb_verify_cert: This setting is superseeded by pool.enable_tls_verification. It cannot be removed, however. When updating from a previous version when this setting is on, TLS connections to WLB must still verify the external host. When the global setting is enabled this setting is ignored.</li><li>host.emergency_reset_server_certificate: host.reset_server_certificate should be used instead as this call does not modify the database.</li></ul><h3 id=cli>CLI</h3><p>Following API additions:</p><ul><li>pool-enable-tls-verification</li><li>pool-install-ca-certificate</li><li>pool-uninstall-ca-certificate</li><li>pool-internal-certificates-rotation</li><li>host-reset-server-certificate</li><li>host-emergency-disable-tls-verification (emits a warning when verification is off and the pool-level is on)</li><li>host-emergency-reenable-tls-verification</li></ul><p>And removals:</p><ul><li>host-emergency-server-certificate</li></ul><h3 id=feature-flags>Feature Flags</h3><p>This feature needs clients to behave differently when initiating pool joins, to allow them to choose behaviour the toolstack will expose a new feature flag &lsquo;Certificate_verification&rsquo;. This flag will be part of the express edition as it&rsquo;s meant to aid detection of a feature and not block access to it.</p><h3 id=alerts>Alerts</h3><p>Several alerts are introduced:</p><ul><li><p>POOL_CA_CERTIFICATE_EXPIRING_30, POOL_CA_CERTIFICATE_EXPIRING_14, POOL_CA_CERTIFICATE_EXPIRING_07, POOL_CA_CERTIFICATE_EXPIRED: Similar to host certificates, now the user-installable pool&rsquo;s CA certificates are monitored for expiry dates and alerts are generated about them. The body for this type of message is:</p><body><message>The trusted TLS server certificate {is expiring soon|has expired}.</message><date>20210302T02:00:01Z</date></body></li><li><p>HOST_INTERNAL_CERTIFICATE_EXPIRING_30, HOST_INTERNAL_CERTIFICATE_EXPIRING_14, HOST_INTERNAL_CERTIFICATE_EXPIRING_07, HOST_INTERNAL_CERTIFICATE_EXPIRED: Similar to host certificates, the newly-introduced hosts&rsquo; internal server certificates are monitored for expiry dates and alerts are generated about them. The body for this type of message is:</p><body><message>The TLS server certificate for internal communications {is expiring soon|has expired}.</message><date>20210302T02:00:01Z</date></body></li><li><p>TLS_VERIFICATION_EMERGENCY_DISABLED: The host is in emergency mode and is not enforcing tls verification anymore, the situation that forced the disabling must be fixed and the verification enabled ASAP.</p><body><host>HOST-UUID</host></body></li><li><p>FAILED_LOGIN_ATTEMPTS: An hourly alert that contains the number of failed attempts and the 3 most common origins for these failed alerts. The body for this type of message is:</p><body><total>35</total>
<known><username>usr5</username><originator>origin5</originator><ip>5.4.3.2</ip><number>10</number><date>20200922T15:03:13Z</date></known>
<known><username>usr4</username><useragent>UA</useragent><number>6</number><date>20200922T15:03:13Z</date></known>
<known><useragent>UA</useragent><ip>4.3.2.1</ip><number>4</number><date>20200922T14:57:11Z</date></known>
<unknown>10</unknown></body></li></ul><script>for(let e of document.querySelectorAll(".inline-type"))e.innerHTML=renderType(e.innerHTML)</script><footer class=footline></footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><img src=https://xapi-project.github.io/new-docs//images/xapi-project.png></div><script>window.index_js_url="/new-docs/searchindex.en.js?1756301573"</script><search><form action=/new-docs/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search><script>var contentLangs=["en"]</script><script src=/new-docs/js/auto-complete.js?1756301573 defer></script><script src=/new-docs/js/lunr/lunr.min.js?1756301573 defer></script><script src=/new-docs/js/lunr/lunr.stemmer.support.min.js?1756301573 defer></script><script src=/new-docs/js/lunr/lunr.multi.min.js?1756301573 defer></script><script src=/new-docs/js/lunr/lunr.en.min.js?1756301573 defer></script><script src=/new-docs/js/search.js?1756301573 defer></script></div><div id=R-homelinks class="default-animation homelinks"><ul><li><a class=padding href=/new-docs/index.html><i class="fa-fw fas fa-home"></i> Home</a></li></ul><hr class=padding></div><div id=R-content-wrapper class=highlightable><div id=R-shortcutmenu-home class=R-sidebarmenu><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/new-docs/toolstack/index.html><input type=checkbox id=R-section-cdb5571004e49cdb09f50d87f536567a aria-controls=R-subsections-cdb5571004e49cdb09f50d87f536567a><label for=R-section-cdb5571004e49cdb09f50d87f536567a><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu The Toolstack</span></label><a class=padding href=/new-docs/toolstack/index.html>The Toolstack</a><ul id=R-subsections-cdb5571004e49cdb09f50d87f536567a class=collapsible-menu><li data-nav-id=/new-docs/toolstack/responsibilities/index.html><a class=padding href=/new-docs/toolstack/responsibilities/index.html>Responsibilities</a></li><li data-nav-id=/new-docs/toolstack/high-level/index.html><input type=checkbox id=R-section-dde4854617c1f5d00e4646f449a8ec77 aria-controls=R-subsections-dde4854617c1f5d00e4646f449a8ec77><label for=R-section-dde4854617c1f5d00e4646f449a8ec77><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu High-level architecture</span></label><a class=padding href=/new-docs/toolstack/high-level/index.html>High-level architecture</a><ul id=R-subsections-dde4854617c1f5d00e4646f449a8ec77 class=collapsible-menu><li data-nav-id=/new-docs/toolstack/high-level/environment/index.html><a class=padding href=/new-docs/toolstack/high-level/environment/index.html>Environment</a></li><li data-nav-id=/new-docs/toolstack/high-level/daemons/index.html><a class=padding href=/new-docs/toolstack/high-level/daemons/index.html>Daemons</a></li><li data-nav-id=/new-docs/toolstack/high-level/interfaces/index.html><a class=padding href=/new-docs/toolstack/high-level/interfaces/index.html>Interfaces</a></li></ul></li><li data-nav-id=/new-docs/toolstack/features/index.html><input type=checkbox id=R-section-5d4df6b6fbc8d5af47c300ab507cc521 aria-controls=R-subsections-5d4df6b6fbc8d5af47c300ab507cc521><label for=R-section-5d4df6b6fbc8d5af47c300ab507cc521><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Features</span></label><a class=padding href=/new-docs/toolstack/features/index.html>Features</a><ul id=R-subsections-5d4df6b6fbc8d5af47c300ab507cc521 class=collapsible-menu><li data-nav-id=/new-docs/toolstack/features/DR/index.html><a class=padding href=/new-docs/toolstack/features/DR/index.html>Disaster Recovery</a></li><li data-nav-id=/new-docs/toolstack/features/events/index.html><a class=padding href=/new-docs/toolstack/features/events/index.html>Event handling</a></li><li data-nav-id=/new-docs/toolstack/features/HA/index.html><a class=padding href=/new-docs/toolstack/features/HA/index.html>High-Availability</a></li><li data-nav-id=/new-docs/toolstack/features/MVD/index.html><a class=padding href=/new-docs/toolstack/features/MVD/index.html>Multi-version drivers</a></li><li data-nav-id=/new-docs/toolstack/features/NUMA/index.html><a class=padding href=/new-docs/toolstack/features/NUMA/index.html>NUMA</a></li><li data-nav-id=/new-docs/toolstack/features/snapshots/index.html><a class=padding href=/new-docs/toolstack/features/snapshots/index.html>Snapshots</a></li><li data-nav-id=/new-docs/toolstack/features/Tracing/index.html><a class=padding href=/new-docs/toolstack/features/Tracing/index.html>Tracing</a></li><li data-nav-id=/new-docs/toolstack/features/VGPU/index.html><a class=padding href=/new-docs/toolstack/features/VGPU/index.html>vGPU</a></li><li data-nav-id=/new-docs/toolstack/features/XSM/index.html><a class=padding href=/new-docs/toolstack/features/XSM/index.html>Xapi Storage Migration</a></li></ul></li></ul></li><li data-nav-id=/new-docs/xapi/index.html><input type=checkbox id=R-section-67e12bf3d95935fbf56dca0e788c11f2 aria-controls=R-subsections-67e12bf3d95935fbf56dca0e788c11f2><label for=R-section-67e12bf3d95935fbf56dca0e788c11f2><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Xapi</span></label><a class=padding href=/new-docs/xapi/index.html>Xapi</a><ul id=R-subsections-67e12bf3d95935fbf56dca0e788c11f2 class=collapsible-menu><li data-nav-id=/new-docs/xapi/guides/index.html><input type=checkbox id=R-section-cf20b1aa06d1cc447ea310de2b605d51 aria-controls=R-subsections-cf20b1aa06d1cc447ea310de2b605d51><label for=R-section-cf20b1aa06d1cc447ea310de2b605d51><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Guides</span></label><a class=padding href=/new-docs/xapi/guides/index.html>Guides</a><ul id=R-subsections-cf20b1aa06d1cc447ea310de2b605d51 class=collapsible-menu><li data-nav-id=/new-docs/xapi/guides/howtos/index.html><input type=checkbox id=R-section-3ffc2fd44b0a843a38dd54cb698aadf0 aria-controls=R-subsections-3ffc2fd44b0a843a38dd54cb698aadf0><label for=R-section-3ffc2fd44b0a843a38dd54cb698aadf0><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu How to add....</span></label><a class=padding href=/new-docs/xapi/guides/howtos/index.html>How to add....</a><ul id=R-subsections-3ffc2fd44b0a843a38dd54cb698aadf0 class=collapsible-menu><li data-nav-id=/new-docs/xapi/guides/howtos/add-class/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-class/index.html>Adding a Class to the API</a></li><li data-nav-id=/new-docs/xapi/guides/howtos/add-field/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-field/index.html>Adding a field to the API</a></li><li data-nav-id=/new-docs/xapi/guides/howtos/add-function/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-function/index.html>Adding a function to the API</a></li><li data-nav-id=/new-docs/xapi/guides/howtos/add-api-extension/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-api-extension/index.html>Adding a XenAPI extension</a></li></ul></li></ul></li><li data-nav-id=/new-docs/xapi/cli/index.html><a class=padding href=/new-docs/xapi/cli/index.html>CLI</a></li><li data-nav-id=/new-docs/xapi/database/index.html><input type=checkbox id=R-section-44b9d28660dda49c2b7949290a3e1b89 aria-controls=R-subsections-44b9d28660dda49c2b7949290a3e1b89><label for=R-section-44b9d28660dda49c2b7949290a3e1b89><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Database</span></label><a class=padding href=/new-docs/xapi/database/index.html>Database</a><ul id=R-subsections-44b9d28660dda49c2b7949290a3e1b89 class=collapsible-menu><li data-nav-id=/new-docs/xapi/database/redo-log/index.html><a class=padding href=/new-docs/xapi/database/redo-log/index.html>Metadata-on-LUN</a></li></ul></li><li data-nav-id=/new-docs/xapi/internals/index.html><input type=checkbox id=R-section-e47da3b3a01078022dd7e240a34b6bc4 aria-controls=R-subsections-e47da3b3a01078022dd7e240a34b6bc4><label for=R-section-e47da3b3a01078022dd7e240a34b6bc4><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Internals</span></label><a class=padding href=/new-docs/xapi/internals/index.html>Internals</a><ul id=R-subsections-e47da3b3a01078022dd7e240a34b6bc4 class=collapsible-menu><li data-nav-id=/new-docs/xapi/internals/certificates/index.html><a class=padding href=/new-docs/xapi/internals/certificates/index.html>Certificates and PEM Files</a></li><li data-nav-id=/new-docs/xapi/internals/generated/index.html><a class=padding href=/new-docs/xapi/internals/generated/index.html>Generated Parts of Xapi</a></li></ul></li><li data-nav-id=/new-docs/xapi/memory/index.html><a class=padding href=/new-docs/xapi/memory/index.html>Memory</a></li><li data-nav-id=/new-docs/xapi/storage/index.html><input type=checkbox id=R-section-d5e50434ccd4672b573b8b9cfa1e675a aria-controls=R-subsections-d5e50434ccd4672b573b8b9cfa1e675a><label for=R-section-d5e50434ccd4672b573b8b9cfa1e675a><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Storage</span></label><a class=padding href=/new-docs/xapi/storage/index.html>Storage</a><ul id=R-subsections-d5e50434ccd4672b573b8b9cfa1e675a class=collapsible-menu><li data-nav-id=/new-docs/xapi/storage/sxm/index.html><a class=padding href=/new-docs/xapi/storage/sxm/index.html>Storage migration</a></li></ul></li><li data-nav-id=/new-docs/xapi/walkthroughs/index.html><input type=checkbox id=R-section-ae42e6008c3827e3783a76feed214d3a aria-controls=R-subsections-ae42e6008c3827e3783a76feed214d3a><label for=R-section-ae42e6008c3827e3783a76feed214d3a><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Walk-throughs</span></label><a class=padding href=/new-docs/xapi/walkthroughs/index.html>Walk-throughs</a><ul id=R-subsections-ae42e6008c3827e3783a76feed214d3a class=collapsible-menu><li data-nav-id=/new-docs/xapi/walkthroughs/migration_overview/index.html><a class=padding href=/new-docs/xapi/walkthroughs/migration_overview/index.html>How XAPI handles migration request</a></li></ul></li></ul></li><li data-nav-id=/new-docs/xenopsd/index.html><input type=checkbox id=R-section-eaf872be43aeecdfeb5e6f8d151be1a6 aria-controls=R-subsections-eaf872be43aeecdfeb5e6f8d151be1a6><label for=R-section-eaf872be43aeecdfeb5e6f8d151be1a6><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Xenopsd</span></label><a class=padding href=/new-docs/xenopsd/index.html>Xenopsd</a><ul id=R-subsections-eaf872be43aeecdfeb5e6f8d151be1a6 class=collapsible-menu><li data-nav-id=/new-docs/xenopsd/architecture/index.html><a class=padding href=/new-docs/xenopsd/architecture/index.html>Architecture</a></li><li data-nav-id=/new-docs/xenopsd/design/index.html><input type=checkbox id=R-section-c4ba0778266b15d8b43f3f7369b55454 aria-controls=R-subsections-c4ba0778266b15d8b43f3f7369b55454><label for=R-section-c4ba0778266b15d8b43f3f7369b55454><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Design</span></label><a class=padding href=/new-docs/xenopsd/design/index.html>Design</a><ul id=R-subsections-c4ba0778266b15d8b43f3f7369b55454 class=collapsible-menu><li data-nav-id=/new-docs/xenopsd/design/Events/index.html><a class=padding href=/new-docs/xenopsd/design/Events/index.html>Events</a></li><li data-nav-id=/new-docs/xenopsd/design/hooks/index.html><a class=padding href=/new-docs/xenopsd/design/hooks/index.html>Hooks</a></li><li data-nav-id=/new-docs/xenopsd/design/pvs-proxy-ovs/index.html><a class=padding href=/new-docs/xenopsd/design/pvs-proxy-ovs/index.html>PVS Proxy OVS Rules</a></li><li data-nav-id=/new-docs/xenopsd/design/suspend-image-considerations/index.html><a class=padding href=/new-docs/xenopsd/design/suspend-image-considerations/index.html>Requirements for suspend image framing</a></li><li data-nav-id=/new-docs/xenopsd/design/suspend-image-framing-format/index.html><a class=padding href=/new-docs/xenopsd/design/suspend-image-framing-format/index.html>Suspend image framing format</a></li><li data-nav-id=/new-docs/xenopsd/design/Tasks/index.html><a class=padding href=/new-docs/xenopsd/design/Tasks/index.html>Tasks</a></li></ul></li><li data-nav-id=/new-docs/xenopsd/features/index.html><a class=padding href=/new-docs/xenopsd/features/index.html>Features</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/index.html><input type=checkbox id=R-section-82a272712946f38915b8e2cefa80a829 aria-controls=R-subsections-82a272712946f38915b8e2cefa80a829><label for=R-section-82a272712946f38915b8e2cefa80a829><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Walk-throughs</span></label><a class=padding href=/new-docs/xenopsd/walkthroughs/index.html>Walk-throughs</a><ul id=R-subsections-82a272712946f38915b8e2cefa80a829 class=collapsible-menu><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.start/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.start/index.html>Starting a VM</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.build/index.html><input type=checkbox id=R-section-cb0e73c14bd7f69383fe23bf9475f55d aria-controls=R-subsections-cb0e73c14bd7f69383fe23bf9475f55d><label for=R-section-cb0e73c14bd7f69383fe23bf9475f55d><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Building a VM</span></label><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.build/index.html>Building a VM</a><ul id=R-subsections-cb0e73c14bd7f69383fe23bf9475f55d class=collapsible-menu><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.build/VM_build/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.build/VM_build/index.html>VM_build μ-op</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.build/Domain.build/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.build/Domain.build/index.html>Domain.build</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.build/xenguest/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.build/xenguest/index.html>xenguest</a></li></ul></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.migrate/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.migrate/index.html>Migrating a VM</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/live-migration/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/live-migration/index.html>Live Migration</a></li></ul></li></ul></li><li data-nav-id=/new-docs/xcp-networkd/index.html><a class=padding href=/new-docs/xcp-networkd/index.html>Networkd</a></li><li data-nav-id=/new-docs/squeezed/index.html><input type=checkbox id=R-section-2b908e757f8297a064be7fe32eedad70 aria-controls=R-subsections-2b908e757f8297a064be7fe32eedad70><label for=R-section-2b908e757f8297a064be7fe32eedad70><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Squeezed</span></label><a class=padding href=/new-docs/squeezed/index.html>Squeezed</a><ul id=R-subsections-2b908e757f8297a064be7fe32eedad70 class=collapsible-menu><li data-nav-id=/new-docs/squeezed/architecture/index.html><a class=padding href=/new-docs/squeezed/architecture/index.html>Architecture</a></li><li data-nav-id=/new-docs/squeezed/design/index.html><a class=padding href=/new-docs/squeezed/design/index.html>Design</a></li></ul></li><li data-nav-id=/new-docs/xapi-guard/index.html><a class=padding href=/new-docs/xapi-guard/index.html>Xapi-guard</a></li><li class=parent data-nav-id=/new-docs/design/index.html><input type=checkbox id=R-section-584881683b3574eff66f4a8e3d60d561 aria-controls=R-subsections-584881683b3574eff66f4a8e3d60d561 checked><label for=R-section-584881683b3574eff66f4a8e3d60d561><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Designs</span></label><a class=padding href=/new-docs/design/index.html>Designs</a><ul id=R-subsections-584881683b3574eff66f4a8e3d60d561 class=collapsible-menu><li data-nav-id=/new-docs/design/add-qcow-tool-for-vdi-import-export/index.html><a class=padding href=/new-docs/design/add-qcow-tool-for-vdi-import-export/index.html>Add qcow tool to allow VDI import/export</a></li><li data-nav-id=/new-docs/design/sm-supported-image-formats/index.html><a class=padding href=/new-docs/design/sm-supported-image-formats/index.html>Add supported image formats in sm-list</a></li><li data-nav-id=/new-docs/design/aggr-storage-reboots/index.html><a class=padding href=/new-docs/design/aggr-storage-reboots/index.html>Aggregated Local Storage and Host Reboots</a></li><li data-nav-id=/new-docs/design/backtraces/index.html><a class=padding href=/new-docs/design/backtraces/index.html>Backtrace support</a></li><li data-nav-id=/new-docs/design/bonding-improvements/index.html><a class=padding href=/new-docs/design/bonding-improvements/index.html>Bonding Improvements design</a></li><li data-nav-id=/new-docs/design/coverage/index.html><a class=padding href=/new-docs/design/coverage/index.html>Code Coverage Profiling</a></li><li data-nav-id=/new-docs/design/cpu-levelling-v2/index.html><a class=padding href=/new-docs/design/cpu-levelling-v2/index.html>CPU feature levelling 2.0</a></li><li data-nav-id=/new-docs/design/distributed-database/index.html><a class=padding href=/new-docs/design/distributed-database/index.html>Distributed database</a></li><li data-nav-id=/new-docs/design/emergency-network-reset/index.html><a class=padding href=/new-docs/design/emergency-network-reset/index.html>Emergency Network Reset Design</a></li><li data-nav-id=/new-docs/design/fcoe-nics/index.html><a class=padding href=/new-docs/design/fcoe-nics/index.html>FCoE capable NICs</a></li><li data-nav-id=/new-docs/design/gpu-passthrough/index.html><a class=padding href=/new-docs/design/gpu-passthrough/index.html>GPU pass-through support</a></li><li data-nav-id=/new-docs/design/gpu-support-evolution/index.html><a class=padding href=/new-docs/design/gpu-support-evolution/index.html>GPU support evolution</a></li><li data-nav-id=/new-docs/design/pif-properties/index.html><a class=padding href=/new-docs/design/pif-properties/index.html>GRO and other properties of PIFs</a></li><li data-nav-id=/new-docs/design/heterogeneous-pools/index.html><a class=padding href=/new-docs/design/heterogeneous-pools/index.html>Heterogeneous pools</a></li><li data-nav-id=/new-docs/design/snapshot-revert/index.html><a class=padding href=/new-docs/design/snapshot-revert/index.html>Improving snapshot revert behaviour</a></li><li data-nav-id=/new-docs/design/integrated-gpu-passthrough/index.html><a class=padding href=/new-docs/design/integrated-gpu-passthrough/index.html>Integrated GPU passthrough support</a></li><li data-nav-id=/new-docs/design/local-database/index.html><a class=padding href=/new-docs/design/local-database/index.html>Local database</a></li><li data-nav-id=/new-docs/design/management-interface-on-vlan/index.html><a class=padding href=/new-docs/design/management-interface-on-vlan/index.html>Management Interface on VLAN</a></li><li data-nav-id=/new-docs/design/multiple-cluster-managers/index.html><a class=padding href=/new-docs/design/multiple-cluster-managers/index.html>Multiple Cluster Managers</a></li><li data-nav-id=/new-docs/design/multiple-device-emulators/index.html><a class=padding href=/new-docs/design/multiple-device-emulators/index.html>Multiple device emulators</a></li><li data-nav-id=/new-docs/design/ocfs2/index.html><a class=padding href=/new-docs/design/ocfs2/index.html>OCFS2 storage</a></li><li data-nav-id=/new-docs/design/patches-in-vdis/index.html><a class=padding href=/new-docs/design/patches-in-vdis/index.html>patches in VDIs</a></li><li data-nav-id=/new-docs/design/pci-passthrough/index.html><a class=padding href=/new-docs/design/pci-passthrough/index.html>PCI passthrough support</a></li><li data-nav-id=/new-docs/design/pool-wide-ssh/index.html><a class=padding href=/new-docs/design/pool-wide-ssh/index.html>Pool-wide SSH</a></li><li data-nav-id=/new-docs/design/xenopsd_events/index.html><a class=padding href=/new-docs/design/xenopsd_events/index.html>Process events from xenopsd in a timely manner</a></li><li data-nav-id=/new-docs/design/RDP/index.html><a class=padding href=/new-docs/design/RDP/index.html>RDP control</a></li><li data-nav-id=/new-docs/design/archival-redesign/index.html><a class=padding href=/new-docs/design/archival-redesign/index.html>RRDD archival redesign</a></li><li data-nav-id=/new-docs/design/plugin-protocol-v2/index.html><a class=padding href=/new-docs/design/plugin-protocol-v2/index.html>RRDD plugin protocol v2</a></li><li data-nav-id=/new-docs/design/plugin-protocol-v3/index.html><a class=padding href=/new-docs/design/plugin-protocol-v3/index.html>RRDD plugin protocol v3</a></li><li data-nav-id=/new-docs/design/schedule-snapshot/index.html><a class=padding href=/new-docs/design/schedule-snapshot/index.html>Schedule Snapshot Design</a></li><li data-nav-id=/new-docs/design/smapiv3/index.html><a class=padding href=/new-docs/design/smapiv3/index.html>SMAPIv3</a></li><li data-nav-id=/new-docs/design/emulated-pci-spec/index.html><a class=padding href=/new-docs/design/emulated-pci-spec/index.html>Specifying Emulated PCI Devices</a></li><li data-nav-id=/new-docs/design/sr-level-rrds/index.html><a class=padding href=/new-docs/design/sr-level-rrds/index.html>SR-Level RRDs</a></li><li data-nav-id=/new-docs/design/thin-lvhd/index.html><a class=padding href=/new-docs/design/thin-lvhd/index.html>thin LVHD storage</a></li><li class=active data-nav-id=/new-docs/design/pool-certificates/index.html><a class=padding href=/new-docs/design/pool-certificates/index.html>TLS vertification for intra-pool communications</a></li><li data-nav-id=/new-docs/design/tunnelling/index.html><a class=padding href=/new-docs/design/tunnelling/index.html>Tunnelling API design</a></li><li data-nav-id=/new-docs/design/user-certificates/index.html><a class=padding href=/new-docs/design/user-certificates/index.html>User-installable host certificates</a></li><li data-nav-id=/new-docs/design/vgpu-type-identifiers/index.html><a class=padding href=/new-docs/design/vgpu-type-identifiers/index.html>VGPU type identifiers</a></li><li data-nav-id=/new-docs/design/virt-hw-platform-vn/index.html><a class=padding href=/new-docs/design/virt-hw-platform-vn/index.html>Virtual Hardware Platform Version</a></li><li data-nav-id=/new-docs/design/xenprep/index.html><a class=padding href=/new-docs/design/xenprep/index.html>XenPrep</a></li></ul></li><li data-nav-id=/new-docs/python/index.html><a class=padding href=/new-docs/python/index.html>Python</a></li><li data-nav-id=/new-docs/xcp-rrdd/index.html><input type=checkbox id=R-section-38712d4ba58933e242c69e06308c5176 aria-controls=R-subsections-38712d4ba58933e242c69e06308c5176><label for=R-section-38712d4ba58933e242c69e06308c5176><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu RRDD</span></label><a class=padding href=/new-docs/xcp-rrdd/index.html>RRDD</a><ul id=R-subsections-38712d4ba58933e242c69e06308c5176 class=collapsible-menu><li data-nav-id=/new-docs/xcp-rrdd/futures/archival-redesign/index.html><a class=padding href=/new-docs/xcp-rrdd/futures/archival-redesign/index.html>RRDD archival redesign</a></li><li data-nav-id=/new-docs/xcp-rrdd/design/plugin-protocol-v2/index.html><a class=padding href=/new-docs/xcp-rrdd/design/plugin-protocol-v2/index.html>RRDD plugin protocol v2</a></li><li data-nav-id=/new-docs/xcp-rrdd/futures/sr-level-rrds/index.html><a class=padding href=/new-docs/xcp-rrdd/futures/sr-level-rrds/index.html>SR-Level RRDs</a></li></ul></li><li data-nav-id=/new-docs/xen-api/index.html><input type=checkbox id=R-section-85499c3ba3e3f693ce7955637d671edd aria-controls=R-subsections-85499c3ba3e3f693ce7955637d671edd><label for=R-section-85499c3ba3e3f693ce7955637d671edd><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu XenAPI</span></label><a class=padding href=/new-docs/xen-api/index.html>XenAPI</a><ul id=R-subsections-85499c3ba3e3f693ce7955637d671edd class=collapsible-menu><li data-nav-id=/new-docs/xen-api/basics/index.html><a class=padding href=/new-docs/xen-api/basics/index.html>XenAPI Basics</a></li><li data-nav-id=/new-docs/xen-api/wire-protocol/index.html><a class=padding href=/new-docs/xen-api/wire-protocol/index.html>Wire Protocol</a></li><li data-nav-id=/new-docs/xen-api/overview/index.html><a class=padding href=/new-docs/xen-api/overview/index.html>Overview of the XenAPI</a></li><li data-nav-id=/new-docs/xen-api/evolution/index.html><a class=padding href=/new-docs/xen-api/evolution/index.html>API evolution</a></li><li data-nav-id=/new-docs/xen-api/usage/index.html><a class=padding href=/new-docs/xen-api/usage/index.html>Using the API</a></li><li data-nav-id=/new-docs/xen-api/classes/index.html><input type=checkbox id=R-section-c18ca4c7a790a34a3710541914952da2 aria-controls=R-subsections-c18ca4c7a790a34a3710541914952da2><label for=R-section-c18ca4c7a790a34a3710541914952da2><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu XenAPI Reference</span></label><a class=padding href=/new-docs/xen-api/classes/index.html>XenAPI Reference</a><ul id=R-subsections-c18ca4c7a790a34a3710541914952da2 class=collapsible-menu><li data-nav-id=/new-docs/xen-api/classes/auth/index.html><a class=padding href=/new-docs/xen-api/classes/auth/index.html>auth</a></li><li data-nav-id=/new-docs/xen-api/classes/blob/index.html><a class=padding href=/new-docs/xen-api/classes/blob/index.html>blob</a></li><li data-nav-id=/new-docs/xen-api/classes/bond/index.html><a class=padding href=/new-docs/xen-api/classes/bond/index.html>Bond</a></li><li data-nav-id=/new-docs/xen-api/classes/certificate/index.html><a class=padding href=/new-docs/xen-api/classes/certificate/index.html>Certificate</a></li><li data-nav-id=/new-docs/xen-api/classes/cluster/index.html><a class=padding href=/new-docs/xen-api/classes/cluster/index.html>Cluster</a></li><li data-nav-id=/new-docs/xen-api/classes/cluster_host/index.html><a class=padding href=/new-docs/xen-api/classes/cluster_host/index.html>Cluster_host</a></li><li data-nav-id=/new-docs/xen-api/classes/console/index.html><a class=padding href=/new-docs/xen-api/classes/console/index.html>console</a></li><li data-nav-id=/new-docs/xen-api/classes/crashdump/index.html><a class=padding href=/new-docs/xen-api/classes/crashdump/index.html>crashdump</a></li><li data-nav-id=/new-docs/xen-api/classes/data_source/index.html><a class=padding href=/new-docs/xen-api/classes/data_source/index.html>data_source</a></li><li data-nav-id=/new-docs/xen-api/classes/dr_task/index.html><a class=padding href=/new-docs/xen-api/classes/dr_task/index.html>DR_task</a></li><li data-nav-id=/new-docs/xen-api/classes/event/index.html><a class=padding href=/new-docs/xen-api/classes/event/index.html>event</a></li><li data-nav-id=/new-docs/xen-api/classes/feature/index.html><a class=padding href=/new-docs/xen-api/classes/feature/index.html>Feature</a></li><li data-nav-id=/new-docs/xen-api/classes/gpu_group/index.html><a class=padding href=/new-docs/xen-api/classes/gpu_group/index.html>GPU_group</a></li><li data-nav-id=/new-docs/xen-api/classes/host/index.html><a class=padding href=/new-docs/xen-api/classes/host/index.html>host</a></li><li data-nav-id=/new-docs/xen-api/classes/host_cpu/index.html><a class=padding href=/new-docs/xen-api/classes/host_cpu/index.html>host_cpu</a></li><li data-nav-id=/new-docs/xen-api/classes/host_crashdump/index.html><a class=padding href=/new-docs/xen-api/classes/host_crashdump/index.html>host_crashdump</a></li><li data-nav-id=/new-docs/xen-api/classes/host_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/host_metrics/index.html>host_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/host_patch/index.html><a class=padding href=/new-docs/xen-api/classes/host_patch/index.html>host_patch</a></li><li data-nav-id=/new-docs/xen-api/classes/lvhd/index.html><a class=padding href=/new-docs/xen-api/classes/lvhd/index.html>LVHD</a></li><li data-nav-id=/new-docs/xen-api/classes/message/index.html><a class=padding href=/new-docs/xen-api/classes/message/index.html>message</a></li><li data-nav-id=/new-docs/xen-api/classes/network/index.html><a class=padding href=/new-docs/xen-api/classes/network/index.html>network</a></li><li data-nav-id=/new-docs/xen-api/classes/network_sriov/index.html><a class=padding href=/new-docs/xen-api/classes/network_sriov/index.html>network_sriov</a></li><li data-nav-id=/new-docs/xen-api/classes/observer/index.html><a class=padding href=/new-docs/xen-api/classes/observer/index.html>Observer</a></li><li data-nav-id=/new-docs/xen-api/classes/pbd/index.html><a class=padding href=/new-docs/xen-api/classes/pbd/index.html>PBD</a></li><li data-nav-id=/new-docs/xen-api/classes/pci/index.html><a class=padding href=/new-docs/xen-api/classes/pci/index.html>PCI</a></li><li data-nav-id=/new-docs/xen-api/classes/pgpu/index.html><a class=padding href=/new-docs/xen-api/classes/pgpu/index.html>PGPU</a></li><li data-nav-id=/new-docs/xen-api/classes/pif/index.html><a class=padding href=/new-docs/xen-api/classes/pif/index.html>PIF</a></li><li data-nav-id=/new-docs/xen-api/classes/pif_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/pif_metrics/index.html>PIF_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/pool/index.html><a class=padding href=/new-docs/xen-api/classes/pool/index.html>pool</a></li><li data-nav-id=/new-docs/xen-api/classes/pool_patch/index.html><a class=padding href=/new-docs/xen-api/classes/pool_patch/index.html>pool_patch</a></li><li data-nav-id=/new-docs/xen-api/classes/pool_update/index.html><a class=padding href=/new-docs/xen-api/classes/pool_update/index.html>pool_update</a></li><li data-nav-id=/new-docs/xen-api/classes/probe_result/index.html><a class=padding href=/new-docs/xen-api/classes/probe_result/index.html>probe_result</a></li><li data-nav-id=/new-docs/xen-api/classes/pusb/index.html><a class=padding href=/new-docs/xen-api/classes/pusb/index.html>PUSB</a></li><li data-nav-id=/new-docs/xen-api/classes/pvs_cache_storage/index.html><a class=padding href=/new-docs/xen-api/classes/pvs_cache_storage/index.html>PVS_cache_storage</a></li><li data-nav-id=/new-docs/xen-api/classes/pvs_proxy/index.html><a class=padding href=/new-docs/xen-api/classes/pvs_proxy/index.html>PVS_proxy</a></li><li data-nav-id=/new-docs/xen-api/classes/pvs_server/index.html><a class=padding href=/new-docs/xen-api/classes/pvs_server/index.html>PVS_server</a></li><li data-nav-id=/new-docs/xen-api/classes/pvs_site/index.html><a class=padding href=/new-docs/xen-api/classes/pvs_site/index.html>PVS_site</a></li><li data-nav-id=/new-docs/xen-api/classes/repository/index.html><a class=padding href=/new-docs/xen-api/classes/repository/index.html>Repository</a></li><li data-nav-id=/new-docs/xen-api/classes/role/index.html><a class=padding href=/new-docs/xen-api/classes/role/index.html>role</a></li><li data-nav-id=/new-docs/xen-api/classes/sdn_controller/index.html><a class=padding href=/new-docs/xen-api/classes/sdn_controller/index.html>SDN_controller</a></li><li data-nav-id=/new-docs/xen-api/classes/secret/index.html><a class=padding href=/new-docs/xen-api/classes/secret/index.html>secret</a></li><li data-nav-id=/new-docs/xen-api/classes/session/index.html><a class=padding href=/new-docs/xen-api/classes/session/index.html>session</a></li><li data-nav-id=/new-docs/xen-api/classes/sm/index.html><a class=padding href=/new-docs/xen-api/classes/sm/index.html>SM</a></li><li data-nav-id=/new-docs/xen-api/classes/sr/index.html><a class=padding href=/new-docs/xen-api/classes/sr/index.html>SR</a></li><li data-nav-id=/new-docs/xen-api/classes/sr_stat/index.html><a class=padding href=/new-docs/xen-api/classes/sr_stat/index.html>sr_stat</a></li><li data-nav-id=/new-docs/xen-api/classes/subject/index.html><a class=padding href=/new-docs/xen-api/classes/subject/index.html>subject</a></li><li data-nav-id=/new-docs/xen-api/classes/task/index.html><a class=padding href=/new-docs/xen-api/classes/task/index.html>task</a></li><li data-nav-id=/new-docs/xen-api/classes/tunnel/index.html><a class=padding href=/new-docs/xen-api/classes/tunnel/index.html>tunnel</a></li><li data-nav-id=/new-docs/xen-api/classes/usb_group/index.html><a class=padding href=/new-docs/xen-api/classes/usb_group/index.html>USB_group</a></li><li data-nav-id=/new-docs/xen-api/classes/user/index.html><a class=padding href=/new-docs/xen-api/classes/user/index.html>user</a></li><li data-nav-id=/new-docs/xen-api/classes/vbd/index.html><a class=padding href=/new-docs/xen-api/classes/vbd/index.html>VBD</a></li><li data-nav-id=/new-docs/xen-api/classes/vbd_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/vbd_metrics/index.html>VBD_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/vdi/index.html><a class=padding href=/new-docs/xen-api/classes/vdi/index.html>VDI</a></li><li data-nav-id=/new-docs/xen-api/classes/vdi_nbd_server_info/index.html><a class=padding href=/new-docs/xen-api/classes/vdi_nbd_server_info/index.html>vdi_nbd_server_info</a></li><li data-nav-id=/new-docs/xen-api/classes/vgpu/index.html><a class=padding href=/new-docs/xen-api/classes/vgpu/index.html>VGPU</a></li><li data-nav-id=/new-docs/xen-api/classes/vgpu_type/index.html><a class=padding href=/new-docs/xen-api/classes/vgpu_type/index.html>VGPU_type</a></li><li data-nav-id=/new-docs/xen-api/classes/vif/index.html><a class=padding href=/new-docs/xen-api/classes/vif/index.html>VIF</a></li><li data-nav-id=/new-docs/xen-api/classes/vif_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/vif_metrics/index.html>VIF_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/vlan/index.html><a class=padding href=/new-docs/xen-api/classes/vlan/index.html>VLAN</a></li><li data-nav-id=/new-docs/xen-api/classes/vm/index.html><a class=padding href=/new-docs/xen-api/classes/vm/index.html>VM</a></li><li data-nav-id=/new-docs/xen-api/classes/vm_appliance/index.html><a class=padding href=/new-docs/xen-api/classes/vm_appliance/index.html>VM_appliance</a></li><li data-nav-id=/new-docs/xen-api/classes/vm_guest_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/vm_guest_metrics/index.html>VM_guest_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/vm_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/vm_metrics/index.html>VM_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/vmpp/index.html><a class=padding href=/new-docs/xen-api/classes/vmpp/index.html>VMPP</a></li><li data-nav-id=/new-docs/xen-api/classes/vmss/index.html><a class=padding href=/new-docs/xen-api/classes/vmss/index.html>VMSS</a></li><li data-nav-id=/new-docs/xen-api/classes/vtpm/index.html><a class=padding href=/new-docs/xen-api/classes/vtpm/index.html>VTPM</a></li><li data-nav-id=/new-docs/xen-api/classes/vusb/index.html><a class=padding href=/new-docs/xen-api/classes/vusb/index.html>VUSB</a></li></ul></li><li data-nav-id=/new-docs/xen-api/releases/index.html><input type=checkbox id=R-section-163f98f7fb9ab44b225cce7a0165c198 aria-controls=R-subsections-163f98f7fb9ab44b225cce7a0165c198><label for=R-section-163f98f7fb9ab44b225cce7a0165c198><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu XenAPI Releases</span></label><a class=padding href=/new-docs/xen-api/releases/index.html>XenAPI Releases</a><ul id=R-subsections-163f98f7fb9ab44b225cce7a0165c198 class=collapsible-menu><li data-nav-id=/new-docs/xen-api/releases/24.16.0/index.html><a class=padding href=/new-docs/xen-api/releases/24.16.0/index.html>XAPI 24.16.0</a></li><li data-nav-id=/new-docs/xen-api/releases/24.14.0/index.html><a class=padding href=/new-docs/xen-api/releases/24.14.0/index.html>XAPI 24.14.0</a></li><li data-nav-id=/new-docs/xen-api/releases/24.10.0/index.html><a class=padding href=/new-docs/xen-api/releases/24.10.0/index.html>XAPI 24.10.0</a></li><li data-nav-id=/new-docs/xen-api/releases/24.3.0/index.html><a class=padding href=/new-docs/xen-api/releases/24.3.0/index.html>XAPI 24.3.0</a></li><li data-nav-id=/new-docs/xen-api/releases/24.0.0/index.html><a class=padding href=/new-docs/xen-api/releases/24.0.0/index.html>XAPI 24.0.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.30.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.30.0/index.html>XAPI 23.30.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.27.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.27.0/index.html>XAPI 23.27.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.25.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.25.0/index.html>XAPI 23.25.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.18.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.18.0/index.html>XAPI 23.18.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.14.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.14.0/index.html>XAPI 23.14.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.9.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.9.0/index.html>XAPI 23.9.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.1.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.1.0/index.html>XAPI 23.1.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.37.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.37.0/index.html>XAPI 22.37.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.33.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.33.0/index.html>XAPI 22.33.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.27.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.27.0/index.html>XAPI 22.27.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.26.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.26.0/index.html>XAPI 22.26.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.20.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.20.0/index.html>XAPI 22.20.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.19.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.19.0/index.html>XAPI 22.19.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.16.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.16.0/index.html>XAPI 22.16.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.12.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.12.0/index.html>XAPI 22.12.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.5.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.5.0/index.html>XAPI 22.5.0</a></li><li data-nav-id=/new-docs/xen-api/releases/21.4.0/index.html><a class=padding href=/new-docs/xen-api/releases/21.4.0/index.html>XAPI 21.4.0</a></li><li data-nav-id=/new-docs/xen-api/releases/21.3.0/index.html><a class=padding href=/new-docs/xen-api/releases/21.3.0/index.html>XAPI 21.3.0</a></li><li data-nav-id=/new-docs/xen-api/releases/21.2.0/index.html><a class=padding href=/new-docs/xen-api/releases/21.2.0/index.html>XAPI 21.2.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.329.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.329.0/index.html>XAPI 1.329.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.318.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.318.0/index.html>XAPI 1.318.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.313.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.313.0/index.html>XAPI 1.313.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.307.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.307.0/index.html>XAPI 1.307.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.304.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.304.0/index.html>XAPI 1.304.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.303.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.303.0/index.html>XAPI 1.303.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.301.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.301.0/index.html>XAPI 1.301.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.298.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.298.0/index.html>XAPI 1.298.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.297.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.297.0/index.html>XAPI 1.297.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.294.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.294.0/index.html>XAPI 1.294.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.290.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.290.0/index.html>XAPI 1.290.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.271.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.271.0/index.html>XAPI 1.271.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.257.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.257.0/index.html>XAPI 1.257.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.250.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.250.0/index.html>XAPI 1.250.0</a></li><li data-nav-id=/new-docs/xen-api/releases/nile-preview/index.html><a class=padding href=/new-docs/xen-api/releases/nile-preview/index.html>XenServer 8 Preview</a></li><li data-nav-id=/new-docs/xen-api/releases/stockholm_psr/index.html><a class=padding href=/new-docs/xen-api/releases/stockholm_psr/index.html>Citrix Hypervisor 8.2 Hotfix 2</a></li><li data-nav-id=/new-docs/xen-api/releases/stockholm/index.html><a class=padding href=/new-docs/xen-api/releases/stockholm/index.html>Citrix Hypervisor 8.2</a></li><li data-nav-id=/new-docs/xen-api/releases/quebec/index.html><a class=padding href=/new-docs/xen-api/releases/quebec/index.html>Citrix Hypervisor 8.1</a></li><li data-nav-id=/new-docs/xen-api/releases/naples/index.html><a class=padding href=/new-docs/xen-api/releases/naples/index.html>Citrix Hypervisor 8.0</a></li><li data-nav-id=/new-docs/xen-api/releases/lima/index.html><a class=padding href=/new-docs/xen-api/releases/lima/index.html>XenServer 7.6</a></li><li data-nav-id=/new-docs/xen-api/releases/kolkata/index.html><a class=padding href=/new-docs/xen-api/releases/kolkata/index.html>XenServer 7.5</a></li><li data-nav-id=/new-docs/xen-api/releases/jura/index.html><a class=padding href=/new-docs/xen-api/releases/jura/index.html>XenServer 7.4</a></li><li data-nav-id=/new-docs/xen-api/releases/inverness/index.html><a class=padding href=/new-docs/xen-api/releases/inverness/index.html>XenServer 7.3</a></li><li data-nav-id=/new-docs/xen-api/releases/falcon/index.html><a class=padding href=/new-docs/xen-api/releases/falcon/index.html>XenServer 7.2</a></li><li data-nav-id=/new-docs/xen-api/releases/ely/index.html><a class=padding href=/new-docs/xen-api/releases/ely/index.html>XenServer 7.1</a></li><li data-nav-id=/new-docs/xen-api/releases/dundee/index.html><a class=padding href=/new-docs/xen-api/releases/dundee/index.html>XenServer 7.0</a></li><li data-nav-id=/new-docs/xen-api/releases/indigo/index.html><a class=padding href=/new-docs/xen-api/releases/indigo/index.html>XenServer 6.5 SP1 Hotfix 31</a></li><li data-nav-id=/new-docs/xen-api/releases/cream/index.html><a class=padding href=/new-docs/xen-api/releases/cream/index.html>XenServer 6.5 SP1</a></li><li data-nav-id=/new-docs/xen-api/releases/creedence/index.html><a class=padding href=/new-docs/xen-api/releases/creedence/index.html>XenServer 6.5</a></li><li data-nav-id=/new-docs/xen-api/releases/clearwater-whetstone/index.html><a class=padding href=/new-docs/xen-api/releases/clearwater-whetstone/index.html>XenServer 6.2 SP1 Hotfix 11</a></li><li data-nav-id=/new-docs/xen-api/releases/clearwater-felton/index.html><a class=padding href=/new-docs/xen-api/releases/clearwater-felton/index.html>XenServer 6.2 SP1 Hotfix 4</a></li><li data-nav-id=/new-docs/xen-api/releases/vgpu-productisation/index.html><a class=padding href=/new-docs/xen-api/releases/vgpu-productisation/index.html>XenServer 6.2 SP1</a></li><li data-nav-id=/new-docs/xen-api/releases/vgpu-tech-preview/index.html><a class=padding href=/new-docs/xen-api/releases/vgpu-tech-preview/index.html>XenServer 6.2 SP1 Tech-Preview</a></li><li data-nav-id=/new-docs/xen-api/releases/clearwater/index.html><a class=padding href=/new-docs/xen-api/releases/clearwater/index.html>XenServer 6.2</a></li><li data-nav-id=/new-docs/xen-api/releases/tampa/index.html><a class=padding href=/new-docs/xen-api/releases/tampa/index.html>XenServer 6.1</a></li><li data-nav-id=/new-docs/xen-api/releases/boston/index.html><a class=padding href=/new-docs/xen-api/releases/boston/index.html>XenServer 6.0</a></li><li data-nav-id=/new-docs/xen-api/releases/cowley/index.html><a class=padding href=/new-docs/xen-api/releases/cowley/index.html>XenServer 5.6 FP1</a></li><li data-nav-id=/new-docs/xen-api/releases/midnight-ride/index.html><a class=padding href=/new-docs/xen-api/releases/midnight-ride/index.html>XenServer 5.6</a></li><li data-nav-id=/new-docs/xen-api/releases/george/index.html><a class=padding href=/new-docs/xen-api/releases/george/index.html>XenServer 5.5</a></li><li data-nav-id=/new-docs/xen-api/releases/orlando-update-1/index.html><a class=padding href=/new-docs/xen-api/releases/orlando-update-1/index.html>XenServer 5.0 Update 1</a></li><li data-nav-id=/new-docs/xen-api/releases/orlando/index.html><a class=padding href=/new-docs/xen-api/releases/orlando/index.html>XenServer 5.0</a></li><li data-nav-id=/new-docs/xen-api/releases/symc/index.html><a class=padding href=/new-docs/xen-api/releases/symc/index.html>XenServer 4.1.1</a></li><li data-nav-id=/new-docs/xen-api/releases/miami/index.html><a class=padding href=/new-docs/xen-api/releases/miami/index.html>XenServer 4.1</a></li><li data-nav-id=/new-docs/xen-api/releases/rio/index.html><a class=padding href=/new-docs/xen-api/releases/rio/index.html>XenServer 4.0</a></li></ul></li><li data-nav-id=/new-docs/xen-api/topics/index.html><input type=checkbox id=R-section-7bfdf54ffdbca634ba4315d64a0b4174 aria-controls=R-subsections-7bfdf54ffdbca634ba4315d64a0b4174><label for=R-section-7bfdf54ffdbca634ba4315d64a0b4174><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Topics</span></label><a class=padding href=/new-docs/xen-api/topics/index.html>Topics</a><ul id=R-subsections-7bfdf54ffdbca634ba4315d64a0b4174 class=collapsible-menu><li data-nav-id=/new-docs/xen-api/topics/udhcp/index.html><a class=padding href=/new-docs/xen-api/topics/udhcp/index.html>API for configuring the udhcp server in Dom0</a></li><li data-nav-id=/new-docs/xen-api/topics/guest-agents/index.html><a class=padding href=/new-docs/xen-api/topics/guest-agents/index.html>Guest agents</a></li><li data-nav-id=/new-docs/xen-api/topics/memory/index.html><a class=padding href=/new-docs/xen-api/topics/memory/index.html>Memory</a></li><li data-nav-id=/new-docs/xen-api/topics/metrics/index.html><a class=padding href=/new-docs/xen-api/topics/metrics/index.html>Metrics</a></li><li data-nav-id=/new-docs/xen-api/topics/snapshots/index.html><a class=padding href=/new-docs/xen-api/topics/snapshots/index.html>Snapshots</a></li><li data-nav-id=/new-docs/xen-api/topics/consoles/index.html><a class=padding href=/new-docs/xen-api/topics/consoles/index.html>VM consoles</a></li><li data-nav-id=/new-docs/xen-api/topics/importexport/index.html><a class=padding href=/new-docs/xen-api/topics/importexport/index.html>VM import/export</a></li><li data-nav-id=/new-docs/xen-api/topics/vm-lifecycle/index.html><a class=padding href=/new-docs/xen-api/topics/vm-lifecycle/index.html>VM Lifecycle</a></li><li data-nav-id=/new-docs/xen-api/topics/xencenter/index.html><a class=padding href=/new-docs/xen-api/topics/xencenter/index.html>XenCenter</a></li></ul></li></ul></li></ul></div><div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"></div><div id=R-menu-footer><hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"><div id=R-prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVariantSwitch"><ul><li id=R-select-language-container class=footerLangSwitch><div class="padding menu-control"><i class="fa-fw fas fa-language"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-language>Language</label>
<select id=R-select-language onchange="location=this.querySelector(this.value).dataset.url"><option id=R-select-language-en value=#R-select-language-en data-url=/new-docs/design/pool-certificates/index.html lang=en-us selected></option></select></div><div class=clear></div></div></li><li id=R-select-variant-container class="footerVariantSwitch showVariantSwitch"><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Theme</label>
<select id=R-select-variant onchange=window.relearn.changeVariant(this.value)><option id=R-select-variant-auto value=auto selected>Auto</option><option id=R-select-variant-zen-light value=zen-light>Zen Light</option><option id=R-select-variant-zen-dark value=zen-dark>Zen Dark</option><option id=R-select-variant-red value=red>Red</option><option id=R-select-variant-blue value=blue>Blue</option><option id=R-select-variant-green value=green>Green</option><option id=R-select-variant-learn value=learn>Learn</option><option id=R-select-variant-neon value=neon>Neon</option><option id=R-select-variant-relearn-light value=relearn-light>Relearn Light</option><option id=R-select-variant-relearn-bright value=relearn-bright>Relearn Bright</option><option id=R-select-variant-relearn-dark value=relearn-dark>Relearn Dark</option></select></div><div class=clear></div></div><script>window.relearn.markVariant()</script></li><li class=footerVisitedLinks><div class="padding menu-control"><i class="fa-fw fas fa-history"></i>
<span>&nbsp;</span><div class=control-style><button onclick=clearHistory()>Clear History</button></div><div class=clear></div></div></li></ul></div><div id=R-footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></div></aside><script src=/new-docs/js/clipboard.min.js?1756301573 defer></script><script src=/new-docs/js/perfect-scrollbar.min.js?1756301573 defer></script><script src=/new-docs/js/d3/d3-color.min.js?1756301573 defer></script><script src=/new-docs/js/d3/d3-dispatch.min.js?1756301573 defer></script><script src=/new-docs/js/d3/d3-drag.min.js?1756301573 defer></script><script src=/new-docs/js/d3/d3-ease.min.js?1756301573 defer></script><script src=/new-docs/js/d3/d3-interpolate.min.js?1756301573 defer></script><script src=/new-docs/js/d3/d3-selection.min.js?1756301573 defer></script><script src=/new-docs/js/d3/d3-timer.min.js?1756301573 defer></script><script src=/new-docs/js/d3/d3-transition.min.js?1756301573 defer></script><script src=/new-docs/js/d3/d3-zoom.min.js?1756301573 defer></script><script src=/new-docs/js/js-yaml.min.js?1756301573 defer></script><script src=/new-docs/js/mermaid.min.js?1756301573 defer></script><script>window.themeUseMermaid=JSON.parse('{ "fontFamily": "Roboto Flex", "securityLevel": "loose" }')</script><script src=/new-docs/js/theme.js?1756301573 defer></script><script>function apply_image_invert_filter(e){document.querySelectorAll("img").forEach(function(t){if(t.classList.contains("no-invert"))return;t.style="filter: invert("+e+");"})}function darkThemeUsed(){const t=window.getComputedStyle(document.querySelector("body")),n=t.getPropertyValue("background-color");var e=n.match(/\d+/g).map(function(e){return parseInt(e,10)});return e.length===3&&.2126*e[0]+.7152*e[1]+.0722*e[2]<165}const invertToDarkGray=.85;darkThemeUsed()&&apply_image_invert_filter(invertToDarkGray),document.addEventListener("themeVariantLoaded",function(e){apply_image_invert_filter(e.detail.variant.endsWith("dark")?invertToDarkGray:0)})</script></body></html>