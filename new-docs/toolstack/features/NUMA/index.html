<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta name=generator content="Relearn 5.20.0+tip"><meta name=description content><title>NUMA :: XAPI Toolstack Developer Documentation</title><link href=/new-docs/images/favicon.png?1709824875 rel=icon type=image/png><link href=/new-docs/css/fontawesome-all.min.css?1709824875 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/new-docs/css/fontawesome-all.min.css?1709824875 rel=stylesheet></noscript><link href=/new-docs/css/nucleus.css?1709824875 rel=stylesheet><link href=/new-docs/css/auto-complete.css?1709824875 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/new-docs/css/auto-complete.css?1709824875 rel=stylesheet></noscript><link href=/new-docs/css/perfect-scrollbar.min.css?1709824875 rel=stylesheet><link href=/new-docs/css/fonts.css?1709824875 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/new-docs/css/fonts.css?1709824875 rel=stylesheet></noscript><link href=/new-docs/css/theme.css?1709824875 rel=stylesheet><link href=/new-docs/css/theme-red.css?1709824875 rel=stylesheet id=variant-style><link href=/new-docs/css/variant.css?1709824875 rel=stylesheet><link href=/new-docs/css/print.css?1709824875 rel=stylesheet media=print><link href=/new-docs/css/ie.css?1709824875 rel=stylesheet><script src=/new-docs/js/url.js?1709824875></script>
<script src=/new-docs/js/variant.js?1709824875></script>
<script>window.index_js_url="/new-docs/index.search.js";var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_No_results_found="No results found for \"{0}\"",window.T_N_results_found="{1} results found for \"{0}\"",baseUriFull="https://xapi-project.github.io/new-docs/",window.variants&&variants.init(["red"])</script></head><body class="mobile-support html" data-url=/new-docs/toolstack/features/NUMA/index.html><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div class=navigation><a class="nav nav-next topbar-link" href=/new-docs/toolstack/features/snapshots/index.html title="Snapshots (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a></div><div class=navigation><a class="nav nav-prev topbar-link" href=/new-docs/toolstack/features/HA/index.html title="High-Availability (&#129104;)"><i class="fas fa-chevron-left fa-fw"></i></a></div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle class=topbar-link title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span>
<span id=toc-menu title='Table of Contents (CTRL+ALT+t)'><i class="fas fa-list-alt fa-fw"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/new-docs/index.html><span itemprop=name>XAPI Toolstack Developer Guide</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/new-docs/toolstack/index.html><span itemprop=name>The XAPI Toolstack</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/new-docs/toolstack/features/index.html><span itemprop=name>Features</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>NUMA</span><meta itemprop=position content="4"></li></ol></div><div class="default-animation progress"><div class=toc-wrapper><nav id=TableOfContents><ul><li><a href=#numa-in-a-nutshell>NUMA in a nutshell</a><ul><li><a href=#the-numa-distance-matrix>The NUMA distance matrix</a></li></ul></li><li><a href=#advantages-of-numa>Advantages of NUMA</a></li><li><a href=#xen-vcpu-soft-affinity>Xen vCPU soft-affinity</a></li><li><a href=#best-effort-numa-aware-memory-allocation-for-vms>Best effort NUMA-aware memory allocation for VMs</a></li><li><a href=#limitations-and-tradeoffs>Limitations and tradeoffs</a></li><li><a href=#xapi-datamodel-design>XAPI datamodel design</a><ul><li><a href=#xenopsd-implementation>Xenopsd implementation</a></li></ul></li><li><a href=#future-work>Future work</a></li></ul></nav></div></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=numa>NUMA</h1><h2 id=numa-in-a-nutshell>NUMA in a nutshell</h2><p>Systems that contain more than one CPU socket are typically built on a Non-Uniform Memory Architecture (NUMA) <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup><sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.
In a NUMA system each node has fast, lower latency access to local memory.</p><p><a href=#image-76c0b8019387113721f692513cac6a92 class=lightbox-link><img src=/new-docs/toolstack/features/NUMA/hwloc.svg alt=hwloc class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=image-76c0b8019387113721f692513cac6a92><img src=/new-docs/toolstack/features/NUMA/hwloc.svg alt=hwloc class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>In the diagram <sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> above we have 4 NUMA nodes:</p><ul><li>2 of those are due to 2 separate physical packages (sockets)</li><li>a further 2 is due to Sub-NUMA-Clustering (aka Nodes Per Socket for AMD) where the L3 cache is split</li></ul><p>The L3 cache is shared among multiple cores, but cores <code>0-5</code> have lower latency access to one part of it, than cores <code>6-11</code>, and this is also reflected by splitting memory addresses into 4 31GiB ranges in total.</p><p>In the diagram the closer the memory is to the core, the lower the access latency:</p><ul><li>per-core caches: L1, L2</li><li>per-package shared cache: L3 (local part), L3 (remote part)</li><li>local NUMA node (to a group of cores, e.g. <code>L#0 P#0</code>), node 0</li><li>remote NUMA node in same package (<code>L#1 P#2</code>), node 1</li><li>remote NUMA node in other packages (<code>L#2 P#1</code> and &lsquo;L#3P#3&rsquo;), node 2 and 3</li></ul><h3 id=the-numa-distance-matrix>The NUMA distance matrix</h3><p>Accessing remote NUMA node in the other package has to go through a shared interconnect, which has lower bandwidth than the direct connections, and also a bottleneck if both cores have to access remote memory: the bandwidth for a single core is effectively at most half.</p><p>This is reflected in the NUMA distance/latency matrix.
The units are arbitrary, and by convention access latency to the local NUMA node is given distance &lsquo;10&rsquo;.</p><p>Relative latency matrix by logical indexes:</p><table><thead><tr><th>index</th><th>0</th><th>2</th><th>1</th><th>3</th></tr></thead><tbody><tr><td>0</td><td>10</td><td>21</td><td>11</td><td>21</td></tr><tr><td>2</td><td>21</td><td>10</td><td>21</td><td>11</td></tr><tr><td>1</td><td>11</td><td>21</td><td>10</td><td>21</td></tr><tr><td>3</td><td>21</td><td>11</td><td>21</td><td>10</td></tr></tbody></table><p>This follows the latencies described previously:</p><ul><li>fast access to local NUMA node memory (by definition), node 0, cost 10</li><li>slightly slower access latency to the other NUMA node in same package, node 1, cost 11</li><li>twice as slow access latency to remote NUMA memory in the other physical package (socket): nodes 2 and 3, cost 21</li></ul><p>There is also I/O NUMA where a cost is similarly associated to where a PCIe is plugged in, but exploring that is future work (it requires exposing NUMA topology to the Dom0 kernel to benefit from it), and for simplicity the diagram above does not show it.</p><h2 id=advantages-of-numa>Advantages of NUMA</h2><p>NUMA does have advantages though: if each node accesses only its local memory, then each node can independently achieve maximum throughput.</p><p>For best performance we should:</p><ul><li>minimize the amount of interconnect bandwidth we are using</li><li>run code that accesses memory allocated on the closest NUMA node</li><li>maximize the number of NUMA nodes that we use in the system as a whole</li></ul><p>If a VM&rsquo;s memory and vCPUs can entirely fit within a single NUMA node then we should tell Xen to prefer to allocate memory from and run the vCPUs on a single NUMA node.</p><h2 id=xen-vcpu-soft-affinity>Xen vCPU soft-affinity</h2><p>The Xen scheduler supports 2 kinds of constraints:</p><ul><li>hard pinning: a vCPU may only run on the specified set of pCPUs and nowhere else</li><li>soft pinning: a vCPU is <em>preferably</em> run on the specified set of pCPUs, but if they are all busy then it may run elsewhere</li></ul><p>The former is useful if you want strict separation, but it can potentially leave part of the system idle while another part is bottlenecked with lots of vCPUs all competing for the same limited set of pCPUs.</p><p>Xen does not migrate workloads between NUMA nodes on its own (the Linux kernel does), although it is possible to achieve a similar effect with explicit migration.
However migration introduces additional delays and is best avoided for entire VMs.</p><p>The latter (soft pinning) is preferred: running a workload now, even on a potentially suboptimal pCPU (higher NUMA latency) is still better than not running it at all and waiting until a pCPU is freed up.</p><p>Xen will also allocate memory for the VM according to the vCPU (soft) pinning: if the vCPUs are pinned only to NUMA nodes A and B, then it will allocate the VM&rsquo;s memory from NUMA nodes A and B (in a round-robin way, resulting in interleaving).</p><p>By default (no pinning) it will interleave memory from all NUMA nodes, which provides average performance, but individual tasks&rsquo; performance may be significantly higher or lower depending on which NUMA node the application may have &ldquo;landed&rdquo; on.
Furthermore restarting processes will speed them up or slow them down as address space randomization picks different memory regions inside a VM.</p><p>Note that this is not the worst case: the worst case would be for memory to be allocated on one NUMA node, but the vCPU always running on the furthest away NUMA node.</p><h2 id=best-effort-numa-aware-memory-allocation-for-vms>Best effort NUMA-aware memory allocation for VMs</h2><p>By default Xen stripes the VM&rsquo;s memory accross all NUMA nodes of the host, which means that every VM has to go through all the interconnects.
The goal here is to find a better allocation than the default, not necessarily an optimal allocation.
An optimal allocation would require knowing what VMs you would start/create in the future, and planning across hosts too.</p><p>Overall we want to balance the VMs across NUMA nodes, such that we use all NUMA nodes to take advantage of the maximum memory bandwidth available on the system.
For now this proposed balancing will be done only by balancing memory usage: always heuristically allocating VMs on the NUMA node that has the most available memory.
Note that this allocation has a race condition for now when multiple VMs are booted in parallel, because we don&rsquo;t wait until Xen has constructed the domain for each one (that&rsquo;d serialize domain construction, which is currently parallel).
This may be improved in the future by having an API to query Xen where it has allocated the memory, and to explicitly ask it to place memory on a given NUMA node (instead of best_effort).</p><p>If a VM doesn&rsquo;t fit into a single node then it is not so clear what the best approach is.
One criteria to consider is minimizing the NUMA distance between the nodes chosen for the VM.
Large NUMA systems may not be fully connected in a mesh requiring multiple hops to each a node, or even have assymetric links, or links with different bitwidth.
These tradeoff should be approximatively reflected in the ACPI SLIT tables, as a matrix of distances between nodes.
It is possible that 3 NUMA nodes have a smaller average/maximum distance than 2, so we need to consider all possibilities.</p><p>For N nodes there would be 2^N possibilities, so [Topology.NUMA.candidates] limits the number of choices to 65520+N (full set of 2^N possibilities for 16 NUMA nodes, and a reduced set of choices for larger systems).</p><p>[Topology.NUMA.candidates] is a sorted sequence of node sets, in ascending order of maximum/average distances.
Once we&rsquo;ve eliminated the candidates not suitable for this VM (that do not have enough total memory/pCPUs) we are left with a monotonically increasing sequence of nodes.
There are still multiple possibilities with same average distance.
This is where we consider our second criteria - balancing - and pick the node with most available free memory.</p><p>Once a suitable set of NUMA nodes are picked we compute the CPU soft affinity as the union of the CPUs from all these NUMA nodes.
If we didn&rsquo;t find a solution then we let Xen use its default allocation.</p><p>The &ldquo;distances&rdquo; between NUMA nodes may not all be equal, e.g. some nodes may have shorter links to some remote NUMA nodes, while others may have to go through multiple hops to reach it.
See page 13 in <sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup> for a diagram of an AMD Opteron 6272 system.</p><h2 id=limitations-and-tradeoffs>Limitations and tradeoffs</h2><ul><li>Booting multiple VMs in parallel will result in potentially allocating both on the same NUMA node (race condition)</li><li>When we&rsquo;re about to run out of host memory we&rsquo;ll fall back to striping memory again, but the soft affinity mask won&rsquo;t reflect that (this needs an API to query Xen on where it has actually placed the VM, so we can fix up the mask accordingly)</li><li>XAPI is not aware of NUMA balancing across a pool, and choses hosts purely based on total amount of free memory, even if a better NUMA placement could be found on another host</li><li>Very large (>16 NUMA nodes) systems may only explore a limited number of choices (fit into a single node vs fallback to full interleaving)</li><li>The exact VM placement is not yet controllable</li><li>Microbenchmarks with a single VM on a host show both performance improvements and regressions on memory bandwidth usage: previously a single VM may have been able to take advantage of the bandwidth of both NUMA nodes if it happened to allocate memory from the right places, whereas now it&rsquo;ll be forced to use just a single node.
As soon as you have more than 1 VM that is busy on a system enabling NUMA balancing should almost always be an improvement though.</li><li>it is not supported to combine hard vCPU masks with soft affinity: if hard affinities are used then no NUMA scheduling is done by the toolstack and we obey exactly what the user has asked for with hard affinities.
This shouldn&rsquo;t affect other VMs since the memory used by hard-pinned VMs will still be reflected in overall less memory available on individual NUMA nodes.</li><li>Corner case: the ACPI standard allows certain NUMA nodes to be unreachable (distance <code>0xFF</code> = <code>-1</code> in the Xen bindings).
This is not supported and will cause an exception to be raised.
If this is an issue in practice the NUMA matrix could be pre-filtered to contain only reachable nodes.
NUMA nodes with 0 CPUs <em>are</em> accepted (it can result from hard affinity pinnings)</li><li>NUMA balancing is not considered during HA planning</li><li>Dom0 is a single VM that needs to communicate with all other VMs, so NUMA balancing is not applied to it (we&rsquo;d need to expose NUMA topology to the Dom0 kernel so it can better allocate processes)</li><li>IO NUMA is out of scope for now</li></ul><h2 id=xapi-datamodel-design>XAPI datamodel design</h2><ul><li>New API field: <code>Host.numa_affinity_policy</code>.</li><li>Choices: <code>default_policy</code>, <code>any</code>, <code>best_effort</code>.</li><li>On upgrade the field is set to <code>default_policy</code></li><li>Changes in the field only affect newly (re)booted VMs, for changes to take effect on existing VMs a host evacuation or reboot is needed</li></ul><p>There may be more choices in the future (e.g. <code>strict</code>, which requires both Xen and toolstack changes).</p><p>Meaning of the policy:</p><ul><li><p><code>any</code>: the Xen default where it allocated memory by striping across NUMA nodes</p></li><li><p><code>best_effort</code>: the algorithm described in this document, where soft pinning is used to achieve better balancing and lower latency</p></li><li><p><code>default_policy</code>: when the admin hasn&rsquo;t expressed a preference</p></li><li><p>Currently <code>default_policy</code> is treated as <code>any</code>, but the admin can change it, and then the system will remember that change across upgrades.
If we didn&rsquo;t have a <code>default_policy</code> then changing the &ldquo;default&rdquo; policy on an upgrade would be tricky: we either risk overriding an explicit choice of the admin, or existing installs cannot take advantage of the improved performance from <code>best_effort</code></p></li><li><p>Future XAPI versions may change <code>default_policy</code> to mean <code>best_effort</code>.
Admins can still override it to <code>any</code> if they wish on a host by host basis.</p></li></ul><p>It is not expected that users would have to change <code>best_effort</code>, unless they run very specific workloads, so a pool level control is not provided at this moment.</p><p>There is also no separate feature flag: this host flag acts as a feature flag that can be set through the API without restarting the toolstack.
Although obviously only new VMs will benefit.</p><p>Debugging the allocator is done by running <code>xl vcpu-list</code> and investigating the soft pinning masks, and by analyzing xensource.log.</p><h3 id=xenopsd-implementation>Xenopsd implementation</h3><p>See the documentation in [softaffinity.mli] and [topology.mli].</p><ul><li>[Softaffinity.plan] returns a [CPUSet] given a host&rsquo;s NUMA allocation state and a VM&rsquo;s NUMA allocation request.</li><li>[Topology.CPUSet] provides helpers for operating on a set of CPU indexes.</li><li>[Topology.NUMAResource] is a [CPUSet] and the free memory available on a NUMA node.</li><li>[Topology.NUMARequest] is a request for a given number of vCPUs and memory in bytes.</li><li>[Topology.NUMA] represents a host&rsquo;s NUMA allocation state.</li><li>[Topology.NUMA.candidates] are groups of nodes orderd by minimum average distance.
The sequence is limited to [N+65520], where [N] is the number of NUMA nodes.
This avoids exponential state space explosion on very large systems (>16 NUMA nodes).</li><li>[Topology.NUMA.choose] will choose one NUMA node deterministically, while trying to keep overall NUMA node usage balanced.</li><li>[Domain.numa_placement] builds a [NUMARequest] and uses the above [Topology] and [Softaffinity] functions to compute and apply a plan.</li></ul><p>We used to have a <code>xenopsd.conf</code> configuration option to enable numa placement, for backwards compatibility this is still supported, but only if the admin hasn&rsquo;t set an explicit policy on the Host.
It is best to remove the experimental <code>xenopsd.conf</code> entry though, a future version may completely drop it.</p><p>Tests are in [test_topology.ml] which checks balancing properties and whether the plan has improved best/worst/average-case access times in a simulated test based on 2 predefined NUMA distance matrixes (one from Intel and one from an AMD system).</p><h2 id=future-work>Future work</h2><ul><li>enable &lsquo;best_effort&rsquo; mode by default once more testing has been done</li><li>an API to query Xen where it has actually allocated the VM&rsquo;s memory.
Currently only an <code>xl debug-keys</code> interface exists which is not supported in production as it can result in killing the host via the watchdog, and is not a proper API, but a textual debug output with no stability guarantees.</li><li>more host policies (e.g. <code>strict</code>).
Requires the XAPI pool scheduler to be NUMA aware and consider it as part of chosing hosts.</li><li>VM level policy that can set a NUMA affinity index, mapped to a NUMA node modulo NUMA nodes available on the system (this is needed so that after migration we don&rsquo;t end up trying to allocate vCPUs to a non-existent NUMA node)</li><li>VM level anti-affinity rules for NUMA placement (can be achieved by setting unique NUMA affinity indexes)</li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://wiki.xenproject.org/wiki/Xen_on_NUMA_Machines target=_blank>Xen on NUMA Machines</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://www.kernel.org/doc/html/v6.6/mm/numa.html target=_blank>What is NUMA?</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>created with <code>lstopo-no-graphics --no-io --of svg --vert=L3 >hwloc.svg</code> on a bare metal Linux&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>Lepers, Baptiste. <a href=https://theses.hal.science/tel-01549294/document target=_blank>&ldquo;Improving performance on NUMA systems.&rdquo;</a> PhD diss., Universit√© de Grenoble, 2014.&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline></footer></article></div></main></div><aside id=sidebar class=default-animation><div id=header-topbar class=default-animation></div><div id=header-wrapper class=default-animation><div id=header class=default-animation><img src=https://xapi-project.github.io/new-docs//images/xapi-project.png></div><div class="searchbox default-animation"><i class="fas fa-search" title="Search (CTRL+ALT+f)"></i>
<label class=a11y-only for=search-by>Search</label>
<input data-search-input id=search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div><script>var contentLangs=["en"]</script><script src=/new-docs/js/auto-complete.js?1709824875 defer></script>
<script src=/new-docs/js/lunr/lunr.min.js?1709824875 defer></script>
<script src=/new-docs/js/lunr/lunr.stemmer.support.min.js?1709824875 defer></script>
<script src=/new-docs/js/lunr/lunr.multi.min.js?1709824875 defer></script>
<script src=/new-docs/js/lunr/lunr.en.min.js?1709824875 defer></script>
<script src=/new-docs/js/search.js?1709824875 defer></script></div><div id=homelinks class="default-animation homelinks"><ul><li><a class=padding href=/new-docs/index.html><i class="fas fa-home"></i> Home</a></li></ul><hr class=padding></div><div id=content-wrapper class=highlightable><div id=topics><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/new-docs/toolstack/index.html class=parent><input type=checkbox id=section-733bfb8b221c6a3949d666444cf4445d aria-controls=subsections-733bfb8b221c6a3949d666444cf4445d checked><label for=section-733bfb8b221c6a3949d666444cf4445d><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu The Toolstack</span></label><a class=padding href=/new-docs/toolstack/index.html>The Toolstack</a><ul id=subsections-733bfb8b221c6a3949d666444cf4445d class="morespace collapsible-menu"><li data-nav-id=/new-docs/toolstack/responsibilities/index.html><a class=padding href=/new-docs/toolstack/responsibilities/index.html>Responsibilities</a></li><li data-nav-id=/new-docs/toolstack/high-level/index.html><input type=checkbox id=section-93d1c0b933c799c336ad0fd09a6dc0ae aria-controls=subsections-93d1c0b933c799c336ad0fd09a6dc0ae><label for=section-93d1c0b933c799c336ad0fd09a6dc0ae><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu High-level architecture</span></label><a class=padding href=/new-docs/toolstack/high-level/index.html>High-level architecture</a><ul id=subsections-93d1c0b933c799c336ad0fd09a6dc0ae class="morespace collapsible-menu"><li data-nav-id=/new-docs/toolstack/high-level/environment/index.html><a class=padding href=/new-docs/toolstack/high-level/environment/index.html>Environment</a></li><li data-nav-id=/new-docs/toolstack/high-level/daemons/index.html><a class=padding href=/new-docs/toolstack/high-level/daemons/index.html>Daemons</a></li><li data-nav-id=/new-docs/toolstack/high-level/interfaces/index.html><a class=padding href=/new-docs/toolstack/high-level/interfaces/index.html>Interfaces</a></li></ul></li><li data-nav-id=/new-docs/toolstack/features/index.html class=parent><input type=checkbox id=section-a202420b9d8f13c2d690377c4357de50 aria-controls=subsections-a202420b9d8f13c2d690377c4357de50 checked><label for=section-a202420b9d8f13c2d690377c4357de50><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Features</span></label><a class=padding href=/new-docs/toolstack/features/index.html>Features</a><ul id=subsections-a202420b9d8f13c2d690377c4357de50 class="morespace collapsible-menu"><li data-nav-id=/new-docs/toolstack/features/DR/index.html><a class=padding href=/new-docs/toolstack/features/DR/index.html>Disaster Recovery</a></li><li data-nav-id=/new-docs/toolstack/features/events/index.html><a class=padding href=/new-docs/toolstack/features/events/index.html>Event handling</a></li><li data-nav-id=/new-docs/toolstack/features/HA/index.html><a class=padding href=/new-docs/toolstack/features/HA/index.html>High-Availability</a></li><li data-nav-id=/new-docs/toolstack/features/NUMA/index.html class=active><a class=padding href=/new-docs/toolstack/features/NUMA/index.html>NUMA</a></li><li data-nav-id=/new-docs/toolstack/features/snapshots/index.html><a class=padding href=/new-docs/toolstack/features/snapshots/index.html>Snapshots</a></li><li data-nav-id=/new-docs/toolstack/features/VGPU/index.html><a class=padding href=/new-docs/toolstack/features/VGPU/index.html>vGPU</a></li><li data-nav-id=/new-docs/toolstack/features/XSM/index.html><a class=padding href=/new-docs/toolstack/features/XSM/index.html>Xapi Storage Migration</a></li></ul></li></ul></li><li data-nav-id=/new-docs/xapi/index.html><input type=checkbox id=section-38d9a208f329bfd7f57b7a3d82b1b09a aria-controls=subsections-38d9a208f329bfd7f57b7a3d82b1b09a><label for=section-38d9a208f329bfd7f57b7a3d82b1b09a><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Xapi</span></label><a class=padding href=/new-docs/xapi/index.html>Xapi</a><ul id=subsections-38d9a208f329bfd7f57b7a3d82b1b09a class="morespace collapsible-menu"><li data-nav-id=/new-docs/xapi/guides/index.html><input type=checkbox id=section-1e852a9c61356e39c38ffde6aaccdadf aria-controls=subsections-1e852a9c61356e39c38ffde6aaccdadf><label for=section-1e852a9c61356e39c38ffde6aaccdadf><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Guides</span></label><a class=padding href=/new-docs/xapi/guides/index.html>Guides</a><ul id=subsections-1e852a9c61356e39c38ffde6aaccdadf class="morespace collapsible-menu"><li data-nav-id=/new-docs/xapi/guides/howtos/index.html><input type=checkbox id=section-259bbbeab1560e4f0d61ad99041ab23f aria-controls=subsections-259bbbeab1560e4f0d61ad99041ab23f><label for=section-259bbbeab1560e4f0d61ad99041ab23f><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu How to add....</span></label><a class=padding href=/new-docs/xapi/guides/howtos/index.html>How to add....</a><ul id=subsections-259bbbeab1560e4f0d61ad99041ab23f class="morespace collapsible-menu"><li data-nav-id=/new-docs/xapi/guides/howtos/add-class/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-class/index.html>Adding a Class to the API</a></li><li data-nav-id=/new-docs/xapi/guides/howtos/add-field/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-field/index.html>Adding a field to the API</a></li><li data-nav-id=/new-docs/xapi/guides/howtos/add-function/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-function/index.html>Adding a function to the API</a></li><li data-nav-id=/new-docs/xapi/guides/howtos/add-api-extension/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-api-extension/index.html>Adding a XenAPI extension</a></li></ul></li></ul></li><li data-nav-id=/new-docs/xapi/database/index.html><input type=checkbox id=section-378fe6bda61dabebb37cf2433db26b2f aria-controls=subsections-378fe6bda61dabebb37cf2433db26b2f><label for=section-378fe6bda61dabebb37cf2433db26b2f><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Database</span></label><a class=padding href=/new-docs/xapi/database/index.html>Database</a><ul id=subsections-378fe6bda61dabebb37cf2433db26b2f class="morespace collapsible-menu"><li data-nav-id=/new-docs/xapi/database/redo-log/index.html><a class=padding href=/new-docs/xapi/database/redo-log/index.html>Metadata-on-LUN</a></li></ul></li><li data-nav-id=/new-docs/xapi/memory/index.html><a class=padding href=/new-docs/xapi/memory/index.html>Memory</a></li><li data-nav-id=/new-docs/xapi/walkthroughs/index.html><input type=checkbox id=section-9c43a1a521e6b0d3839462550f0172af aria-controls=subsections-9c43a1a521e6b0d3839462550f0172af><label for=section-9c43a1a521e6b0d3839462550f0172af><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Walk-throughs</span></label><a class=padding href=/new-docs/xapi/walkthroughs/index.html>Walk-throughs</a><ul id=subsections-9c43a1a521e6b0d3839462550f0172af class="morespace collapsible-menu"><li data-nav-id=/new-docs/xapi/walkthroughs/migration_overview/index.html><a class=padding href=/new-docs/xapi/walkthroughs/migration_overview/index.html>How XAPI handles migration request</a></li></ul></li><li data-nav-id=/new-docs/xapi/storage/index.html><input type=checkbox id=section-6bab529a669346ed9d1815ed30e48c91 aria-controls=subsections-6bab529a669346ed9d1815ed30e48c91><label for=section-6bab529a669346ed9d1815ed30e48c91><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Storage</span></label><a class=padding href=/new-docs/xapi/storage/index.html>Storage</a><ul id=subsections-6bab529a669346ed9d1815ed30e48c91 class="morespace collapsible-menu"><li data-nav-id=/new-docs/xapi/storage/sxm/index.html><a class=padding href=/new-docs/xapi/storage/sxm/index.html>Storage migration</a></li></ul></li><li data-nav-id=/new-docs/xapi/cli/index.html><a class=padding href=/new-docs/xapi/cli/index.html>CLI</a></li></ul></li><li data-nav-id=/new-docs/xenopsd/index.html><input type=checkbox id=section-c72fd23679970685706f8c9f1bb2fa52 aria-controls=subsections-c72fd23679970685706f8c9f1bb2fa52><label for=section-c72fd23679970685706f8c9f1bb2fa52><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Xenopsd</span></label><a class=padding href=/new-docs/xenopsd/index.html>Xenopsd</a><ul id=subsections-c72fd23679970685706f8c9f1bb2fa52 class="morespace collapsible-menu"><li data-nav-id=/new-docs/xenopsd/architecture/index.html><a class=padding href=/new-docs/xenopsd/architecture/index.html>Architecture</a></li><li data-nav-id=/new-docs/xenopsd/design/index.html><input type=checkbox id=section-9b92b6e8232f75e147c3792adf755e68 aria-controls=subsections-9b92b6e8232f75e147c3792adf755e68><label for=section-9b92b6e8232f75e147c3792adf755e68><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Design</span></label><a class=padding href=/new-docs/xenopsd/design/index.html>Design</a><ul id=subsections-9b92b6e8232f75e147c3792adf755e68 class="morespace collapsible-menu"><li data-nav-id=/new-docs/xenopsd/design/Events/index.html><a class=padding href=/new-docs/xenopsd/design/Events/index.html>Events</a></li><li data-nav-id=/new-docs/xenopsd/design/hooks/index.html><a class=padding href=/new-docs/xenopsd/design/hooks/index.html>Hooks</a></li><li data-nav-id=/new-docs/xenopsd/design/pvs-proxy-ovs/index.html><a class=padding href=/new-docs/xenopsd/design/pvs-proxy-ovs/index.html>PVS Proxy OVS Rules</a></li><li data-nav-id=/new-docs/xenopsd/design/suspend-image-considerations/index.html><a class=padding href=/new-docs/xenopsd/design/suspend-image-considerations/index.html>Requirements for suspend image framing</a></li><li data-nav-id=/new-docs/xenopsd/design/suspend-image-framing-format/index.html><a class=padding href=/new-docs/xenopsd/design/suspend-image-framing-format/index.html>Suspend image framing format</a></li><li data-nav-id=/new-docs/xenopsd/design/Tasks/index.html><a class=padding href=/new-docs/xenopsd/design/Tasks/index.html>Tasks</a></li></ul></li><li data-nav-id=/new-docs/xenopsd/features/index.html><a class=padding href=/new-docs/xenopsd/features/index.html>Features</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/index.html><input type=checkbox id=section-523c4f88c9de72bf362da89f937681e6 aria-controls=subsections-523c4f88c9de72bf362da89f937681e6><label for=section-523c4f88c9de72bf362da89f937681e6><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Walk-throughs</span></label><a class=padding href=/new-docs/xenopsd/walkthroughs/index.html>Walk-throughs</a><ul id=subsections-523c4f88c9de72bf362da89f937681e6 class="morespace collapsible-menu"><li data-nav-id=/new-docs/xenopsd/walkthroughs/live-migration/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/live-migration/index.html>Live Migration</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.migrate/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.migrate/index.html>Walkthrough: Migrating a VM</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.start/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.start/index.html>Walkthrough: Starting a VM</a></li></ul></li></ul></li><li data-nav-id=/new-docs/xcp-networkd/index.html><a class=padding href=/new-docs/xcp-networkd/index.html>Networkd</a></li><li data-nav-id=/new-docs/squeezed/index.html><input type=checkbox id=section-1eeda4d753cc1773dfada70c3819a0a1 aria-controls=subsections-1eeda4d753cc1773dfada70c3819a0a1><label for=section-1eeda4d753cc1773dfada70c3819a0a1><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Squeezed</span></label><a class=padding href=/new-docs/squeezed/index.html>Squeezed</a><ul id=subsections-1eeda4d753cc1773dfada70c3819a0a1 class="morespace collapsible-menu"><li data-nav-id=/new-docs/squeezed/architecture/index.html><a class=padding href=/new-docs/squeezed/architecture/index.html>Architecture</a></li><li data-nav-id=/new-docs/squeezed/design/index.html><a class=padding href=/new-docs/squeezed/design/index.html>Design</a></li></ul></li><li data-nav-id=/new-docs/xapi-guard/index.html><a class=padding href=/new-docs/xapi-guard/index.html>Xapi-guard</a></li><li data-nav-id=/new-docs/xcp-rrdd/index.html><input type=checkbox id=section-54ab6488aa1c00b15a58b0c7ace94c5e aria-controls=subsections-54ab6488aa1c00b15a58b0c7ace94c5e><label for=section-54ab6488aa1c00b15a58b0c7ace94c5e><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu RRDD</span></label><a class=padding href=/new-docs/xcp-rrdd/index.html>RRDD</a><ul id=subsections-54ab6488aa1c00b15a58b0c7ace94c5e class="morespace collapsible-menu"><li data-nav-id=/new-docs/xcp-rrdd/futures/archival-redesign/index.html><a class=padding href=/new-docs/xcp-rrdd/futures/archival-redesign/index.html>RRDD archival redesign</a></li><li data-nav-id=/new-docs/xcp-rrdd/design/plugin-protocol-v2/index.html><a class=padding href=/new-docs/xcp-rrdd/design/plugin-protocol-v2/index.html>RRDD plugin protocol v2</a></li><li data-nav-id=/new-docs/xcp-rrdd/futures/sr-level-rrds/index.html><a class=padding href=/new-docs/xcp-rrdd/futures/sr-level-rrds/index.html>SR-Level RRDs</a></li></ul></li></ul></div><div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter"></div><div id=menu-footer><hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter"><div id=prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks"><ul><li id=select-language-container class=footerLangSwitch><div class="padding menu-control"><i class="fas fa-language fa-fw"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=select-language>Language</label>
<select id=select-language onchange="location=baseUri+this.value"></select></div><div class=clear></div></div></li><li id=select-variant-container class=footerVariantSwitch><div class="padding menu-control"><i class="fas fa-paint-brush fa-fw"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=select-variant>Theme</label>
<select id=select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=red value=red selected>Red</option></select></div><div class=clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class=footerVisitedLinks><div class="padding menu-control"><i class="fas fa-history fa-fw"></i>
<span>&nbsp;</span><div class=control-style><button onclick=clearHistory()>Clear History</button></div><div class=clear></div></div></li></ul></div><div id=footer class=footerFooter></div></div></div></aside><script src=/new-docs/js/clipboard.min.js?1709824875 defer></script>
<script src=/new-docs/js/perfect-scrollbar.min.js?1709824875 defer></script>
<script src=/new-docs/js/theme.js?1709824875 defer></script></body></html>