<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.127.0"><meta name=generator content="Relearn 7.3.2"><meta name=description content="Introduction Many parts of xapi are auto-generated during the build process. This article aims to document some of these modules and how they relate to each other. The intention of this article is to serve as a developer resource and, as such, its contents are prone to change (or become inaccurate) as the codebase evolves. The ultimate source of truth remains the codebase itself.
Interface Description All of XenAPIâ€™s data model is described within the ocaml/idl subdirectory."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Generated Parts of Xapi :: XAPI Toolstack Developer Documentation"><meta name=twitter:description content="Introduction Many parts of xapi are auto-generated during the build process. This article aims to document some of these modules and how they relate to each other. The intention of this article is to serve as a developer resource and, as such, its contents are prone to change (or become inaccurate) as the codebase evolves. The ultimate source of truth remains the codebase itself.
Interface Description All of XenAPIâ€™s data model is described within the ocaml/idl subdirectory."><meta property="og:url" content="https://xapi-project.github.io/new-docs/xapi/internals/generated/index.html"><meta property="og:site_name" content="XAPI Toolstack Developer Documentation"><meta property="og:title" content="Generated Parts of Xapi :: XAPI Toolstack Developer Documentation"><meta property="og:description" content="Introduction Many parts of xapi are auto-generated during the build process. This article aims to document some of these modules and how they relate to each other. The intention of this article is to serve as a developer resource and, as such, its contents are prone to change (or become inaccurate) as the codebase evolves. The ultimate source of truth remains the codebase itself.
Interface Description All of XenAPIâ€™s data model is described within the ocaml/idl subdirectory."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="Xapi"><meta itemprop=name content="Generated Parts of Xapi :: XAPI Toolstack Developer Documentation"><meta itemprop=description content="Introduction Many parts of xapi are auto-generated during the build process. This article aims to document some of these modules and how they relate to each other. The intention of this article is to serve as a developer resource and, as such, its contents are prone to change (or become inaccurate) as the codebase evolves. The ultimate source of truth remains the codebase itself.
Interface Description All of XenAPIâ€™s data model is described within the ocaml/idl subdirectory."><meta itemprop=wordCount content="3025"><title>Generated Parts of Xapi :: XAPI Toolstack Developer Documentation</title>
<link href=/new-docs/images/favicon.png?1741282401 rel=icon type=image/png><link href=/new-docs/css/fontawesome-all.min.css?1741282401 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/new-docs/css/fontawesome-all.min.css?1741282401 rel=stylesheet></noscript><link href=/new-docs/css/auto-complete.css?1741282401 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/new-docs/css/auto-complete.css?1741282401 rel=stylesheet></noscript><link href=/new-docs/css/perfect-scrollbar.min.css?1741282401 rel=stylesheet><link href=/new-docs/css/theme.min.css?1741282401 rel=stylesheet><link href=/new-docs/css/format-html.min.css?1741282401 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://xapi-project.github.io/new-docs",window.relearn.min=`.min`,window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.themevariants=["auto","zen-light","zen-dark","red","blue","green","learn","neon","relearn-light","relearn-bright","relearn-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}}))},window.relearn.markVariant=function(){var t=window.localStorage.getItem(window.relearn.absBaseUri+"/variant"),e=document.querySelector("#R-select-variant");e&&(e.value=t)},window.relearn.initVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant(),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link rel=stylesheet href=https://xapi-project.github.io/new-docs/css/misc.css></head><body class="mobile-support html" data-url=/new-docs/xapi/internals/generated/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#interface-description>Interface Description</a></li><li><a href=#api-types-apiml>API Types (<code>aPI.ml</code>)</a></li><li><a href=#database-actions-db_actionsml>Database Actions (<code>db_actions.ml</code>)</a><ul><li><a href=#registering-for-snapshots>Registering for Snapshots</a></li></ul></li><li><a href=#custom-actions-custom_actionsml>Custom Actions (<code>custom_actions.ml</code>)</a></li><li><a href=#server-serverml>Server (<code>server.ml</code>)</a><ul><li><a href=#the-top-level-dispatch_call-function>The top-level <code>dispatch_call</code> function</a></li><li><a href=#the-anatomy-of-a-handler>The Anatomy of a Handler</a></li><li><a href=#rbac-checking-and-auditing>RBAC Checking and Auditing</a></li><li><a href=#rbac-checking-of-keys>RBAC Checking of Keys</a></li><li><a href=#alternative-wire-names>Alternative Wire Names</a></li></ul></li><li><a href=#client-clientml>Client (<code>client.ml</code>)</a><ul><li><a href=#client-internals>Client Internals</a></li></ul></li><li><a href=#rbac_static>Rbac_static</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/new-docs/index.html><span itemprop=name>XAPI Toolstack Developer Guide</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/new-docs/xapi/index.html><span itemprop=name>Xapi</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/new-docs/xapi/internals/index.html><span itemprop=name>Internals</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Generated Parts of Xapi</span><meta itemprop=position content="4"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-edit" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=https://github.com/xapi-project/xen-api/edit/master/doc/content/xapi/internals/generated.md target=_blank title="Edit (CTRL+ALT+w)"><i class="fa-fw fas fa-pen"></i></a></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/new-docs/xapi/internals/certificates/index.html title="Certificates and PEM Files (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/new-docs/xapi/memory/index.html title="Host memory accounting (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable xapi" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=generated-parts-of-xapi>Generated Parts of Xapi</h1><h2 id=introduction>Introduction</h2><p>Many parts of <code>xapi</code> are auto-generated during the build process.
This article aims to document some of these modules and how they relate to each
other. The intention of this article is to serve as a developer resource and,
as such, its contents are prone to change (or become inaccurate) as the
codebase evolves. The ultimate source of truth remains the codebase itself.</p><h2 id=interface-description>Interface Description</h2><p>All of XenAPI&rsquo;s data model is described within the <code>ocaml/idl</code> subdirectory.
The data model itself describes the classes that make up the API.
The classes themselves comprise fields and messages (methods), relating
functionality together.</p><h2 id=api-types-apiml>API Types (<code>aPI.ml</code>)</h2><p>The internal representation of each object is a record whose type is specified
within the generated <code>API</code> module, as part of building <code>xapi-types</code>. For
example, the <code>task</code> object&rsquo;s structure is defined by the type <code>task_t</code>.
Similarly, <code>API</code> includes the internal type representation used to represent
fields. For example, a type such as <code>(string -> vdi_operations) map</code>, used by
the data model, is defined as <code>(string * vdi_operations) list</code> within <code>API</code>
(where <code>vdi_operations</code> itself is a polymorphic variant also defined by
<code>API</code>).</p><p>Note that the all the type definitions within <code>API</code> are annotated with
<code>[@@deriving rpc]</code>. This ensures that the final module, after preprocessing,
also contains functions to marshal each type to/from <code>Rpc.t</code> values (which is
important for <code>Server</code> - described later - which receives that format as
input).</p><h2 id=database-actions-db_actionsml>Database Actions (<code>db_actions.ml</code>)</h2><p>The majority of XenAPI consists of methods used to read and modify the fields
of objects in the database. These methods are automatically generated and
their implementations are placed within the generated <code>Db_actions</code> module.</p><p>The <code>Db_actions</code> module consists of various, related, parts: type definitions
for a subset of objects&rsquo; fields, marshallers for converting API types to/from
strings, and database action handlers. Briefly, the role of each of these is
described below:</p><ul><li><p>Type definitions for XenAPI objects are redefined in <code>Db_actions</code> in order to
exclude internal fields. If a field is marked as &ldquo;internal only&rdquo; within the
data model, then it should only exist within internal representations (those
defined by <code>API</code>, described above). For example, <code>task_t</code> (describing a
<code>task</code> object) - as described by <code>Db_actions</code> - notably omits the field
<code>task_session</code> (of type <code>session ref</code>) so as to not leak sensitive information
to clients (in this case, the reference to the session that created the task
object).</p></li><li><p>Fields of the database are internally stored as strings and must be
marshalled to typed values for use in OCaml code using DB actions. To this
end, submodules <code>String_to_DM</code> and <code>DM_to_String</code> are generated to include code
for doing these conversions. These submodules consist of the inverse
operations of the other. For example, for the data model type <code>Observer ref set</code>, the function <code>ref_Observer_set</code> exists in both <code>String_to_DM</code>
(as <code>string -> [`Observer] API.Ref.t list</code>) and
in <code>DM_to_String</code> (inversely, as <code>[`Observer] API.Ref.t list -> string</code>).</p></li><li><p>Handlers for actions that read/write fields of database objects are
implemented by <code>Db_actions</code>. Each handler uses the relevant marshallers to
marshal inputs and outputs. Note that <code>Db_actions</code> generates two variants of
<code>get_record</code> for each class: a normal <code>get_record</code> which returns the public
class representation as described by the types defined in <code>Db_actions</code>, and a
<code>get_record_internal</code>, which returns the full class representation (including
internal fields) as described by the <code>API</code> module.</p></li></ul><h3 id=registering-for-snapshots>Registering for Snapshots</h3><p>The <code>Db_actions</code> module also generates modules that register callbacks
for Xapi&rsquo;s event mechanisms. These modules are named in the format
<code>Class_init</code> and consist only of top-level code, evaluated for its
effect.</p><p>As each event must provide a snapshot of the related object, the event
mechanism must be able to read records from the database. To do this,
<code>Eventgen</code> exposes an API that <code>Db_actions</code> uses to register callbacks
(one for each type of object in the database).</p><p>For example, within <code>Db_actions</code>, there is a module <code>VM_init</code>,
consisting of:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ocaml data-lang=ocaml><span style=display:flex><span><span style=color:#66d9ef>module</span> <span style=color:#a6e22e>VM_init</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>struct</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#f92672>_</span>  <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>    Hashtbl.add Eventgen.get_record_table <span style=color:#e6db74>&#34;VM&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>(</span><span style=color:#66d9ef>fun</span> <span style=color:#f92672>~__</span>context <span style=color:#f92672>~</span>self <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>fun</span> () <span style=color:#f92672>-&gt;</span> API.rpc_of_vM_t <span style=color:#f92672>(</span>VM.get_record <span style=color:#f92672>~__</span>context <span style=color:#f92672>~</span>self<span style=color:#f92672>:(</span>Ref.of_string self<span style=color:#f92672>))))</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span></span></span></code></pre></div><p>As snapshots are served to external clients, the functions use the
public <code>get_record</code> functions - returning types defined by <code>API</code> -
which omits internal fields.</p><p>Notice that the type of values being mapped to is <code>__context:Context.t -> self:string -> unit -> Rpc.t</code>.</p><p>The presence of <code>unit</code> in the type is to permit partial application
(of <code>__context</code> and <code>self</code>) to create thunks. The type <code>unit -> Rpc.t</code>
is lossy, it says nothing about the context or object reference being
used to fetch the snapshot; these details are captured by the closure
arising from partial application. This means that code can arbitrarily
delay the fetching of a snapshot and then &ldquo;force&rdquo; it (on demand)
later. In practice, these snapshots are not delayed for long, see
<code>Eventgen</code> for more information.</p><h2 id=custom-actions-custom_actionsml>Custom Actions (<code>custom_actions.ml</code>)</h2><p>The API operations that require a custom implementation (i.e. are not
automatically generated) are grouped together into a signature called
<code>CUSTOM_ACTIONS</code> within <code>custom_actions.ml</code>.</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ocaml data-lang=ocaml><span style=display:flex><span><span style=color:#66d9ef>open</span> <span style=color:#a6e22e>API</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>module</span> <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>CUSTOM_ACTIONS</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>sig</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>module</span> <span style=color:#a6e22e>Session</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>sig</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>val</span> login_with_password <span style=color:#f92672>:</span> <span style=color:#f92672>__</span>context<span style=color:#f92672>:</span>Context.t <span style=color:#f92672>-&gt;</span> uname<span style=color:#f92672>:</span><span style=color:#66d9ef>string</span> <span style=color:#f92672>-&gt;</span> pwd<span style=color:#f92672>:</span><span style=color:#66d9ef>string</span> <span style=color:#f92672>-&gt;</span> version<span style=color:#f92672>:</span><span style=color:#66d9ef>string</span> <span style=color:#f92672>-&gt;</span> originator<span style=color:#f92672>:</span><span style=color:#66d9ef>string</span> <span style=color:#f92672>-&gt;</span> ref_session
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>val</span> logout <span style=color:#f92672>:</span> <span style=color:#f92672>__</span>context<span style=color:#f92672>:</span>Context.t <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>unit</span>
</span></span><span style=display:flex><span><span style=color:#75715e>(* ... *)</span></span></span></code></pre></div><p>The isolation of these methods into their own signature is important for
ensuring implementations exist for them.</p><p>The <code>Actions</code> submodule of <code>Api_server_common</code> can be ascribed
this signature. The purpose of the <code>Actions</code> sub-module is to group custom
implementations together whilst renaming them using module aliases. For
example, the custom implementations of messages associate with the <code>task</code> class
exist within <code>xapi_task.ml</code> - the module arising from this file is aliased,
within <code>Actions</code>, to rename it and satisfy the <code>CUSTOM_ACTIONS</code> signature (e.g.
<code>module Task = Xapi_task</code>).</p><p>The signature is not explicitly ascribed to <code>Actions</code> at its definition site,
but is used by functors which are parameterised by modules satisfying
<code>CUSTOM_ACTIONS</code>. The important modules of note are <code>Actions</code> itself (which
comprise the concrete implementations of custom messages in Xapi) and the
<code>Forwarder</code> sub-module (of <code>Api_server_common</code>) which uses the
<code>Message_forwarding.Forward</code> functor to potentially override (via shadowing)
the implementations of custom actions, in order to define policies around
forwarding (e.g. whether the coordinator should handle a custom action by
appealing to a subordinate host, usually via the <code>Client</code> module - described
later).</p><h2 id=server-serverml>Server (<code>server.ml</code>)</h2><p>The <code>Server</code> modules contains the logic to handle incoming calls from Xapi&rsquo;s
HTTP server. At the top level, it contains a functor (parameterised by <code>Local</code>
and <code>Forward</code> - both satisfying the <code>CUSTOM_ACTIONS</code> signature), that contains a
large pattern match on the name of the supplied message (e.g.
<code>Host.get_record</code>). Then, dependent on the semantics of the message itself, the
body of each handler differs in slight ways when doing dispatch.</p><h3 id=the-top-level-dispatch_call-function>The top-level <code>dispatch_call</code> function</h3><p>The top-level dispatch function, <code>dispatch_call</code>, has the following header:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ocaml data-lang=ocaml><span style=display:flex><span><span style=color:#66d9ef>let</span> dispatch_call <span style=color:#f92672>(</span>http_req<span style=color:#f92672>:</span> Http.Request.t<span style=color:#f92672>)</span> <span style=color:#f92672>(</span>fd<span style=color:#f92672>:</span> Unix.file_descr<span style=color:#f92672>)</span> <span style=color:#f92672>(</span>call<span style=color:#f92672>:</span> Rpc.call<span style=color:#f92672>)</span> <span style=color:#f92672>=</span></span></span></code></pre></div><p>The incoming HTTP request (<code>http_req</code>) and - related - socket&rsquo;s file descriptor
(<code>Unix.file_descr)</code> are forwarded - within handler code - to
<code>Server_helpers.do_dispatch</code>. The HTTP request is important because task and
tracing-related metadata can be propagated using fields within the request
header. The file descriptor can be used to determine the origin of the request
(whether it&rsquo;s local or not) but also can permit flexibility in upgrading
protocols (as is done in other parts of Xapi, such as the <code>/cli</code> handler, where
the connection starts off as HTTP but continues as something else).</p><h3 id=the-anatomy-of-a-handler>The Anatomy of a Handler</h3><p>A typical handler, within <code>dispatch_call</code>, looks like the following:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ocaml data-lang=ocaml><span style=display:flex><span>    <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;task.get_name_label&#34;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;task_get_name_label&#34;</span> <span style=color:#f92672>-&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>begin</span> <span style=color:#66d9ef>match</span> <span style=color:#f92672>__</span>params <span style=color:#66d9ef>with</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>|</span> <span style=color:#f92672>[</span>session_id_rpc<span style=color:#f92672>;</span> self_rpc<span style=color:#f92672>]</span> <span style=color:#f92672>-&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>(* has no side-effect; should be handled by DB action *)</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>(* has no asynchronous mode *)</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> session_id <span style=color:#f92672>=</span> ref_session_of_rpc session_id_rpc <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> self <span style=color:#f92672>=</span> ref_task_of_rpc self_rpc <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>            Session_check.check <span style=color:#f92672>~</span>intra_pool_only<span style=color:#f92672>:</span>false <span style=color:#f92672>~</span>session_id <span style=color:#f92672>~</span>action<span style=color:#f92672>:</span><span style=color:#e6db74>&#34;task.get_name_label&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> arg_names_values <span style=color:#f92672>=</span> <span style=color:#f92672>[(</span><span style=color:#e6db74>&#34;session_id&#34;</span><span style=color:#f92672>,</span> session_id_rpc<span style=color:#f92672>);</span> <span style=color:#f92672>(</span><span style=color:#e6db74>&#34;self&#34;</span><span style=color:#f92672>,</span> self_rpc<span style=color:#f92672>)]</span> <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> key_names <span style=color:#f92672>=</span> [] <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> rbac <span style=color:#f92672>__</span>context fn <span style=color:#f92672>=</span> Rbac.check session_id <span style=color:#f92672>__</span>call <span style=color:#f92672>~</span>args<span style=color:#f92672>:</span>arg_names_values <span style=color:#f92672>~</span>keys<span style=color:#f92672>:</span>key_names <span style=color:#f92672>~__</span>context <span style=color:#f92672>~</span>fn <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> marshaller <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>fun</span> x <span style=color:#f92672>-&gt;</span> rpc_of_string x<span style=color:#f92672>)</span> <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> local_op <span style=color:#f92672>=</span> <span style=color:#66d9ef>fun</span> <span style=color:#f92672>~__</span>context <span style=color:#f92672>-&gt;(</span>rbac <span style=color:#f92672>__</span>context <span style=color:#f92672>(</span><span style=color:#66d9ef>fun</span>()<span style=color:#f92672>-&gt;(</span>Db_actions.DB_Action.Task.get_name_label <span style=color:#f92672>~__</span>context<span style=color:#f92672>:(</span>Context.check_for_foreign_database <span style=color:#f92672>~__</span>context<span style=color:#f92672>)</span>  <span style=color:#f92672>~</span>self<span style=color:#f92672>)))</span> <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> supports_async <span style=color:#f92672>=</span> false <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> generate_task_for <span style=color:#f92672>=</span> false <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>            ApiLogRead.debug <span style=color:#e6db74>&#34;task.get_name_label&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> resp <span style=color:#f92672>=</span> Server_helpers.do_dispatch <span style=color:#f92672>~</span>session_id  supports_async <span style=color:#f92672>__</span>call local_op marshaller fd http_req <span style=color:#f92672>__</span>label <span style=color:#f92672>__</span>sync_ty generate_task_for <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>            resp
</span></span><span style=display:flex><span>        <span style=color:#f92672>|</span> <span style=color:#f92672>_</span> <span style=color:#f92672>-&gt;</span>
</span></span><span style=display:flex><span>            Server_helpers.parameter_count_mismatch_failure <span style=color:#f92672>__</span>call <span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#f92672>(</span>string_of_int <span style=color:#f92672>((</span>List.length <span style=color:#f92672>__</span>params<span style=color:#f92672>)</span> <span style=color:#f92672>-</span> 1<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span></span></span></code></pre></div><p>The start of each handler contains calls to unmarshal arguments from their
<code>Rpc.t</code> representation to that defined by the <code>API</code> module. These functions are
automatically generated during preprocessing of the <code>aPI.ml</code> file (<code>API</code>
modules from <code>xapi-types</code>, described above). The conversion from the incoming
XML-RPC (or JSON-RPC) to the <code>Rpc.t</code> encoding is handled by <code>Api_server</code> before
it calls <code>dispatch_call</code>.</p><p>In the example above, the &ldquo;local&rdquo; operation (<code>local_op</code>) uses handlers
generated within <code>Db_actions</code> (described above). This is typical of handlers
for DB-related actions (the most common type of action): they have no
forwarding logic (thus, no entry in the <code>CUSTOM_ACTIONS</code> signature) as they can
only be carried out on the coordinator host (which maintains the database). If
a subordinate host wishes to change the database, it must use a custom endpoint
and protocol (not described here).</p><hr><p>To see more about how the <code>CUSTOM_ACTIONS</code> signature is used in practice, you
can look at the &ldquo;local&rdquo; and &ldquo;forward&rdquo; operations for a message with custom
handling. For example, in <code>Pool_patch.apply</code>:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ocaml data-lang=ocaml><span style=display:flex><span><span style=color:#75715e>(* ... *)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> local_op <span style=color:#f92672>=</span> <span style=color:#66d9ef>fun</span> <span style=color:#f92672>~__</span>context <span style=color:#f92672>-&gt;(</span>rbac <span style=color:#f92672>__</span>context <span style=color:#f92672>(</span><span style=color:#66d9ef>fun</span>()<span style=color:#f92672>-&gt;(</span>Custom.Pool_patch.apply <span style=color:#f92672>~__</span>context<span style=color:#f92672>:(</span>Context.check_for_foreign_database <span style=color:#f92672>~__</span>context<span style=color:#f92672>)</span>  <span style=color:#f92672>~</span>self <span style=color:#f92672>~</span>host<span style=color:#f92672>)))</span> <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span><span style=color:#75715e>(* ...  *)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> forward_op <span style=color:#f92672>=</span> <span style=color:#66d9ef>fun</span> <span style=color:#f92672>~</span>local_fn <span style=color:#f92672>~__</span>context <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>(</span>rbac <span style=color:#f92672>__</span>context <span style=color:#f92672>(</span><span style=color:#66d9ef>fun</span>()<span style=color:#f92672>-&gt;</span> <span style=color:#f92672>(</span>Forward.Pool_patch.apply <span style=color:#f92672>~__</span>context<span style=color:#f92672>:(</span>Context.check_for_foreign_database <span style=color:#f92672>~__</span>context<span style=color:#f92672>)</span>  <span style=color:#f92672>~</span>self <span style=color:#f92672>~</span>host<span style=color:#f92672>)</span> <span style=color:#f92672>))</span> <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span><span style=color:#75715e>(* ...  *)</span></span></span></code></pre></div><p>As mentioned above, the <code>Custom</code> and <code>Forward</code> modules are both inputs
to <code>Server</code>&rsquo;s <code>Make</code> functor. The difference lies in how they are
instantiated: <code>Api_server</code> ensures that <code>Custom</code> is referring to local
implementations (such as that arising from modules defined by files
named <code>xapi_*.ml</code>) and <code>Forward</code> is referring to the module derived by
<code>Message_forwarding</code> (but shadowed with implementations that may apply
different handling to the call).</p><h3 id=rbac-checking-and-auditing>RBAC Checking and Auditing</h3><p>In order to implement RBAC (Role Based Access Control) checking for individual
messages, each handler contains logic that wraps an action (as a callback)
within code that calls into the <code>Rbac</code> module (specifically, the <code>Rbac.check</code>
function).</p><p>In the typical case, <code>Rbac.check</code> compares the name of a call against the list
of RBAC permissions granted to the role associated with the originator&rsquo;s
session/context. There is more involved logic for key-related RBAC checks
(explained later).</p><p>For an accessible listing of each (static) RBAC permission, Xapi auto-generates
a CSV file containing this information in a tabular format (within
<code>rbac_static.csv</code>). The information in that file is consistent with the
auto-generated <code>Rbac_static</code> module described in this document.</p><p>Along with providing authorisation checking, the <code>Rbac.check</code> function also
appends to an audit log which contains a (sanitised) list of actions (alongside
their RBAC check outcome).</p><h3 id=rbac-checking-of-keys>RBAC Checking of Keys</h3><p>In auto-generated handlers for <code>add_to</code> and <code>remove_from</code> messages (e.g.
<code>pool.add_to_other_config</code>), the RBAC check may cite a list of key
descriptors. For example:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ocaml data-lang=ocaml><span style=display:flex><span><span style=color:#75715e>(* pool.add_to_other_config ...  *)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> arg_names_values <span style=color:#f92672>=</span> <span style=color:#f92672>[(</span><span style=color:#e6db74>&#34;session_id&#34;</span><span style=color:#f92672>,</span> session_id_rpc<span style=color:#f92672>);</span> <span style=color:#f92672>(</span><span style=color:#e6db74>&#34;self&#34;</span><span style=color:#f92672>,</span> self_rpc<span style=color:#f92672>);</span> <span style=color:#f92672>(</span><span style=color:#e6db74>&#34;key&#34;</span><span style=color:#f92672>,</span> key_rpc<span style=color:#f92672>);</span> <span style=color:#f92672>(</span><span style=color:#e6db74>&#34;value&#34;</span><span style=color:#f92672>,</span> value_rpc<span style=color:#f92672>)]</span> <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> key_names <span style=color:#f92672>=</span> <span style=color:#f92672>[</span><span style=color:#e6db74>&#34;folder&#34;</span><span style=color:#f92672>;</span> <span style=color:#e6db74>&#34;XenCenter.CustomFields.*&#34;</span><span style=color:#f92672>;</span> <span style=color:#e6db74>&#34;EMPTY_FOLDERS&#34;</span><span style=color:#f92672>]</span> <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> rbac <span style=color:#f92672>__</span>context fn <span style=color:#f92672>=</span> Rbac.check session_id <span style=color:#f92672>__</span>call <span style=color:#f92672>~</span>args<span style=color:#f92672>:</span>arg_names_values <span style=color:#f92672>~</span>keys<span style=color:#f92672>:</span>key_names <span style=color:#f92672>~__</span>context <span style=color:#f92672>~</span>fn <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span><span style=color:#75715e>(* ... *)</span></span></span></code></pre></div><p>These keys are specified within the data model as being tied to specific roles,
in order to apply role-based exclusions to specific keys. The usual situation
is that the setter for such a <code>(string -> string) map</code> field (e.g.
<code>pool.set_other_config</code>) requires a more privileged role than the roles
specified for individual keys.</p><p>The mechanism that enforces this check is somewhat brittle at present: the
<code>Rbac.check</code> function is provided the list of key descriptors and the
(association) list of (unmarshalled) arguments. If the key descriptor list is
non-empty, it will consult the argument listing for the cited key (i.e. the key
name mapped to by &ldquo;key&rdquo; in the argument listing) and then attempt to match that
against a descriptor. If there is a match, it will check the current session
against the list of RBAC permissions. The key-related RBAC permissions are
encoded in the format <code>action/key:key</code> (all lowercase) - for example,
<code>pool.add_to_other_config/key:xencenter.customfields.*</code>.</p><h3 id=alternative-wire-names>Alternative Wire Names</h3><p>In order to support languages that have keywords that collide with message
names within Xapi, an alternative wire format is also cased upon within
<code>dispatch_call</code>.</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ocaml data-lang=ocaml><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;task.get_name_label&#34;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;task_get_name_label&#34;</span> <span style=color:#f92672>-&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>(* ... *)</span></span></span></code></pre></div><p>For example, Python uses the keyword <code>from</code> to handle imports and, so, an API
call (using <code>xmlrpc.client</code>) - rendered as <code>event.from</code> - is a syntactic error.
To get around this, the API permits an underscore to be substituted in place of
the period (<code>.</code>) that separates the class name from the message name (e.g.
<code>event_from</code>).</p><p>This apparent duplication of cases does not amount to a concrete duplication of
matching code within the compiled module (due to how OCaml special cases the
compilation of pattern matching over constant strings). However, in future, we
could avoid casing on both of them by normalising the name of the incoming call
(i.e. transform <code>event.from</code> to <code>event_from</code> prior to matching).</p><h2 id=client-clientml>Client (<code>client.ml</code>)</h2><p>The <code>Client</code> module serves as the main module of the <code>xapi-client</code> library. The
primary consumer of this library is Xapi itself, for use when a host may call
into another host (or itself).</p><p>For example, when defining a message forwarding policy, the implementation of a
handler may use the <code>Client</code> module to invoke a function on another host. For
instance, the message forwarding of <code>Pool_patch.apply</code> (from
<code>xapi/message_forwarding.ml</code>):</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ocaml data-lang=ocaml><span style=display:flex><span><span style=color:#66d9ef>let</span> apply <span style=color:#f92672>~__</span>context <span style=color:#f92672>~</span>self <span style=color:#f92672>~</span>host <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>  info <span style=color:#e6db74>&#34;Pool_patch.apply: pool patch = &#39;%s&#39;; host = &#39;%s&#39;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>(</span>pool_patch_uuid <span style=color:#f92672>~__</span>context self<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>(</span>host_uuid <span style=color:#f92672>~__</span>context host<span style=color:#f92672>)</span> <span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> local_fn <span style=color:#f92672>=</span> Local.Pool_patch.apply <span style=color:#f92672>~</span>self <span style=color:#f92672>~</span>host <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>  do_op_on <span style=color:#f92672>~</span>local_fn <span style=color:#f92672>~__</span>context <span style=color:#f92672>~</span>host <span style=color:#f92672>(</span><span style=color:#66d9ef>fun</span> session_id rpc <span style=color:#f92672>-&gt;</span>
</span></span><span style=display:flex><span>    Client.Pool_patch.apply <span style=color:#f92672>~</span>rpc <span style=color:#f92672>~</span>session_id <span style=color:#f92672>~</span>self <span style=color:#f92672>~</span>host
</span></span><span style=display:flex><span>  <span style=color:#f92672>)</span></span></span></code></pre></div><p>The <code>do_op_on</code> machinery provides the <code>rpc</code> transport (<code>Rpc.call -> Rpc.response</code>) to the callback which passes it to <code>Client</code>&rsquo;s implementation
(which just performs the relevant marshalling). The RPC transport itself is
XML-RPC over HTTP (as implemented by the internal <code>http-lib</code> library -
<code>ocaml/libs/http-lib</code>).</p><h3 id=client-internals>Client Internals</h3><p>Internally, the <code>Client</code> module contains a few functors. The top-level functor,
<code>ClientF</code> is parameterised by a signature describing an arbitrary monad. The
intention is to permit users to instantiate clients defined in terms of an RPC
transport that may be asynchronous (for example, within the context of a
program using <code>Lwt</code> or <code>Async</code> for its networking).</p><p>There is also a sub-functor <code>AsyncF</code> (within <code>ClientF</code>) that is parameterised
by a module that provides a qualifier string to be prepended to calls&rsquo; method
names. A few messages in Xapi can be qualified with async qualifiers (in
particular, <code>Async</code> and <code>InternalAsync</code>). The <code>AsyncF</code> functor provides
handling of those calls and is used to define the sub-modules (within
<code>ClientF</code>) <code>Async</code> and <code>InternalAsync</code>. (the former prepending <code>Async</code> and the
latter further prepending <code>Internal</code>). Code at the top-level of <code>Server</code>&rsquo;s
<code>dispatch_call</code> function is used to parse (and remove) this async qualifier
from the provided message name.</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ocaml data-lang=ocaml><span style=display:flex><span><span style=color:#66d9ef>module</span> <span style=color:#a6e22e>ClientF</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>functor</span><span style=color:#f92672>(</span><span style=color:#a6e22e>X</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>IO</span><span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span><span style=color:#66d9ef>struct</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>(* ... *)</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>module</span> <span style=color:#a6e22e>AsyncF</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>functor</span><span style=color:#f92672>(</span><span style=color:#a6e22e>AQ</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>AsyncQualifier</span><span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span><span style=color:#66d9ef>struct</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>(* handling of messages with asynchronous modes *)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>module</span> <span style=color:#a6e22e>Session</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>struct</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> create_from_db_file <span style=color:#f92672>~</span>rpc <span style=color:#f92672>~</span>session_id <span style=color:#f92672>~</span>filename <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> session_id <span style=color:#f92672>=</span> rpc_of_ref_session session_id <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> filename <span style=color:#f92672>=</span> rpc_of_string filename <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>        rpc_wrapper rpc <span style=color:#f92672>(</span>Printf.sprintf <span style=color:#e6db74>&#34;%sAsync.session.create_from_db_file&#34;</span> AQ.async_qualifier<span style=color:#f92672>)</span> <span style=color:#f92672>[</span> session_id<span style=color:#f92672>;</span> filename <span style=color:#f92672>]</span> <span style=color:#f92672>&gt;&gt;=</span> <span style=color:#66d9ef>fun</span> x <span style=color:#f92672>-&gt;</span> return <span style=color:#f92672>(</span>ref_task_of_rpc  x<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>(* ... *)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>(* ...  *)</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>(* handling of messages with synchronous modes; similar to above, but without prefixing of &#34;Async&#34; *)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>module</span> <span style=color:#a6e22e>Async</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>AsyncF</span><span style=color:#f92672>(</span><span style=color:#66d9ef>struct</span> <span style=color:#66d9ef>let</span> async_qualifier <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#66d9ef>end</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>module</span> <span style=color:#a6e22e>InternalAsync</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>AsyncF</span><span style=color:#f92672>(</span><span style=color:#66d9ef>struct</span> <span style=color:#66d9ef>let</span> async_qualifier <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Internal&#34;</span> <span style=color:#66d9ef>end</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>(* instantiate Client with the identity monad *)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>module</span> <span style=color:#a6e22e>Client</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ClientF</span><span style=color:#f92672>(</span><span style=color:#a6e22e>Id</span><span style=color:#f92672>)</span></span></span></code></pre></div><p>The usual <code>Client</code> module used by users of <code>xapi-client</code> is the <code>Client</code>
sub-module, defined in terms of the identity monad (which simply applies the
given continuation as its sequencing logic and performs no wrapping):</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ocaml data-lang=ocaml><span style=display:flex><span><span style=color:#66d9ef>module</span> <span style=color:#a6e22e>Id</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>struct</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>type</span> <span style=color:#66d9ef>&#39;</span>a t <span style=color:#f92672>=</span> <span style=color:#66d9ef>&#39;</span>a
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> bind x f <span style=color:#f92672>=</span> f x 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> return x <span style=color:#f92672>=</span> x
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>module</span> <span style=color:#a6e22e>Client</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ClientF</span><span style=color:#f92672>(</span><span style=color:#a6e22e>Id</span><span style=color:#f92672>)</span></span></span></code></pre></div><p>This results in synchronous semantics, whereby any code within <code>Xapi</code> that uses
it would block as it waits for a response via the RPC transport. This is not an
issue in practice, as each call is given its own thread during the dispatch logic.</p><p>Note that the RPC transport itself is defined in terms of the provided monad.
In the identity case, it&rsquo;s a simple alias, and so the type of <code>rpc</code> is rendered
<code>Rpc.call -> Rpc.response</code>. However, if you were to provide a monad defined,
for example, in terms of <code>Lwt.t</code> (i.e. <code>type 'a t = 'a Lwt.t</code>), the expected
type of the transport would reflect that: <code>Rpc.call -> Rpc.response Lwt.t</code>.</p><h2 id=rbac_static>Rbac_static</h2><p>The data model assigns specific roles to messages and fields. In order
to permit RBAC (Role Based Access Control) checking for the related
actions, Xapi must be able to determine the required role(s) for a
given action. To this end, <code>Rbac_static</code> is generated to contain
entries that encode this information.</p><p>The format of the entries in <code>Rbac_static</code> is rather peculiar. For
example, for the action <code>Pool_patch.apply</code>, we find
<code>permission_pool_patch_apply</code> defined at the top-level:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ocaml data-lang=ocaml><span style=display:flex><span><span style=color:#66d9ef>let</span> permission_pool_patch_apply <span style=color:#f92672>=</span> 
</span></span><span style=display:flex><span>  <span style=color:#f92672>{</span> <span style=color:#75715e>(* 311/2196 *)</span>
</span></span><span style=display:flex><span>  role_uuid <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;d4385002-b920-5412-4c57-b010f451fa81&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  role_name_label <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;pool_patch.apply&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  role_name_description <span style=color:#f92672>=</span> permission_description<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  role_subroles <span style=color:#f92672>=</span> []<span style=color:#f92672>;</span> <span style=color:#75715e>(* permission cannot have any subroles *)</span>
</span></span><span style=display:flex><span>  role_is_internal <span style=color:#f92672>=</span> true<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span></span></span></code></pre></div><p>This record is of type <code>role_t</code> (as defined by <code>Db_actions</code>). This
record is later incorporated into role-specific lists of permissions
(for each statically known role).</p><p>The reason that <code>Rbac_static</code> defines permissions in a format defined
by <code>Db_actions</code> is because, to avoid flooding the database with
thousands of entries, <code>Rbac_static</code> acts as its own database. In
<code>Xapi_role</code>, functions are defined that mirror the functionality of
functions within <code>Db_actions</code> (e.g. <code>get_by_uuid</code>).</p><p>The <code>get_by_uuid</code> function (within <code>Xapi_role</code>) illustrates the bypassing of the database clearly:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ocaml data-lang=ocaml><span style=display:flex><span><span style=color:#66d9ef>let</span> get_by_uuid <span style=color:#f92672>~__</span>context <span style=color:#f92672>~</span>uuid <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>match</span> find_role_by_uuid uuid <span style=color:#66d9ef>with</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>|</span> <span style=color:#a6e22e>Some</span> static_record <span style=color:#f92672>-&gt;</span>
</span></span><span style=display:flex><span>      ref_of_role <span style=color:#f92672>~</span>role<span style=color:#f92672>:</span>static_record
</span></span><span style=display:flex><span>  <span style=color:#f92672>|</span> <span style=color:#a6e22e>None</span> <span style=color:#f92672>-&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>(* pass-through to Db *)</span>
</span></span><span style=display:flex><span>      Db.Role.get_by_uuid <span style=color:#f92672>~__</span>context <span style=color:#f92672>~</span>uuid</span></span></code></pre></div><p>If a role can be found (by UUID) statically (within <code>Rbac_static</code>),
then that is used. Otherwise, the database is queried. Using the
database as a fallback is important because there is still a dynamic
component to the RBAC checking in Xapi: users can define their own
roles that incorporate other roles as sub-roles - it&rsquo;s just that
the statically-known roles won&rsquo;t be stored in the database. Precluding
static roles from the database helps to avoid making the database
larger and prevents users from deleting static roles from the
database.</p><script>for(let e of document.querySelectorAll(".inline-type"))e.innerHTML=renderType(e.innerHTML)</script><footer class=footline></footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><img src=https://xapi-project.github.io/new-docs//images/xapi-project.png></div><script>window.index_js_url="/new-docs/searchindex.en.js?1741282401"</script><search><form action=/new-docs/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search><script>var contentLangs=["en"]</script><script src=/new-docs/js/auto-complete.js?1741282401 defer></script><script src=/new-docs/js/lunr/lunr.min.js?1741282401 defer></script><script src=/new-docs/js/lunr/lunr.stemmer.support.min.js?1741282401 defer></script><script src=/new-docs/js/lunr/lunr.multi.min.js?1741282401 defer></script><script src=/new-docs/js/lunr/lunr.en.min.js?1741282401 defer></script><script src=/new-docs/js/search.js?1741282401 defer></script></div><div id=R-homelinks class="default-animation homelinks"><ul><li><a class=padding href=/new-docs/index.html><i class="fa-fw fas fa-home"></i> Home</a></li></ul><hr class=padding></div><div id=R-content-wrapper class=highlightable><div id=R-shortcutmenu-home class=R-sidebarmenu><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/new-docs/toolstack/index.html><input type=checkbox id=R-section-cdb5571004e49cdb09f50d87f536567a aria-controls=R-subsections-cdb5571004e49cdb09f50d87f536567a><label for=R-section-cdb5571004e49cdb09f50d87f536567a><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu The Toolstack</span></label><a class=padding href=/new-docs/toolstack/index.html>The Toolstack</a><ul id=R-subsections-cdb5571004e49cdb09f50d87f536567a class=collapsible-menu><li data-nav-id=/new-docs/toolstack/responsibilities/index.html><a class=padding href=/new-docs/toolstack/responsibilities/index.html>Responsibilities</a></li><li data-nav-id=/new-docs/toolstack/high-level/index.html><input type=checkbox id=R-section-dde4854617c1f5d00e4646f449a8ec77 aria-controls=R-subsections-dde4854617c1f5d00e4646f449a8ec77><label for=R-section-dde4854617c1f5d00e4646f449a8ec77><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu High-level architecture</span></label><a class=padding href=/new-docs/toolstack/high-level/index.html>High-level architecture</a><ul id=R-subsections-dde4854617c1f5d00e4646f449a8ec77 class=collapsible-menu><li data-nav-id=/new-docs/toolstack/high-level/environment/index.html><a class=padding href=/new-docs/toolstack/high-level/environment/index.html>Environment</a></li><li data-nav-id=/new-docs/toolstack/high-level/daemons/index.html><a class=padding href=/new-docs/toolstack/high-level/daemons/index.html>Daemons</a></li><li data-nav-id=/new-docs/toolstack/high-level/interfaces/index.html><a class=padding href=/new-docs/toolstack/high-level/interfaces/index.html>Interfaces</a></li></ul></li><li data-nav-id=/new-docs/toolstack/features/index.html><input type=checkbox id=R-section-5d4df6b6fbc8d5af47c300ab507cc521 aria-controls=R-subsections-5d4df6b6fbc8d5af47c300ab507cc521><label for=R-section-5d4df6b6fbc8d5af47c300ab507cc521><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Features</span></label><a class=padding href=/new-docs/toolstack/features/index.html>Features</a><ul id=R-subsections-5d4df6b6fbc8d5af47c300ab507cc521 class=collapsible-menu><li data-nav-id=/new-docs/toolstack/features/DR/index.html><a class=padding href=/new-docs/toolstack/features/DR/index.html>Disaster Recovery</a></li><li data-nav-id=/new-docs/toolstack/features/events/index.html><a class=padding href=/new-docs/toolstack/features/events/index.html>Event handling</a></li><li data-nav-id=/new-docs/toolstack/features/HA/index.html><a class=padding href=/new-docs/toolstack/features/HA/index.html>High-Availability</a></li><li data-nav-id=/new-docs/toolstack/features/MVD/index.html><a class=padding href=/new-docs/toolstack/features/MVD/index.html>Multi-version drivers</a></li><li data-nav-id=/new-docs/toolstack/features/NUMA/index.html><a class=padding href=/new-docs/toolstack/features/NUMA/index.html>NUMA</a></li><li data-nav-id=/new-docs/toolstack/features/snapshots/index.html><a class=padding href=/new-docs/toolstack/features/snapshots/index.html>Snapshots</a></li><li data-nav-id=/new-docs/toolstack/features/VGPU/index.html><a class=padding href=/new-docs/toolstack/features/VGPU/index.html>vGPU</a></li><li data-nav-id=/new-docs/toolstack/features/XSM/index.html><a class=padding href=/new-docs/toolstack/features/XSM/index.html>Xapi Storage Migration</a></li></ul></li></ul></li><li class=parent data-nav-id=/new-docs/xapi/index.html><input type=checkbox id=R-section-67e12bf3d95935fbf56dca0e788c11f2 aria-controls=R-subsections-67e12bf3d95935fbf56dca0e788c11f2 checked><label for=R-section-67e12bf3d95935fbf56dca0e788c11f2><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Xapi</span></label><a class=padding href=/new-docs/xapi/index.html>Xapi</a><ul id=R-subsections-67e12bf3d95935fbf56dca0e788c11f2 class=collapsible-menu><li data-nav-id=/new-docs/xapi/guides/index.html><input type=checkbox id=R-section-cf20b1aa06d1cc447ea310de2b605d51 aria-controls=R-subsections-cf20b1aa06d1cc447ea310de2b605d51><label for=R-section-cf20b1aa06d1cc447ea310de2b605d51><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Guides</span></label><a class=padding href=/new-docs/xapi/guides/index.html>Guides</a><ul id=R-subsections-cf20b1aa06d1cc447ea310de2b605d51 class=collapsible-menu><li data-nav-id=/new-docs/xapi/guides/howtos/index.html><input type=checkbox id=R-section-3ffc2fd44b0a843a38dd54cb698aadf0 aria-controls=R-subsections-3ffc2fd44b0a843a38dd54cb698aadf0><label for=R-section-3ffc2fd44b0a843a38dd54cb698aadf0><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu How to add....</span></label><a class=padding href=/new-docs/xapi/guides/howtos/index.html>How to add....</a><ul id=R-subsections-3ffc2fd44b0a843a38dd54cb698aadf0 class=collapsible-menu><li data-nav-id=/new-docs/xapi/guides/howtos/add-class/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-class/index.html>Adding a Class to the API</a></li><li data-nav-id=/new-docs/xapi/guides/howtos/add-field/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-field/index.html>Adding a field to the API</a></li><li data-nav-id=/new-docs/xapi/guides/howtos/add-function/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-function/index.html>Adding a function to the API</a></li><li data-nav-id=/new-docs/xapi/guides/howtos/add-api-extension/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-api-extension/index.html>Adding a XenAPI extension</a></li></ul></li></ul></li><li data-nav-id=/new-docs/xapi/cli/index.html><a class=padding href=/new-docs/xapi/cli/index.html>CLI</a></li><li data-nav-id=/new-docs/xapi/database/index.html><input type=checkbox id=R-section-44b9d28660dda49c2b7949290a3e1b89 aria-controls=R-subsections-44b9d28660dda49c2b7949290a3e1b89><label for=R-section-44b9d28660dda49c2b7949290a3e1b89><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Database</span></label><a class=padding href=/new-docs/xapi/database/index.html>Database</a><ul id=R-subsections-44b9d28660dda49c2b7949290a3e1b89 class=collapsible-menu><li data-nav-id=/new-docs/xapi/database/redo-log/index.html><a class=padding href=/new-docs/xapi/database/redo-log/index.html>Metadata-on-LUN</a></li></ul></li><li class=parent data-nav-id=/new-docs/xapi/internals/index.html><input type=checkbox id=R-section-e47da3b3a01078022dd7e240a34b6bc4 aria-controls=R-subsections-e47da3b3a01078022dd7e240a34b6bc4 checked><label for=R-section-e47da3b3a01078022dd7e240a34b6bc4><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Internals</span></label><a class=padding href=/new-docs/xapi/internals/index.html>Internals</a><ul id=R-subsections-e47da3b3a01078022dd7e240a34b6bc4 class=collapsible-menu><li data-nav-id=/new-docs/xapi/internals/certificates/index.html><a class=padding href=/new-docs/xapi/internals/certificates/index.html>Certificates and PEM Files</a></li><li class=active data-nav-id=/new-docs/xapi/internals/generated/index.html><a class=padding href=/new-docs/xapi/internals/generated/index.html>Generated Parts of Xapi</a></li></ul></li><li data-nav-id=/new-docs/xapi/memory/index.html><a class=padding href=/new-docs/xapi/memory/index.html>Memory</a></li><li data-nav-id=/new-docs/xapi/storage/index.html><input type=checkbox id=R-section-d5e50434ccd4672b573b8b9cfa1e675a aria-controls=R-subsections-d5e50434ccd4672b573b8b9cfa1e675a><label for=R-section-d5e50434ccd4672b573b8b9cfa1e675a><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Storage</span></label><a class=padding href=/new-docs/xapi/storage/index.html>Storage</a><ul id=R-subsections-d5e50434ccd4672b573b8b9cfa1e675a class=collapsible-menu><li data-nav-id=/new-docs/xapi/storage/sxm/index.html><a class=padding href=/new-docs/xapi/storage/sxm/index.html>Storage migration</a></li></ul></li><li data-nav-id=/new-docs/xapi/walkthroughs/index.html><input type=checkbox id=R-section-ae42e6008c3827e3783a76feed214d3a aria-controls=R-subsections-ae42e6008c3827e3783a76feed214d3a><label for=R-section-ae42e6008c3827e3783a76feed214d3a><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Walk-throughs</span></label><a class=padding href=/new-docs/xapi/walkthroughs/index.html>Walk-throughs</a><ul id=R-subsections-ae42e6008c3827e3783a76feed214d3a class=collapsible-menu><li data-nav-id=/new-docs/xapi/walkthroughs/migration_overview/index.html><a class=padding href=/new-docs/xapi/walkthroughs/migration_overview/index.html>How XAPI handles migration request</a></li></ul></li></ul></li><li data-nav-id=/new-docs/xenopsd/index.html><input type=checkbox id=R-section-eaf872be43aeecdfeb5e6f8d151be1a6 aria-controls=R-subsections-eaf872be43aeecdfeb5e6f8d151be1a6><label for=R-section-eaf872be43aeecdfeb5e6f8d151be1a6><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Xenopsd</span></label><a class=padding href=/new-docs/xenopsd/index.html>Xenopsd</a><ul id=R-subsections-eaf872be43aeecdfeb5e6f8d151be1a6 class=collapsible-menu><li data-nav-id=/new-docs/xenopsd/architecture/index.html><a class=padding href=/new-docs/xenopsd/architecture/index.html>Architecture</a></li><li data-nav-id=/new-docs/xenopsd/design/index.html><input type=checkbox id=R-section-c4ba0778266b15d8b43f3f7369b55454 aria-controls=R-subsections-c4ba0778266b15d8b43f3f7369b55454><label for=R-section-c4ba0778266b15d8b43f3f7369b55454><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Design</span></label><a class=padding href=/new-docs/xenopsd/design/index.html>Design</a><ul id=R-subsections-c4ba0778266b15d8b43f3f7369b55454 class=collapsible-menu><li data-nav-id=/new-docs/xenopsd/design/Events/index.html><a class=padding href=/new-docs/xenopsd/design/Events/index.html>Events</a></li><li data-nav-id=/new-docs/xenopsd/design/hooks/index.html><a class=padding href=/new-docs/xenopsd/design/hooks/index.html>Hooks</a></li><li data-nav-id=/new-docs/xenopsd/design/pvs-proxy-ovs/index.html><a class=padding href=/new-docs/xenopsd/design/pvs-proxy-ovs/index.html>PVS Proxy OVS Rules</a></li><li data-nav-id=/new-docs/xenopsd/design/suspend-image-considerations/index.html><a class=padding href=/new-docs/xenopsd/design/suspend-image-considerations/index.html>Requirements for suspend image framing</a></li><li data-nav-id=/new-docs/xenopsd/design/suspend-image-framing-format/index.html><a class=padding href=/new-docs/xenopsd/design/suspend-image-framing-format/index.html>Suspend image framing format</a></li><li data-nav-id=/new-docs/xenopsd/design/Tasks/index.html><a class=padding href=/new-docs/xenopsd/design/Tasks/index.html>Tasks</a></li></ul></li><li data-nav-id=/new-docs/xenopsd/features/index.html><a class=padding href=/new-docs/xenopsd/features/index.html>Features</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/index.html><input type=checkbox id=R-section-82a272712946f38915b8e2cefa80a829 aria-controls=R-subsections-82a272712946f38915b8e2cefa80a829><label for=R-section-82a272712946f38915b8e2cefa80a829><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Walk-throughs</span></label><a class=padding href=/new-docs/xenopsd/walkthroughs/index.html>Walk-throughs</a><ul id=R-subsections-82a272712946f38915b8e2cefa80a829 class=collapsible-menu><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.start/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.start/index.html>Starting a VM</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.build/index.html><input type=checkbox id=R-section-cb0e73c14bd7f69383fe23bf9475f55d aria-controls=R-subsections-cb0e73c14bd7f69383fe23bf9475f55d><label for=R-section-cb0e73c14bd7f69383fe23bf9475f55d><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Building a VM</span></label><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.build/index.html>Building a VM</a><ul id=R-subsections-cb0e73c14bd7f69383fe23bf9475f55d class=collapsible-menu><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.build/VM_build/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.build/VM_build/index.html>VM_build Î¼-op</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.build/Domain.build/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.build/Domain.build/index.html>Domain.build</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.build/xenguest/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.build/xenguest/index.html>xenguest</a></li></ul></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.migrate/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.migrate/index.html>Migrating a VM</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/live-migration/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/live-migration/index.html>Live Migration</a></li></ul></li></ul></li><li data-nav-id=/new-docs/xcp-networkd/index.html><a class=padding href=/new-docs/xcp-networkd/index.html>Networkd</a></li><li data-nav-id=/new-docs/squeezed/index.html><input type=checkbox id=R-section-2b908e757f8297a064be7fe32eedad70 aria-controls=R-subsections-2b908e757f8297a064be7fe32eedad70><label for=R-section-2b908e757f8297a064be7fe32eedad70><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Squeezed</span></label><a class=padding href=/new-docs/squeezed/index.html>Squeezed</a><ul id=R-subsections-2b908e757f8297a064be7fe32eedad70 class=collapsible-menu><li data-nav-id=/new-docs/squeezed/architecture/index.html><a class=padding href=/new-docs/squeezed/architecture/index.html>Architecture</a></li><li data-nav-id=/new-docs/squeezed/design/index.html><a class=padding href=/new-docs/squeezed/design/index.html>Design</a></li></ul></li><li data-nav-id=/new-docs/xapi-guard/index.html><a class=padding href=/new-docs/xapi-guard/index.html>Xapi-guard</a></li><li data-nav-id=/new-docs/design/index.html><input type=checkbox id=R-section-584881683b3574eff66f4a8e3d60d561 aria-controls=R-subsections-584881683b3574eff66f4a8e3d60d561><label for=R-section-584881683b3574eff66f4a8e3d60d561><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Designs</span></label><a class=padding href=/new-docs/design/index.html>Designs</a><ul id=R-subsections-584881683b3574eff66f4a8e3d60d561 class=collapsible-menu><li data-nav-id=/new-docs/design/add-qcow-tool-for-vdi-import-export/index.html><a class=padding href=/new-docs/design/add-qcow-tool-for-vdi-import-export/index.html>Add qcow tool to allow VDI import/export</a></li><li data-nav-id=/new-docs/design/aggr-storage-reboots/index.html><a class=padding href=/new-docs/design/aggr-storage-reboots/index.html>Aggregated Local Storage and Host Reboots</a></li><li data-nav-id=/new-docs/design/backtraces/index.html><a class=padding href=/new-docs/design/backtraces/index.html>Backtrace support</a></li><li data-nav-id=/new-docs/design/bonding-improvements/index.html><a class=padding href=/new-docs/design/bonding-improvements/index.html>Bonding Improvements design</a></li><li data-nav-id=/new-docs/design/coverage/index.html><a class=padding href=/new-docs/design/coverage/index.html>Code Coverage Profiling</a></li><li data-nav-id=/new-docs/design/cpu-levelling-v2/index.html><a class=padding href=/new-docs/design/cpu-levelling-v2/index.html>CPU feature levelling 2.0</a></li><li data-nav-id=/new-docs/design/distributed-database/index.html><a class=padding href=/new-docs/design/distributed-database/index.html>Distributed database</a></li><li data-nav-id=/new-docs/design/emergency-network-reset/index.html><a class=padding href=/new-docs/design/emergency-network-reset/index.html>Emergency Network Reset Design</a></li><li data-nav-id=/new-docs/design/fcoe-nics/index.html><a class=padding href=/new-docs/design/fcoe-nics/index.html>FCoE capable NICs</a></li><li data-nav-id=/new-docs/design/gpu-passthrough/index.html><a class=padding href=/new-docs/design/gpu-passthrough/index.html>GPU pass-through support</a></li><li data-nav-id=/new-docs/design/gpu-support-evolution/index.html><a class=padding href=/new-docs/design/gpu-support-evolution/index.html>GPU support evolution</a></li><li data-nav-id=/new-docs/design/pif-properties/index.html><a class=padding href=/new-docs/design/pif-properties/index.html>GRO and other properties of PIFs</a></li><li data-nav-id=/new-docs/design/heterogeneous-pools/index.html><a class=padding href=/new-docs/design/heterogeneous-pools/index.html>Heterogeneous pools</a></li><li data-nav-id=/new-docs/design/snapshot-revert/index.html><a class=padding href=/new-docs/design/snapshot-revert/index.html>Improving snapshot revert behaviour</a></li><li data-nav-id=/new-docs/design/integrated-gpu-passthrough/index.html><a class=padding href=/new-docs/design/integrated-gpu-passthrough/index.html>Integrated GPU passthrough support</a></li><li data-nav-id=/new-docs/design/local-database/index.html><a class=padding href=/new-docs/design/local-database/index.html>Local database</a></li><li data-nav-id=/new-docs/design/management-interface-on-vlan/index.html><a class=padding href=/new-docs/design/management-interface-on-vlan/index.html>Management Interface on VLAN</a></li><li data-nav-id=/new-docs/design/multiple-cluster-managers/index.html><a class=padding href=/new-docs/design/multiple-cluster-managers/index.html>Multiple Cluster Managers</a></li><li data-nav-id=/new-docs/design/multiple-device-emulators/index.html><a class=padding href=/new-docs/design/multiple-device-emulators/index.html>Multiple device emulators</a></li><li data-nav-id=/new-docs/design/ocfs2/index.html><a class=padding href=/new-docs/design/ocfs2/index.html>OCFS2 storage</a></li><li data-nav-id=/new-docs/design/patches-in-vdis/index.html><a class=padding href=/new-docs/design/patches-in-vdis/index.html>patches in VDIs</a></li><li data-nav-id=/new-docs/design/pci-passthrough/index.html><a class=padding href=/new-docs/design/pci-passthrough/index.html>PCI passthrough support</a></li><li data-nav-id=/new-docs/design/pool-wide-ssh/index.html><a class=padding href=/new-docs/design/pool-wide-ssh/index.html>Pool-wide SSH</a></li><li data-nav-id=/new-docs/design/xenopsd_events/index.html><a class=padding href=/new-docs/design/xenopsd_events/index.html>Process events from xenopsd in a timely manner</a></li><li data-nav-id=/new-docs/design/RDP/index.html><a class=padding href=/new-docs/design/RDP/index.html>RDP control</a></li><li data-nav-id=/new-docs/design/archival-redesign/index.html><a class=padding href=/new-docs/design/archival-redesign/index.html>RRDD archival redesign</a></li><li data-nav-id=/new-docs/design/plugin-protocol-v2/index.html><a class=padding href=/new-docs/design/plugin-protocol-v2/index.html>RRDD plugin protocol v2</a></li><li data-nav-id=/new-docs/design/plugin-protocol-v3/index.html><a class=padding href=/new-docs/design/plugin-protocol-v3/index.html>RRDD plugin protocol v3</a></li><li data-nav-id=/new-docs/design/schedule-snapshot/index.html><a class=padding href=/new-docs/design/schedule-snapshot/index.html>Schedule Snapshot Design</a></li><li data-nav-id=/new-docs/design/smapiv3/index.html><a class=padding href=/new-docs/design/smapiv3/index.html>SMAPIv3</a></li><li data-nav-id=/new-docs/design/emulated-pci-spec/index.html><a class=padding href=/new-docs/design/emulated-pci-spec/index.html>Specifying Emulated PCI Devices</a></li><li data-nav-id=/new-docs/design/sr-level-rrds/index.html><a class=padding href=/new-docs/design/sr-level-rrds/index.html>SR-Level RRDs</a></li><li data-nav-id=/new-docs/design/thin-lvhd/index.html><a class=padding href=/new-docs/design/thin-lvhd/index.html>thin LVHD storage</a></li><li data-nav-id=/new-docs/design/pool-certificates/index.html><a class=padding href=/new-docs/design/pool-certificates/index.html>TLS vertification for intra-pool communications</a></li><li data-nav-id=/new-docs/design/tunnelling/index.html><a class=padding href=/new-docs/design/tunnelling/index.html>Tunnelling API design</a></li><li data-nav-id=/new-docs/design/user-certificates/index.html><a class=padding href=/new-docs/design/user-certificates/index.html>User-installable host certificates</a></li><li data-nav-id=/new-docs/design/vgpu-type-identifiers/index.html><a class=padding href=/new-docs/design/vgpu-type-identifiers/index.html>VGPU type identifiers</a></li><li data-nav-id=/new-docs/design/virt-hw-platform-vn/index.html><a class=padding href=/new-docs/design/virt-hw-platform-vn/index.html>Virtual Hardware Platform Version</a></li><li data-nav-id=/new-docs/design/xenprep/index.html><a class=padding href=/new-docs/design/xenprep/index.html>XenPrep</a></li></ul></li><li data-nav-id=/new-docs/python/index.html><a class=padding href=/new-docs/python/index.html>Python</a></li><li data-nav-id=/new-docs/xcp-rrdd/index.html><input type=checkbox id=R-section-38712d4ba58933e242c69e06308c5176 aria-controls=R-subsections-38712d4ba58933e242c69e06308c5176><label for=R-section-38712d4ba58933e242c69e06308c5176><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu RRDD</span></label><a class=padding href=/new-docs/xcp-rrdd/index.html>RRDD</a><ul id=R-subsections-38712d4ba58933e242c69e06308c5176 class=collapsible-menu><li data-nav-id=/new-docs/xcp-rrdd/futures/archival-redesign/index.html><a class=padding href=/new-docs/xcp-rrdd/futures/archival-redesign/index.html>RRDD archival redesign</a></li><li data-nav-id=/new-docs/xcp-rrdd/design/plugin-protocol-v2/index.html><a class=padding href=/new-docs/xcp-rrdd/design/plugin-protocol-v2/index.html>RRDD plugin protocol v2</a></li><li data-nav-id=/new-docs/xcp-rrdd/futures/sr-level-rrds/index.html><a class=padding href=/new-docs/xcp-rrdd/futures/sr-level-rrds/index.html>SR-Level RRDs</a></li></ul></li><li data-nav-id=/new-docs/xen-api/index.html><input type=checkbox id=R-section-85499c3ba3e3f693ce7955637d671edd aria-controls=R-subsections-85499c3ba3e3f693ce7955637d671edd><label for=R-section-85499c3ba3e3f693ce7955637d671edd><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu XenAPI</span></label><a class=padding href=/new-docs/xen-api/index.html>XenAPI</a><ul id=R-subsections-85499c3ba3e3f693ce7955637d671edd class=collapsible-menu><li data-nav-id=/new-docs/xen-api/basics/index.html><a class=padding href=/new-docs/xen-api/basics/index.html>XenAPI Basics</a></li><li data-nav-id=/new-docs/xen-api/wire-protocol/index.html><a class=padding href=/new-docs/xen-api/wire-protocol/index.html>Wire Protocol</a></li><li data-nav-id=/new-docs/xen-api/overview/index.html><a class=padding href=/new-docs/xen-api/overview/index.html>Overview of the XenAPI</a></li><li data-nav-id=/new-docs/xen-api/evolution/index.html><a class=padding href=/new-docs/xen-api/evolution/index.html>API evolution</a></li><li data-nav-id=/new-docs/xen-api/usage/index.html><a class=padding href=/new-docs/xen-api/usage/index.html>Using the API</a></li><li data-nav-id=/new-docs/xen-api/classes/index.html><input type=checkbox id=R-section-c18ca4c7a790a34a3710541914952da2 aria-controls=R-subsections-c18ca4c7a790a34a3710541914952da2><label for=R-section-c18ca4c7a790a34a3710541914952da2><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu XenAPI Reference</span></label><a class=padding href=/new-docs/xen-api/classes/index.html>XenAPI Reference</a><ul id=R-subsections-c18ca4c7a790a34a3710541914952da2 class=collapsible-menu><li data-nav-id=/new-docs/xen-api/classes/auth/index.html><a class=padding href=/new-docs/xen-api/classes/auth/index.html>auth</a></li><li data-nav-id=/new-docs/xen-api/classes/blob/index.html><a class=padding href=/new-docs/xen-api/classes/blob/index.html>blob</a></li><li data-nav-id=/new-docs/xen-api/classes/bond/index.html><a class=padding href=/new-docs/xen-api/classes/bond/index.html>Bond</a></li><li data-nav-id=/new-docs/xen-api/classes/certificate/index.html><a class=padding href=/new-docs/xen-api/classes/certificate/index.html>Certificate</a></li><li data-nav-id=/new-docs/xen-api/classes/cluster/index.html><a class=padding href=/new-docs/xen-api/classes/cluster/index.html>Cluster</a></li><li data-nav-id=/new-docs/xen-api/classes/cluster_host/index.html><a class=padding href=/new-docs/xen-api/classes/cluster_host/index.html>Cluster_host</a></li><li data-nav-id=/new-docs/xen-api/classes/console/index.html><a class=padding href=/new-docs/xen-api/classes/console/index.html>console</a></li><li data-nav-id=/new-docs/xen-api/classes/crashdump/index.html><a class=padding href=/new-docs/xen-api/classes/crashdump/index.html>crashdump</a></li><li data-nav-id=/new-docs/xen-api/classes/data_source/index.html><a class=padding href=/new-docs/xen-api/classes/data_source/index.html>data_source</a></li><li data-nav-id=/new-docs/xen-api/classes/dr_task/index.html><a class=padding href=/new-docs/xen-api/classes/dr_task/index.html>DR_task</a></li><li data-nav-id=/new-docs/xen-api/classes/event/index.html><a class=padding href=/new-docs/xen-api/classes/event/index.html>event</a></li><li data-nav-id=/new-docs/xen-api/classes/feature/index.html><a class=padding href=/new-docs/xen-api/classes/feature/index.html>Feature</a></li><li data-nav-id=/new-docs/xen-api/classes/gpu_group/index.html><a class=padding href=/new-docs/xen-api/classes/gpu_group/index.html>GPU_group</a></li><li data-nav-id=/new-docs/xen-api/classes/host/index.html><a class=padding href=/new-docs/xen-api/classes/host/index.html>host</a></li><li data-nav-id=/new-docs/xen-api/classes/host_cpu/index.html><a class=padding href=/new-docs/xen-api/classes/host_cpu/index.html>host_cpu</a></li><li data-nav-id=/new-docs/xen-api/classes/host_crashdump/index.html><a class=padding href=/new-docs/xen-api/classes/host_crashdump/index.html>host_crashdump</a></li><li data-nav-id=/new-docs/xen-api/classes/host_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/host_metrics/index.html>host_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/host_patch/index.html><a class=padding href=/new-docs/xen-api/classes/host_patch/index.html>host_patch</a></li><li data-nav-id=/new-docs/xen-api/classes/lvhd/index.html><a class=padding href=/new-docs/xen-api/classes/lvhd/index.html>LVHD</a></li><li data-nav-id=/new-docs/xen-api/classes/message/index.html><a class=padding href=/new-docs/xen-api/classes/message/index.html>message</a></li><li data-nav-id=/new-docs/xen-api/classes/network/index.html><a class=padding href=/new-docs/xen-api/classes/network/index.html>network</a></li><li data-nav-id=/new-docs/xen-api/classes/network_sriov/index.html><a class=padding href=/new-docs/xen-api/classes/network_sriov/index.html>network_sriov</a></li><li data-nav-id=/new-docs/xen-api/classes/observer/index.html><a class=padding href=/new-docs/xen-api/classes/observer/index.html>Observer</a></li><li data-nav-id=/new-docs/xen-api/classes/pbd/index.html><a class=padding href=/new-docs/xen-api/classes/pbd/index.html>PBD</a></li><li data-nav-id=/new-docs/xen-api/classes/pci/index.html><a class=padding href=/new-docs/xen-api/classes/pci/index.html>PCI</a></li><li data-nav-id=/new-docs/xen-api/classes/pgpu/index.html><a class=padding href=/new-docs/xen-api/classes/pgpu/index.html>PGPU</a></li><li data-nav-id=/new-docs/xen-api/classes/pif/index.html><a class=padding href=/new-docs/xen-api/classes/pif/index.html>PIF</a></li><li data-nav-id=/new-docs/xen-api/classes/pif_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/pif_metrics/index.html>PIF_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/pool/index.html><a class=padding href=/new-docs/xen-api/classes/pool/index.html>pool</a></li><li data-nav-id=/new-docs/xen-api/classes/pool_patch/index.html><a class=padding href=/new-docs/xen-api/classes/pool_patch/index.html>pool_patch</a></li><li data-nav-id=/new-docs/xen-api/classes/pool_update/index.html><a class=padding href=/new-docs/xen-api/classes/pool_update/index.html>pool_update</a></li><li data-nav-id=/new-docs/xen-api/classes/probe_result/index.html><a class=padding href=/new-docs/xen-api/classes/probe_result/index.html>probe_result</a></li><li data-nav-id=/new-docs/xen-api/classes/pusb/index.html><a class=padding href=/new-docs/xen-api/classes/pusb/index.html>PUSB</a></li><li data-nav-id=/new-docs/xen-api/classes/pvs_cache_storage/index.html><a class=padding href=/new-docs/xen-api/classes/pvs_cache_storage/index.html>PVS_cache_storage</a></li><li data-nav-id=/new-docs/xen-api/classes/pvs_proxy/index.html><a class=padding href=/new-docs/xen-api/classes/pvs_proxy/index.html>PVS_proxy</a></li><li data-nav-id=/new-docs/xen-api/classes/pvs_server/index.html><a class=padding href=/new-docs/xen-api/classes/pvs_server/index.html>PVS_server</a></li><li data-nav-id=/new-docs/xen-api/classes/pvs_site/index.html><a class=padding href=/new-docs/xen-api/classes/pvs_site/index.html>PVS_site</a></li><li data-nav-id=/new-docs/xen-api/classes/repository/index.html><a class=padding href=/new-docs/xen-api/classes/repository/index.html>Repository</a></li><li data-nav-id=/new-docs/xen-api/classes/role/index.html><a class=padding href=/new-docs/xen-api/classes/role/index.html>role</a></li><li data-nav-id=/new-docs/xen-api/classes/sdn_controller/index.html><a class=padding href=/new-docs/xen-api/classes/sdn_controller/index.html>SDN_controller</a></li><li data-nav-id=/new-docs/xen-api/classes/secret/index.html><a class=padding href=/new-docs/xen-api/classes/secret/index.html>secret</a></li><li data-nav-id=/new-docs/xen-api/classes/session/index.html><a class=padding href=/new-docs/xen-api/classes/session/index.html>session</a></li><li data-nav-id=/new-docs/xen-api/classes/sm/index.html><a class=padding href=/new-docs/xen-api/classes/sm/index.html>SM</a></li><li data-nav-id=/new-docs/xen-api/classes/sr/index.html><a class=padding href=/new-docs/xen-api/classes/sr/index.html>SR</a></li><li data-nav-id=/new-docs/xen-api/classes/sr_stat/index.html><a class=padding href=/new-docs/xen-api/classes/sr_stat/index.html>sr_stat</a></li><li data-nav-id=/new-docs/xen-api/classes/subject/index.html><a class=padding href=/new-docs/xen-api/classes/subject/index.html>subject</a></li><li data-nav-id=/new-docs/xen-api/classes/task/index.html><a class=padding href=/new-docs/xen-api/classes/task/index.html>task</a></li><li data-nav-id=/new-docs/xen-api/classes/tunnel/index.html><a class=padding href=/new-docs/xen-api/classes/tunnel/index.html>tunnel</a></li><li data-nav-id=/new-docs/xen-api/classes/usb_group/index.html><a class=padding href=/new-docs/xen-api/classes/usb_group/index.html>USB_group</a></li><li data-nav-id=/new-docs/xen-api/classes/user/index.html><a class=padding href=/new-docs/xen-api/classes/user/index.html>user</a></li><li data-nav-id=/new-docs/xen-api/classes/vbd/index.html><a class=padding href=/new-docs/xen-api/classes/vbd/index.html>VBD</a></li><li data-nav-id=/new-docs/xen-api/classes/vbd_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/vbd_metrics/index.html>VBD_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/vdi/index.html><a class=padding href=/new-docs/xen-api/classes/vdi/index.html>VDI</a></li><li data-nav-id=/new-docs/xen-api/classes/vdi_nbd_server_info/index.html><a class=padding href=/new-docs/xen-api/classes/vdi_nbd_server_info/index.html>vdi_nbd_server_info</a></li><li data-nav-id=/new-docs/xen-api/classes/vgpu/index.html><a class=padding href=/new-docs/xen-api/classes/vgpu/index.html>VGPU</a></li><li data-nav-id=/new-docs/xen-api/classes/vgpu_type/index.html><a class=padding href=/new-docs/xen-api/classes/vgpu_type/index.html>VGPU_type</a></li><li data-nav-id=/new-docs/xen-api/classes/vif/index.html><a class=padding href=/new-docs/xen-api/classes/vif/index.html>VIF</a></li><li data-nav-id=/new-docs/xen-api/classes/vif_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/vif_metrics/index.html>VIF_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/vlan/index.html><a class=padding href=/new-docs/xen-api/classes/vlan/index.html>VLAN</a></li><li data-nav-id=/new-docs/xen-api/classes/vm/index.html><a class=padding href=/new-docs/xen-api/classes/vm/index.html>VM</a></li><li data-nav-id=/new-docs/xen-api/classes/vm_appliance/index.html><a class=padding href=/new-docs/xen-api/classes/vm_appliance/index.html>VM_appliance</a></li><li data-nav-id=/new-docs/xen-api/classes/vm_guest_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/vm_guest_metrics/index.html>VM_guest_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/vm_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/vm_metrics/index.html>VM_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/vmpp/index.html><a class=padding href=/new-docs/xen-api/classes/vmpp/index.html>VMPP</a></li><li data-nav-id=/new-docs/xen-api/classes/vmss/index.html><a class=padding href=/new-docs/xen-api/classes/vmss/index.html>VMSS</a></li><li data-nav-id=/new-docs/xen-api/classes/vtpm/index.html><a class=padding href=/new-docs/xen-api/classes/vtpm/index.html>VTPM</a></li><li data-nav-id=/new-docs/xen-api/classes/vusb/index.html><a class=padding href=/new-docs/xen-api/classes/vusb/index.html>VUSB</a></li></ul></li><li data-nav-id=/new-docs/xen-api/releases/index.html><input type=checkbox id=R-section-163f98f7fb9ab44b225cce7a0165c198 aria-controls=R-subsections-163f98f7fb9ab44b225cce7a0165c198><label for=R-section-163f98f7fb9ab44b225cce7a0165c198><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu XenAPI Releases</span></label><a class=padding href=/new-docs/xen-api/releases/index.html>XenAPI Releases</a><ul id=R-subsections-163f98f7fb9ab44b225cce7a0165c198 class=collapsible-menu><li data-nav-id=/new-docs/xen-api/releases/24.16.0/index.html><a class=padding href=/new-docs/xen-api/releases/24.16.0/index.html>XAPI 24.16.0</a></li><li data-nav-id=/new-docs/xen-api/releases/24.14.0/index.html><a class=padding href=/new-docs/xen-api/releases/24.14.0/index.html>XAPI 24.14.0</a></li><li data-nav-id=/new-docs/xen-api/releases/24.10.0/index.html><a class=padding href=/new-docs/xen-api/releases/24.10.0/index.html>XAPI 24.10.0</a></li><li data-nav-id=/new-docs/xen-api/releases/24.3.0/index.html><a class=padding href=/new-docs/xen-api/releases/24.3.0/index.html>XAPI 24.3.0</a></li><li data-nav-id=/new-docs/xen-api/releases/24.0.0/index.html><a class=padding href=/new-docs/xen-api/releases/24.0.0/index.html>XAPI 24.0.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.30.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.30.0/index.html>XAPI 23.30.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.27.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.27.0/index.html>XAPI 23.27.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.25.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.25.0/index.html>XAPI 23.25.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.18.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.18.0/index.html>XAPI 23.18.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.14.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.14.0/index.html>XAPI 23.14.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.9.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.9.0/index.html>XAPI 23.9.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.1.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.1.0/index.html>XAPI 23.1.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.37.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.37.0/index.html>XAPI 22.37.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.33.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.33.0/index.html>XAPI 22.33.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.27.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.27.0/index.html>XAPI 22.27.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.26.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.26.0/index.html>XAPI 22.26.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.20.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.20.0/index.html>XAPI 22.20.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.19.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.19.0/index.html>XAPI 22.19.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.16.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.16.0/index.html>XAPI 22.16.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.12.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.12.0/index.html>XAPI 22.12.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.5.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.5.0/index.html>XAPI 22.5.0</a></li><li data-nav-id=/new-docs/xen-api/releases/21.4.0/index.html><a class=padding href=/new-docs/xen-api/releases/21.4.0/index.html>XAPI 21.4.0</a></li><li data-nav-id=/new-docs/xen-api/releases/21.3.0/index.html><a class=padding href=/new-docs/xen-api/releases/21.3.0/index.html>XAPI 21.3.0</a></li><li data-nav-id=/new-docs/xen-api/releases/21.2.0/index.html><a class=padding href=/new-docs/xen-api/releases/21.2.0/index.html>XAPI 21.2.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.329.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.329.0/index.html>XAPI 1.329.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.318.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.318.0/index.html>XAPI 1.318.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.313.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.313.0/index.html>XAPI 1.313.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.307.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.307.0/index.html>XAPI 1.307.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.304.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.304.0/index.html>XAPI 1.304.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.303.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.303.0/index.html>XAPI 1.303.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.301.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.301.0/index.html>XAPI 1.301.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.298.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.298.0/index.html>XAPI 1.298.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.297.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.297.0/index.html>XAPI 1.297.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.294.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.294.0/index.html>XAPI 1.294.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.290.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.290.0/index.html>XAPI 1.290.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.271.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.271.0/index.html>XAPI 1.271.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.257.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.257.0/index.html>XAPI 1.257.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.250.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.250.0/index.html>XAPI 1.250.0</a></li><li data-nav-id=/new-docs/xen-api/releases/nile-preview/index.html><a class=padding href=/new-docs/xen-api/releases/nile-preview/index.html>XenServer 8 Preview</a></li><li data-nav-id=/new-docs/xen-api/releases/stockholm_psr/index.html><a class=padding href=/new-docs/xen-api/releases/stockholm_psr/index.html>Citrix Hypervisor 8.2 Hotfix 2</a></li><li data-nav-id=/new-docs/xen-api/releases/stockholm/index.html><a class=padding href=/new-docs/xen-api/releases/stockholm/index.html>Citrix Hypervisor 8.2</a></li><li data-nav-id=/new-docs/xen-api/releases/quebec/index.html><a class=padding href=/new-docs/xen-api/releases/quebec/index.html>Citrix Hypervisor 8.1</a></li><li data-nav-id=/new-docs/xen-api/releases/naples/index.html><a class=padding href=/new-docs/xen-api/releases/naples/index.html>Citrix Hypervisor 8.0</a></li><li data-nav-id=/new-docs/xen-api/releases/lima/index.html><a class=padding href=/new-docs/xen-api/releases/lima/index.html>XenServer 7.6</a></li><li data-nav-id=/new-docs/xen-api/releases/kolkata/index.html><a class=padding href=/new-docs/xen-api/releases/kolkata/index.html>XenServer 7.5</a></li><li data-nav-id=/new-docs/xen-api/releases/jura/index.html><a class=padding href=/new-docs/xen-api/releases/jura/index.html>XenServer 7.4</a></li><li data-nav-id=/new-docs/xen-api/releases/inverness/index.html><a class=padding href=/new-docs/xen-api/releases/inverness/index.html>XenServer 7.3</a></li><li data-nav-id=/new-docs/xen-api/releases/falcon/index.html><a class=padding href=/new-docs/xen-api/releases/falcon/index.html>XenServer 7.2</a></li><li data-nav-id=/new-docs/xen-api/releases/ely/index.html><a class=padding href=/new-docs/xen-api/releases/ely/index.html>XenServer 7.1</a></li><li data-nav-id=/new-docs/xen-api/releases/dundee/index.html><a class=padding href=/new-docs/xen-api/releases/dundee/index.html>XenServer 7.0</a></li><li data-nav-id=/new-docs/xen-api/releases/indigo/index.html><a class=padding href=/new-docs/xen-api/releases/indigo/index.html>XenServer 6.5 SP1 Hotfix 31</a></li><li data-nav-id=/new-docs/xen-api/releases/cream/index.html><a class=padding href=/new-docs/xen-api/releases/cream/index.html>XenServer 6.5 SP1</a></li><li data-nav-id=/new-docs/xen-api/releases/creedence/index.html><a class=padding href=/new-docs/xen-api/releases/creedence/index.html>XenServer 6.5</a></li><li data-nav-id=/new-docs/xen-api/releases/clearwater-whetstone/index.html><a class=padding href=/new-docs/xen-api/releases/clearwater-whetstone/index.html>XenServer 6.2 SP1 Hotfix 11</a></li><li data-nav-id=/new-docs/xen-api/releases/clearwater-felton/index.html><a class=padding href=/new-docs/xen-api/releases/clearwater-felton/index.html>XenServer 6.2 SP1 Hotfix 4</a></li><li data-nav-id=/new-docs/xen-api/releases/vgpu-productisation/index.html><a class=padding href=/new-docs/xen-api/releases/vgpu-productisation/index.html>XenServer 6.2 SP1</a></li><li data-nav-id=/new-docs/xen-api/releases/vgpu-tech-preview/index.html><a class=padding href=/new-docs/xen-api/releases/vgpu-tech-preview/index.html>XenServer 6.2 SP1 Tech-Preview</a></li><li data-nav-id=/new-docs/xen-api/releases/clearwater/index.html><a class=padding href=/new-docs/xen-api/releases/clearwater/index.html>XenServer 6.2</a></li><li data-nav-id=/new-docs/xen-api/releases/tampa/index.html><a class=padding href=/new-docs/xen-api/releases/tampa/index.html>XenServer 6.1</a></li><li data-nav-id=/new-docs/xen-api/releases/boston/index.html><a class=padding href=/new-docs/xen-api/releases/boston/index.html>XenServer 6.0</a></li><li data-nav-id=/new-docs/xen-api/releases/cowley/index.html><a class=padding href=/new-docs/xen-api/releases/cowley/index.html>XenServer 5.6 FP1</a></li><li data-nav-id=/new-docs/xen-api/releases/midnight-ride/index.html><a class=padding href=/new-docs/xen-api/releases/midnight-ride/index.html>XenServer 5.6</a></li><li data-nav-id=/new-docs/xen-api/releases/george/index.html><a class=padding href=/new-docs/xen-api/releases/george/index.html>XenServer 5.5</a></li><li data-nav-id=/new-docs/xen-api/releases/orlando-update-1/index.html><a class=padding href=/new-docs/xen-api/releases/orlando-update-1/index.html>XenServer 5.0 Update 1</a></li><li data-nav-id=/new-docs/xen-api/releases/orlando/index.html><a class=padding href=/new-docs/xen-api/releases/orlando/index.html>XenServer 5.0</a></li><li data-nav-id=/new-docs/xen-api/releases/symc/index.html><a class=padding href=/new-docs/xen-api/releases/symc/index.html>XenServer 4.1.1</a></li><li data-nav-id=/new-docs/xen-api/releases/miami/index.html><a class=padding href=/new-docs/xen-api/releases/miami/index.html>XenServer 4.1</a></li><li data-nav-id=/new-docs/xen-api/releases/rio/index.html><a class=padding href=/new-docs/xen-api/releases/rio/index.html>XenServer 4.0</a></li></ul></li><li data-nav-id=/new-docs/xen-api/topics/index.html><input type=checkbox id=R-section-7bfdf54ffdbca634ba4315d64a0b4174 aria-controls=R-subsections-7bfdf54ffdbca634ba4315d64a0b4174><label for=R-section-7bfdf54ffdbca634ba4315d64a0b4174><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Topics</span></label><a class=padding href=/new-docs/xen-api/topics/index.html>Topics</a><ul id=R-subsections-7bfdf54ffdbca634ba4315d64a0b4174 class=collapsible-menu><li data-nav-id=/new-docs/xen-api/topics/udhcp/index.html><a class=padding href=/new-docs/xen-api/topics/udhcp/index.html>API for configuring the udhcp server in Dom0</a></li><li data-nav-id=/new-docs/xen-api/topics/guest-agents/index.html><a class=padding href=/new-docs/xen-api/topics/guest-agents/index.html>Guest agents</a></li><li data-nav-id=/new-docs/xen-api/topics/memory/index.html><a class=padding href=/new-docs/xen-api/topics/memory/index.html>Memory</a></li><li data-nav-id=/new-docs/xen-api/topics/metrics/index.html><a class=padding href=/new-docs/xen-api/topics/metrics/index.html>Metrics</a></li><li data-nav-id=/new-docs/xen-api/topics/snapshots/index.html><a class=padding href=/new-docs/xen-api/topics/snapshots/index.html>Snapshots</a></li><li data-nav-id=/new-docs/xen-api/topics/consoles/index.html><a class=padding href=/new-docs/xen-api/topics/consoles/index.html>VM consoles</a></li><li data-nav-id=/new-docs/xen-api/topics/importexport/index.html><a class=padding href=/new-docs/xen-api/topics/importexport/index.html>VM import/export</a></li><li data-nav-id=/new-docs/xen-api/topics/vm-lifecycle/index.html><a class=padding href=/new-docs/xen-api/topics/vm-lifecycle/index.html>VM Lifecycle</a></li><li data-nav-id=/new-docs/xen-api/topics/xencenter/index.html><a class=padding href=/new-docs/xen-api/topics/xencenter/index.html>XenCenter</a></li></ul></li></ul></li></ul></div><div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"></div><div id=R-menu-footer><hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"><div id=R-prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVariantSwitch"><ul><li id=R-select-language-container class=footerLangSwitch><div class="padding menu-control"><i class="fa-fw fas fa-language"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-language>Language</label>
<select id=R-select-language onchange="location=this.querySelector(this.value).dataset.url"><option id=R-select-language-en value=#R-select-language-en data-url=/new-docs/xapi/internals/generated/index.html lang=en-us selected></option></select></div><div class=clear></div></div></li><li id=R-select-variant-container class="footerVariantSwitch showVariantSwitch"><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Theme</label>
<select id=R-select-variant onchange=window.relearn.changeVariant(this.value)><option id=R-select-variant-auto value=auto selected>Auto</option><option id=R-select-variant-zen-light value=zen-light>Zen Light</option><option id=R-select-variant-zen-dark value=zen-dark>Zen Dark</option><option id=R-select-variant-red value=red>Red</option><option id=R-select-variant-blue value=blue>Blue</option><option id=R-select-variant-green value=green>Green</option><option id=R-select-variant-learn value=learn>Learn</option><option id=R-select-variant-neon value=neon>Neon</option><option id=R-select-variant-relearn-light value=relearn-light>Relearn Light</option><option id=R-select-variant-relearn-bright value=relearn-bright>Relearn Bright</option><option id=R-select-variant-relearn-dark value=relearn-dark>Relearn Dark</option></select></div><div class=clear></div></div><script>window.relearn.markVariant()</script></li><li class=footerVisitedLinks><div class="padding menu-control"><i class="fa-fw fas fa-history"></i>
<span>&nbsp;</span><div class=control-style><button onclick=clearHistory()>Clear History</button></div><div class=clear></div></div></li></ul></div><div id=R-footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></div></aside><script src=/new-docs/js/clipboard.min.js?1741282401 defer></script><script src=/new-docs/js/perfect-scrollbar.min.js?1741282401 defer></script><script src=/new-docs/js/theme.js?1741282401 defer></script><script>function apply_image_invert_filter(e){document.querySelectorAll("img").forEach(function(t){if(t.classList.contains("no-invert"))return;t.style="filter: invert("+e+");"})}function darkThemeUsed(){const t=window.getComputedStyle(document.querySelector("body")),n=t.getPropertyValue("background-color");var e=n.match(/\d+/g).map(function(e){return parseInt(e,10)});return e.length===3&&.2126*e[0]+.7152*e[1]+.0722*e[2]<165}const invertToDarkGray=.85;darkThemeUsed()&&apply_image_invert_filter(invertToDarkGray),document.addEventListener("themeVariantLoaded",function(e){apply_image_invert_filter(e.detail.variant.endsWith("dark")?invertToDarkGray:0)})</script></body></html>