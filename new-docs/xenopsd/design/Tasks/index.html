<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta name=generator content="Relearn 5.20.0+tip"><meta name=description content><title>Tasks :: XAPI Toolstack Developer Documentation</title><link href=/new-docs/images/favicon.png?1706883896 rel=icon type=image/png><link href=/new-docs/css/fontawesome-all.min.css?1706883896 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/new-docs/css/fontawesome-all.min.css?1706883896 rel=stylesheet></noscript><link href=/new-docs/css/nucleus.css?1706883896 rel=stylesheet><link href=/new-docs/css/auto-complete.css?1706883896 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/new-docs/css/auto-complete.css?1706883896 rel=stylesheet></noscript><link href=/new-docs/css/perfect-scrollbar.min.css?1706883896 rel=stylesheet><link href=/new-docs/css/fonts.css?1706883896 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/new-docs/css/fonts.css?1706883896 rel=stylesheet></noscript><link href=/new-docs/css/theme.css?1706883896 rel=stylesheet><link href=/new-docs/css/theme-red.css?1706883896 rel=stylesheet id=variant-style><link href=/new-docs/css/variant.css?1706883896 rel=stylesheet><link href=/new-docs/css/print.css?1706883896 rel=stylesheet media=print><link href=/new-docs/css/ie.css?1706883896 rel=stylesheet><script src=/new-docs/js/url.js?1706883896></script>
<script src=/new-docs/js/variant.js?1706883896></script>
<script>window.index_js_url="/new-docs/index.search.js";var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_No_results_found="No results found for \"{0}\"",window.T_N_results_found="{1} results found for \"{0}\"",baseUriFull="https://xapi-project.github.io/new-docs/",window.variants&&variants.init(["red"])</script></head><body class="mobile-support html" data-url=/new-docs/xenopsd/design/Tasks/index.html><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div class=navigation><a class="nav nav-next topbar-link" href=/new-docs/xenopsd/features/index.html title="Features (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a></div><div class=navigation><a class="nav nav-prev topbar-link" href=/new-docs/xenopsd/design/suspend-image-framing-format/index.html title="Suspend image framing format (&#129104;)"><i class="fas fa-chevron-left fa-fw"></i></a></div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle class=topbar-link title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span>
<span id=toc-menu title='Table of Contents (CTRL+ALT+t)'><i class="fas fa-list-alt fa-fw"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/new-docs/index.html><span itemprop=name>XAPI Toolstack Developer Guide</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/new-docs/xenopsd/index.html><span itemprop=name>Xenopsd</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/new-docs/xenopsd/design/index.html><span itemprop=name>Design</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Tasks</span><meta itemprop=position content="4"></li></ol></div><div class="default-animation progress"><div class=toc-wrapper><nav id=TableOfContents><ul><li><a href=#principles>Principles</a></li><li><a href=#types>Types</a></li><li><a href=#persistence>Persistence</a></li><li><a href=#lifecycle-of-a-task>Lifecycle of a Task</a></li><li><a href=#cancellation>Cancellation</a></li><li><a href=#testing-with-cancel-points>Testing with cancel points</a></li><li><a href=#preventing-tasks-leaking>Preventing Tasks leaking</a></li></ul></nav></div></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=tasks>Tasks</h1><p>Some operations performed by Xenopsd are blocking, for example:</p><ul><li>suspend/resume/migration</li><li>attaching disks (where the SMAPI VDI.attach/activate calls can perform network
I/O)</li></ul><p>We want to be able to</p><ul><li>present the user with an idea of progress (perhaps via a &ldquo;progress bar&rdquo;)</li><li>allow the user to cancel a blocked operation that is taking too long</li><li>associate logging with the user/client-initiated actions that spawned them</li></ul><h2 id=principles>Principles</h2><ul><li>all operations which may block (the vast majority) should be written in an
asynchronous style i.e. the operations should immediately return a Task id</li><li>all operations should guarantee to respond to a cancellation request in a
bounded amount of time (30s)</li><li>when cancelled, the system should always be left in a valid state</li><li>clients are responsible for destroying Tasks when they are finished with the
results</li></ul><h2 id=types>Types</h2><p>A task has a state, which may be Pending, Completed or failed:</p><div class="wrap-code highlight"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ocaml data-lang=ocaml><span style=display:flex><span>	<span style=color:#66d9ef>type</span> async_result <span style=color:#f92672>=</span> <span style=color:#66d9ef>unit</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>type</span> completion_t <span style=color:#f92672>=</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		duration <span style=color:#f92672>:</span> <span style=color:#66d9ef>float</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>		result <span style=color:#f92672>:</span> async_result option
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>type</span> state <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>|</span> <span style=color:#a6e22e>Pending</span> <span style=color:#66d9ef>of</span> <span style=color:#66d9ef>float</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>|</span> <span style=color:#a6e22e>Completed</span> <span style=color:#66d9ef>of</span> completion_t
</span></span><span style=display:flex><span>		<span style=color:#f92672>|</span> <span style=color:#a6e22e>Failed</span> <span style=color:#66d9ef>of</span> Rpc.t</span></span></code></pre></div><p>When a task is Failed, we assocate it with a marshalled exception (a value of type
Rpc.t). This exception must be one from the set defined in the
<a href=https://github.com/xapi-project/xcp-idl/blob/2e5c3dd79c63e3711227892271a6bece98eb0fa1/xen/xenops_interface.ml#L46 target=_blank>Xenops_interface</a>.
To see how they are marshalled, see
<a href=https://github.com/xapi-project/xenopsd/blob/f876f9029cf53f14a52bf42a4a3a03265e048926/lib/xenops_server.ml#L564 target=_blank>Xenops_server</a>.</p><p>From the point of view of a client, a Task has the immutable type (which can be
queried with a <code>Task.stat</code>):</p><div class="wrap-code highlight"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ocaml data-lang=ocaml><span style=display:flex><span>	<span style=color:#66d9ef>type</span> t <span style=color:#f92672>=</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		id<span style=color:#f92672>:</span> id<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>		dbg<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>		ctime<span style=color:#f92672>:</span> <span style=color:#66d9ef>float</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>		state<span style=color:#f92672>:</span> state<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>		subtasks<span style=color:#f92672>:</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>string</span> <span style=color:#f92672>*</span> state<span style=color:#f92672>)</span> <span style=color:#66d9ef>list</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>		debug_info<span style=color:#f92672>:</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>string</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>string</span><span style=color:#f92672>)</span> <span style=color:#66d9ef>list</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span></span></span></code></pre></div><p>where</p><ul><li>id is a unique (integer) id generated by Xenopsd. This is how a Task is
represented to clients</li><li>dbg is a client-provided debug key which will be used in log lines, allowing
lines from the same Task to be associated together</li><li>ctime is the creation time</li><li>state is the current state (Pending/Completed/Failed)</li><li>subtasks lists logical internal sub-operations for debugging</li><li>debug_info includes miscellaneous key/value pairs used for debugging</li></ul><p>Internally, Xenopsd uses a
<a href=https://github.com/xapi-project/xenopsd/blob/f876f9029cf53f14a52bf42a4a3a03265e048926/lib/task_server.ml#L73 target=_blank>mutable record type</a>
to track Task state. This is broadly similar to the interface type except</p><ul><li>the state is mutable: this allows Tasks to complete</li><li>the task contains a &ldquo;do this now&rdquo; thunk</li><li>there is a &ldquo;cancelling&rdquo; boolean which is toggled to request a cancellation.</li><li>there is a list of cancel callbacks</li><li>there are some fields related to &ldquo;cancel points&rdquo;</li></ul><h2 id=persistence>Persistence</h2><p>The Tasks are intended to represent activities associated with in-memory queues
and threads. Therefore the active Tasks are kept in memory in a map, and will
be lost over a process restart. This is desirable since we will also lose the
queued items and the threads, so there is no need to resync on start.</p><p>Note that every operation must ensure that the state of the system is recoverable
on restart by not leaving it in an invalid state. It is not necessary to either
guarantee to complete or roll-back a Task. Tasks are not expected to be
transactional.</p><h2 id=lifecycle-of-a-task>Lifecycle of a Task</h2><p>All Tasks returned by API functions are created as part of the enqueue functions:
<a href=https://github.com/xapi-project/xenopsd/blob/f876f9029cf53f14a52bf42a4a3a03265e048926/lib/xenops_server.ml#L1451 target=_blank>queue_operation_*</a>.
Even operations which are performed internally are normally wrapped in Tasks by
the function
<a href=https://github.com/xapi-project/xenopsd/blob/f876f9029cf53f14a52bf42a4a3a03265e048926/lib/xenops_server.ml#L1451 target=_blank>immediate_operation</a>.</p><p>A queued operation will be processed by one of the
<a href=https://github.com/xapi-project/xenopsd/blob/f876f9029cf53f14a52bf42a4a3a03265e048926/lib/xenops_server.ml#L554 target=_blank>queue worker threads</a>.
It will</p><ul><li>set the thread-local debug key to the Task.dbg</li><li>call <code>task.Xenops_task.run</code>, taking care to catch exceptions and update
the <code>task.Xenops_task.state</code></li><li>unset the thread-local debug key</li><li>generate an event on the Task to provoke clients to query the current state.</li></ul><p>Task implementations must update their progress as they work. For the common
case of a compound operation like <code>VM_start</code> which is decomposed into
multiple &ldquo;micro-ops&rdquo; (e.g. <code>VM_create</code> <code>VM_build</code>) there is a useful
helper function
<a href=https://github.com/xapi-project/xenopsd/blob/f876f9029cf53f14a52bf42a4a3a03265e048926/lib/xenops_server.ml#L1092 target=_blank>perform_atomics</a>
which divides the progress &lsquo;bar&rsquo; into sections, where each &ldquo;micro-op&rdquo; can have
a different size (<code>weight</code>). A progress callback function is passed into
each Xenopsd backend function so it can be updated with fine granulatiry. For
example note the arguments to
<a href=https://github.com/xapi-project/xenopsd/blob/f876f9029cf53f14a52bf42a4a3a03265e048926/lib/xenops_server.ml#L1092 target=_blank>B.VM.save</a></p><p>Clients are expected to destroy Tasks they are responsible for creating. Xenopsd
cannot do this on their behalf because it does not know if they have successfully
queried the Task status/result.</p><p>When Xenopsd is a client of itself, it will take care to destroy the Task
properly, for example see
<a href=https://github.com/xapi-project/xenopsd/blob/f876f9029cf53f14a52bf42a4a3a03265e048926/lib/xenops_server.ml#L1451 target=_blank>immediate_operation</a>.</p><h2 id=cancellation>Cancellation</h2><p>The goal of cancellation is to unstick a blocked operation and to return the
system to <em>some</em> valid state, not any valid state in particular.
Xenopsd does not treat operations as transactions;
when an operation is cancelled it may</p><ul><li>fully complete (e.g. if it was about to do this anyway)</li><li>fully abort (e.g. if it had made no progress)</li><li>enter some other valid state (e.g. if it had gotten half way through)</li></ul><p>Xenopsd will never leave the system in an invalid state after cancellation.</p><p>Every Xenopsd operation should unblock and return the system to a valid state within
a reasonable amount of time after a cancel request. This should be as quick as possible
but up to 30s may be acceptable.
Bear in mind that a human is probably impatiently watching a UI say &ldquo;please wait&rdquo;
and which doesn&rsquo;t have any notion of progress itself. Keep it quick!</p><p>Cancellation is triggered by TASK.cancel which calls
<a href=https://github.com/xapi-project/xenopsd/blob/f876f9029cf53f14a52bf42a4a3a03265e048926/lib/task_server.ml#L194 target=_blank>cancel</a>.
This</p><ul><li>sets the cancelling boolean</li><li>calls all registered cancel callbacks</li></ul><p>Implementations respond to cancellation by</p><ul><li>if running: periodically call <a href=https://github.com/xapi-project/xenopsd/blob/f876f9029cf53f14a52bf42a4a3a03265e048926/lib/task_server.ml#L213 target=_blank>check_cancelling</a></li><li>if about to block: register a suitable cancel callback safely with <a href=https://github.com/xapi-project/xenopsd/blob/f876f9029cf53f14a52bf42a4a3a03265e048926/lib/task_server.ml#L224 target=_blank>with_cancel</a>.</li></ul><p>Xenopsd&rsquo;s libxc backend can block in 2 different ways, and therefore has 2 different
types of cancel callback:</p><ol><li>cancellable Xenstore watches</li><li>cancellable subprocesses</li></ol><p>Xenstore watches are used for device hotplug and unplug. Xenopsd has to wait for
the backend or for a udev script to do something. If that blocks then we need
a way to cancel the watch. The easiest way to cancel a watch is to watch an
additional path (a &ldquo;cancel path&rdquo;) and delete it, see
<a href=https://github.com/xapi-project/xenopsd/blob/f876f9029cf53f14a52bf42a4a3a03265e048926/xc/cancel_utils.ml#L117 target=_blank>cancellable_watch</a>.
The &ldquo;cancel paths&rdquo; are placed within the VM&rsquo;s Xenstore directory to ensure that
cleanup code which does <code>xenstore-rm</code> will automatically &ldquo;cancel&rdquo; all outstanding
watches. Note that we trigger a cancel by deleting rather than creating, to avoid
racing with delete and creating orphaned Xenstore entries.</p><p>Subprocesses are used for suspend/resume/migrate. Xenopsd hands file descriptors
to libxenguest by running a subprocess and passing the fds to it. Xenopsd therefore
gets the process id and can send it a signal to cancel it. See
<a href=https://github.com/xapi-project/xenopsd/blob/f876f9029cf53f14a52bf42a4a3a03265e048926/xc/cancel_utils.ml#L117 target=_blank>Cancellable_subprocess.run</a>.</p><h2 id=testing-with-cancel-points>Testing with cancel points</h2><p>Cancellation is difficult to test, as it is completely asynchronous. Therefore
Xenopsd has some built-in cancellation testing infrastructure known as &ldquo;cancel points&rdquo;.
A &ldquo;cancel point&rdquo; is a point in the code where a <code>Cancelled</code> exception could
be thrown, either by checking the cancelling boolean or as a side-effect of
a cancel callback. The
<a href=https://github.com/xapi-project/xenopsd/blob/f876f9029cf53f14a52bf42a4a3a03265e048926/lib/task_server.ml#L216 target=_blank>check_cancelling</a>
function increments a counter every time it passes one of these points, and
this value is returned to clients in the
<a href=https://github.com/xapi-project/xenopsd/blob/f876f9029cf53f14a52bf42a4a3a03265e048926/lib/xenops_server.ml#L135 target=_blank>Task.debug_info</a>.</p><p>A <a href=https://github.com/xapi-project/xen-api/blob/a365545c3b113fcd4bedecbc9146d4b6e3efbb04/ocaml/xapi/cancel_tests.ml target=_blank>test harness</a>
runs a series of operations. Each operation is first run all the way through to
completion to discover the total number of cancel points. The operation is then
re-run with a
<a href=https://github.com/xapi-project/xenopsd/blob/f876f9029cf53f14a52bf42a4a3a03265e048926/lib/task_server.ml#L84 target=_blank>request to cancel at a particular point</a>.
The test then waits for the system to stabilise and verifies that it appears to be
in a valid state.</p><h2 id=preventing-tasks-leaking>Preventing Tasks leaking</h2><p>The client who creates a Task must destroy it when the Task is finished, and
they have processed the result. What if a client like xapi is restarted while
a Task is running?</p><p>We assume that, if xapi is talking to a xenopsd, then xapi completely owns it.
Therefore xapi should destroy any completed tasks that it doesn&rsquo;t recognise.</p><p>If a user wishes to manage VMs with xenopsd in parallel with xapi, the user
should run a separate xenopsd.</p><footer class=footline></footer></article></div></main></div><aside id=sidebar class=default-animation><div id=header-topbar class=default-animation></div><div id=header-wrapper class=default-animation><div id=header class=default-animation><img src=https://xapi-project.github.io/new-docs//images/xapi-project.png></div><div class="searchbox default-animation"><i class="fas fa-search" title="Search (CTRL+ALT+f)"></i>
<label class=a11y-only for=search-by>Search</label>
<input data-search-input id=search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div><script>var contentLangs=["en"]</script><script src=/new-docs/js/auto-complete.js?1706883896 defer></script>
<script src=/new-docs/js/lunr/lunr.min.js?1706883896 defer></script>
<script src=/new-docs/js/lunr/lunr.stemmer.support.min.js?1706883896 defer></script>
<script src=/new-docs/js/lunr/lunr.multi.min.js?1706883896 defer></script>
<script src=/new-docs/js/lunr/lunr.en.min.js?1706883896 defer></script>
<script src=/new-docs/js/search.js?1706883896 defer></script></div><div id=homelinks class="default-animation homelinks"><ul><li><a class=padding href=/new-docs/index.html><i class="fas fa-home"></i> Home</a></li></ul><hr class=padding></div><div id=content-wrapper class=highlightable><div id=topics><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/new-docs/toolstack/index.html><input type=checkbox id=section-733bfb8b221c6a3949d666444cf4445d aria-controls=subsections-733bfb8b221c6a3949d666444cf4445d><label for=section-733bfb8b221c6a3949d666444cf4445d><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu The Toolstack</span></label><a class=padding href=/new-docs/toolstack/index.html>The Toolstack</a><ul id=subsections-733bfb8b221c6a3949d666444cf4445d class="morespace collapsible-menu"><li data-nav-id=/new-docs/toolstack/responsibilities/index.html><a class=padding href=/new-docs/toolstack/responsibilities/index.html>Responsibilities</a></li><li data-nav-id=/new-docs/toolstack/high-level/index.html><input type=checkbox id=section-93d1c0b933c799c336ad0fd09a6dc0ae aria-controls=subsections-93d1c0b933c799c336ad0fd09a6dc0ae><label for=section-93d1c0b933c799c336ad0fd09a6dc0ae><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu High-level architecture</span></label><a class=padding href=/new-docs/toolstack/high-level/index.html>High-level architecture</a><ul id=subsections-93d1c0b933c799c336ad0fd09a6dc0ae class="morespace collapsible-menu"><li data-nav-id=/new-docs/toolstack/high-level/environment/index.html><a class=padding href=/new-docs/toolstack/high-level/environment/index.html>Environment</a></li><li data-nav-id=/new-docs/toolstack/high-level/daemons/index.html><a class=padding href=/new-docs/toolstack/high-level/daemons/index.html>Daemons</a></li><li data-nav-id=/new-docs/toolstack/high-level/interfaces/index.html><a class=padding href=/new-docs/toolstack/high-level/interfaces/index.html>Interfaces</a></li></ul></li><li data-nav-id=/new-docs/toolstack/features/index.html><input type=checkbox id=section-a202420b9d8f13c2d690377c4357de50 aria-controls=subsections-a202420b9d8f13c2d690377c4357de50><label for=section-a202420b9d8f13c2d690377c4357de50><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Features</span></label><a class=padding href=/new-docs/toolstack/features/index.html>Features</a><ul id=subsections-a202420b9d8f13c2d690377c4357de50 class="morespace collapsible-menu"><li data-nav-id=/new-docs/toolstack/features/DR/index.html><a class=padding href=/new-docs/toolstack/features/DR/index.html>Disaster Recovery</a></li><li data-nav-id=/new-docs/toolstack/features/events/index.html><a class=padding href=/new-docs/toolstack/features/events/index.html>Event handling</a></li><li data-nav-id=/new-docs/toolstack/features/HA/index.html><a class=padding href=/new-docs/toolstack/features/HA/index.html>High-Availability</a></li><li data-nav-id=/new-docs/toolstack/features/NUMA/index.html><a class=padding href=/new-docs/toolstack/features/NUMA/index.html>NUMA</a></li><li data-nav-id=/new-docs/toolstack/features/snapshots/index.html><a class=padding href=/new-docs/toolstack/features/snapshots/index.html>Snapshots</a></li><li data-nav-id=/new-docs/toolstack/features/VGPU/index.html><a class=padding href=/new-docs/toolstack/features/VGPU/index.html>vGPU</a></li><li data-nav-id=/new-docs/toolstack/features/XSM/index.html><a class=padding href=/new-docs/toolstack/features/XSM/index.html>Xapi Storage Migration</a></li></ul></li></ul></li><li data-nav-id=/new-docs/xapi/index.html><input type=checkbox id=section-38d9a208f329bfd7f57b7a3d82b1b09a aria-controls=subsections-38d9a208f329bfd7f57b7a3d82b1b09a><label for=section-38d9a208f329bfd7f57b7a3d82b1b09a><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Xapi</span></label><a class=padding href=/new-docs/xapi/index.html>Xapi</a><ul id=subsections-38d9a208f329bfd7f57b7a3d82b1b09a class="morespace collapsible-menu"><li data-nav-id=/new-docs/xapi/guides/index.html><input type=checkbox id=section-1e852a9c61356e39c38ffde6aaccdadf aria-controls=subsections-1e852a9c61356e39c38ffde6aaccdadf><label for=section-1e852a9c61356e39c38ffde6aaccdadf><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Guides</span></label><a class=padding href=/new-docs/xapi/guides/index.html>Guides</a><ul id=subsections-1e852a9c61356e39c38ffde6aaccdadf class="morespace collapsible-menu"><li data-nav-id=/new-docs/xapi/guides/howtos/index.html><input type=checkbox id=section-259bbbeab1560e4f0d61ad99041ab23f aria-controls=subsections-259bbbeab1560e4f0d61ad99041ab23f><label for=section-259bbbeab1560e4f0d61ad99041ab23f><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu How to add....</span></label><a class=padding href=/new-docs/xapi/guides/howtos/index.html>How to add....</a><ul id=subsections-259bbbeab1560e4f0d61ad99041ab23f class="morespace collapsible-menu"><li data-nav-id=/new-docs/xapi/guides/howtos/add-class/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-class/index.html>Adding a Class to the API</a></li><li data-nav-id=/new-docs/xapi/guides/howtos/add-field/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-field/index.html>Adding a field to the API</a></li><li data-nav-id=/new-docs/xapi/guides/howtos/add-function/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-function/index.html>Adding a function to the API</a></li><li data-nav-id=/new-docs/xapi/guides/howtos/add-api-extension/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-api-extension/index.html>Adding a XenAPI extension</a></li></ul></li></ul></li><li data-nav-id=/new-docs/xapi/database/index.html><input type=checkbox id=section-378fe6bda61dabebb37cf2433db26b2f aria-controls=subsections-378fe6bda61dabebb37cf2433db26b2f><label for=section-378fe6bda61dabebb37cf2433db26b2f><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Database</span></label><a class=padding href=/new-docs/xapi/database/index.html>Database</a><ul id=subsections-378fe6bda61dabebb37cf2433db26b2f class="morespace collapsible-menu"><li data-nav-id=/new-docs/xapi/database/redo-log/index.html><a class=padding href=/new-docs/xapi/database/redo-log/index.html>Metadata-on-LUN</a></li></ul></li><li data-nav-id=/new-docs/xapi/memory/index.html><a class=padding href=/new-docs/xapi/memory/index.html>Memory</a></li><li data-nav-id=/new-docs/xapi/walkthroughs/index.html><input type=checkbox id=section-9c43a1a521e6b0d3839462550f0172af aria-controls=subsections-9c43a1a521e6b0d3839462550f0172af><label for=section-9c43a1a521e6b0d3839462550f0172af><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Walk-throughs</span></label><a class=padding href=/new-docs/xapi/walkthroughs/index.html>Walk-throughs</a><ul id=subsections-9c43a1a521e6b0d3839462550f0172af class="morespace collapsible-menu"><li data-nav-id=/new-docs/xapi/walkthroughs/migration_overview/index.html><a class=padding href=/new-docs/xapi/walkthroughs/migration_overview/index.html>How XAPI handles migration request</a></li></ul></li><li data-nav-id=/new-docs/xapi/storage/index.html><input type=checkbox id=section-6bab529a669346ed9d1815ed30e48c91 aria-controls=subsections-6bab529a669346ed9d1815ed30e48c91><label for=section-6bab529a669346ed9d1815ed30e48c91><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Storage</span></label><a class=padding href=/new-docs/xapi/storage/index.html>Storage</a><ul id=subsections-6bab529a669346ed9d1815ed30e48c91 class="morespace collapsible-menu"><li data-nav-id=/new-docs/xapi/storage/sxm/index.html><a class=padding href=/new-docs/xapi/storage/sxm/index.html>Storage migration</a></li></ul></li><li data-nav-id=/new-docs/xapi/cli/index.html><a class=padding href=/new-docs/xapi/cli/index.html>CLI</a></li></ul></li><li data-nav-id=/new-docs/xenopsd/index.html class=parent><input type=checkbox id=section-c72fd23679970685706f8c9f1bb2fa52 aria-controls=subsections-c72fd23679970685706f8c9f1bb2fa52 checked><label for=section-c72fd23679970685706f8c9f1bb2fa52><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Xenopsd</span></label><a class=padding href=/new-docs/xenopsd/index.html>Xenopsd</a><ul id=subsections-c72fd23679970685706f8c9f1bb2fa52 class="morespace collapsible-menu"><li data-nav-id=/new-docs/xenopsd/architecture/index.html><a class=padding href=/new-docs/xenopsd/architecture/index.html>Architecture</a></li><li data-nav-id=/new-docs/xenopsd/design/index.html class=parent><input type=checkbox id=section-9b92b6e8232f75e147c3792adf755e68 aria-controls=subsections-9b92b6e8232f75e147c3792adf755e68 checked><label for=section-9b92b6e8232f75e147c3792adf755e68><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Design</span></label><a class=padding href=/new-docs/xenopsd/design/index.html>Design</a><ul id=subsections-9b92b6e8232f75e147c3792adf755e68 class="morespace collapsible-menu"><li data-nav-id=/new-docs/xenopsd/design/Events/index.html><a class=padding href=/new-docs/xenopsd/design/Events/index.html>Events</a></li><li data-nav-id=/new-docs/xenopsd/design/hooks/index.html><a class=padding href=/new-docs/xenopsd/design/hooks/index.html>Hooks</a></li><li data-nav-id=/new-docs/xenopsd/design/pvs-proxy-ovs/index.html><a class=padding href=/new-docs/xenopsd/design/pvs-proxy-ovs/index.html>PVS Proxy OVS Rules</a></li><li data-nav-id=/new-docs/xenopsd/design/suspend-image-considerations/index.html><a class=padding href=/new-docs/xenopsd/design/suspend-image-considerations/index.html>Requirements for suspend image framing</a></li><li data-nav-id=/new-docs/xenopsd/design/suspend-image-framing-format/index.html><a class=padding href=/new-docs/xenopsd/design/suspend-image-framing-format/index.html>Suspend image framing format</a></li><li data-nav-id=/new-docs/xenopsd/design/Tasks/index.html class=active><a class=padding href=/new-docs/xenopsd/design/Tasks/index.html>Tasks</a></li></ul></li><li data-nav-id=/new-docs/xenopsd/features/index.html><a class=padding href=/new-docs/xenopsd/features/index.html>Features</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/index.html><input type=checkbox id=section-523c4f88c9de72bf362da89f937681e6 aria-controls=subsections-523c4f88c9de72bf362da89f937681e6><label for=section-523c4f88c9de72bf362da89f937681e6><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Walk-throughs</span></label><a class=padding href=/new-docs/xenopsd/walkthroughs/index.html>Walk-throughs</a><ul id=subsections-523c4f88c9de72bf362da89f937681e6 class="morespace collapsible-menu"><li data-nav-id=/new-docs/xenopsd/walkthroughs/live-migration/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/live-migration/index.html>Live Migration</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.migrate/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.migrate/index.html>Walkthrough: Migrating a VM</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.start/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.start/index.html>Walkthrough: Starting a VM</a></li></ul></li></ul></li><li data-nav-id=/new-docs/xcp-networkd/index.html><a class=padding href=/new-docs/xcp-networkd/index.html>Networkd</a></li><li data-nav-id=/new-docs/squeezed/index.html><input type=checkbox id=section-1eeda4d753cc1773dfada70c3819a0a1 aria-controls=subsections-1eeda4d753cc1773dfada70c3819a0a1><label for=section-1eeda4d753cc1773dfada70c3819a0a1><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu Squeezed</span></label><a class=padding href=/new-docs/squeezed/index.html>Squeezed</a><ul id=subsections-1eeda4d753cc1773dfada70c3819a0a1 class="morespace collapsible-menu"><li data-nav-id=/new-docs/squeezed/architecture/index.html><a class=padding href=/new-docs/squeezed/architecture/index.html>Architecture</a></li><li data-nav-id=/new-docs/squeezed/design/index.html><a class=padding href=/new-docs/squeezed/design/index.html>Design</a></li></ul></li><li data-nav-id=/new-docs/xcp-rrdd/index.html><input type=checkbox id=section-54ab6488aa1c00b15a58b0c7ace94c5e aria-controls=subsections-54ab6488aa1c00b15a58b0c7ace94c5e><label for=section-54ab6488aa1c00b15a58b0c7ace94c5e><i class="fas fa-chevron-down"></i><i class="fas fa-chevron-right"></i><span class=a11y-only>Submenu RRDD</span></label><a class=padding href=/new-docs/xcp-rrdd/index.html>RRDD</a><ul id=subsections-54ab6488aa1c00b15a58b0c7ace94c5e class="morespace collapsible-menu"><li data-nav-id=/new-docs/xcp-rrdd/futures/archival-redesign/index.html><a class=padding href=/new-docs/xcp-rrdd/futures/archival-redesign/index.html>RRDD archival redesign</a></li><li data-nav-id=/new-docs/xcp-rrdd/design/plugin-protocol-v2/index.html><a class=padding href=/new-docs/xcp-rrdd/design/plugin-protocol-v2/index.html>RRDD plugin protocol v2</a></li><li data-nav-id=/new-docs/xcp-rrdd/futures/sr-level-rrds/index.html><a class=padding href=/new-docs/xcp-rrdd/futures/sr-level-rrds/index.html>SR-Level RRDs</a></li></ul></li></ul></div><div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter"></div><div id=menu-footer><hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter"><div id=prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks"><ul><li id=select-language-container class=footerLangSwitch><div class="padding menu-control"><i class="fas fa-language fa-fw"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=select-language>Language</label>
<select id=select-language onchange="location=baseUri+this.value"></select></div><div class=clear></div></div></li><li id=select-variant-container class=footerVariantSwitch><div class="padding menu-control"><i class="fas fa-paint-brush fa-fw"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=select-variant>Theme</label>
<select id=select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=red value=red selected>Red</option></select></div><div class=clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class=footerVisitedLinks><div class="padding menu-control"><i class="fas fa-history fa-fw"></i>
<span>&nbsp;</span><div class=control-style><button onclick=clearHistory()>Clear History</button></div><div class=clear></div></div></li></ul></div><div id=footer class=footerFooter></div></div></div></aside><script src=/new-docs/js/clipboard.min.js?1706883896 defer></script>
<script src=/new-docs/js/perfect-scrollbar.min.js?1706883896 defer></script>
<script src=/new-docs/js/theme.js?1706883896 defer></script></body></html>