<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.127.0"><meta name=generator content="Relearn 7.3.2"><meta name=description content="Squeezed is a single host memory ballooning daemon. It helps by:
Allowing VM memory to be adjusted dynamically without having to reboot; and Avoiding wasting memory by keeping everything fully utilised, while retaining the ability to take memory back to start new VMs. Squeezed currently includes a simple Ballooning policy which serves as a useful default. The policy is written with respect to an abstract Xen memory model, which is based on a number of assumptions about the environment, for example that most domains have co-operative balloon drivers."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Design :: XAPI Toolstack Developer Documentation"><meta name=twitter:description content="Squeezed is a single host memory ballooning daemon. It helps by:
Allowing VM memory to be adjusted dynamically without having to reboot; and Avoiding wasting memory by keeping everything fully utilised, while retaining the ability to take memory back to start new VMs. Squeezed currently includes a simple Ballooning policy which serves as a useful default. The policy is written with respect to an abstract Xen memory model, which is based on a number of assumptions about the environment, for example that most domains have co-operative balloon drivers."><meta property="og:url" content="https://xapi-project.github.io/new-docs/squeezed/design/index.html"><meta property="og:site_name" content="XAPI Toolstack Developer Documentation"><meta property="og:title" content="Design :: XAPI Toolstack Developer Documentation"><meta property="og:description" content="Squeezed is a single host memory ballooning daemon. It helps by:
Allowing VM memory to be adjusted dynamically without having to reboot; and Avoiding wasting memory by keeping everything fully utilised, while retaining the ability to take memory back to start new VMs. Squeezed currently includes a simple Ballooning policy which serves as a useful default. The policy is written with respect to an abstract Xen memory model, which is based on a number of assumptions about the environment, for example that most domains have co-operative balloon drivers."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="Squeezed"><meta itemprop=name content="Design :: XAPI Toolstack Developer Documentation"><meta itemprop=description content="Squeezed is a single host memory ballooning daemon. It helps by:
Allowing VM memory to be adjusted dynamically without having to reboot; and Avoiding wasting memory by keeping everything fully utilised, while retaining the ability to take memory back to start new VMs. Squeezed currently includes a simple Ballooning policy which serves as a useful default. The policy is written with respect to an abstract Xen memory model, which is based on a number of assumptions about the environment, for example that most domains have co-operative balloon drivers."><meta itemprop=wordCount content="3577"><title>Design :: XAPI Toolstack Developer Documentation</title>
<link href=/new-docs/images/favicon.png?1757579785 rel=icon type=image/png><link href=/new-docs/css/fontawesome-all.min.css?1757579785 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/new-docs/css/fontawesome-all.min.css?1757579785 rel=stylesheet></noscript><link href=/new-docs/css/auto-complete.css?1757579785 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/new-docs/css/auto-complete.css?1757579785 rel=stylesheet></noscript><link href=/new-docs/css/perfect-scrollbar.min.css?1757579785 rel=stylesheet><link href=/new-docs/css/theme.min.css?1757579785 rel=stylesheet><link href=/new-docs/css/format-html.min.css?1757579785 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://xapi-project.github.io/new-docs",window.relearn.min=`.min`,window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.themevariants=["auto","zen-light","zen-dark","red","blue","green","learn","neon","relearn-light","relearn-bright","relearn-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}}))},window.relearn.markVariant=function(){var t=window.localStorage.getItem(window.relearn.absBaseUri+"/variant"),e=document.querySelector("#R-select-variant");e&&(e.value=t)},window.relearn.initVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant(),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link rel=stylesheet href=https://xapi-project.github.io/new-docs/css/misc.css></head><body class="mobile-support html" data-url=/new-docs/squeezed/design/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#two-phase-target-setting>Two phase target setting</a></li><li><a href=#use-of-maxmem>Use of maxmem</a></li></ul><ul><li><a href=#document-history>Document history</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/new-docs/index.html><span itemprop=name>XAPI Toolstack Developer Guide</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/new-docs/squeezed/index.html><span itemprop=name>Squeezed</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Design</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-edit" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=https://github.com/xapi-project/xen-api/edit/master/doc/content/squeezed/design/index.md target=_blank title="Edit (CTRL+ALT+w)"><i class="fa-fw fas fa-pen"></i></a></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/new-docs/squeezed/architecture/index.html title="Squeezed Architecture (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/new-docs/xapi-guard/index.html title="Xapi-guard (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable squeezed" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=design>Design</h1><p>Squeezed is a single host memory ballooning daemon. It helps by:</p><ol><li>Allowing VM memory to be adjusted dynamically without having to reboot;
and</li><li>Avoiding wasting memory by keeping everything fully utilised, while retaining
the ability to take memory back to start new VMs.</li></ol><p>Squeezed currently includes a simple <a href=/new-docs/squeezed/design/index.html#ballooning-policy>Ballooning policy</a>
which serves as a useful default. The policy is written with respect to an
abstract <a href=/new-docs/squeezed/design/index.html#the-memory-model>Xen memory model</a>, which is based on a number of
<a href=/new-docs/squeezed/design/index.html#environmental-assumptions>assumptions about the environment</a>, for example
that most domains have co-operative balloon drivers. In theory the policy could
be replaced later with something more sophisticated (for example see
[xenballoond](<a href=https://github.com/avsm/xen-unstable/blob/master/tools/xenballoon/ rel=external target=_blank>https://github.com/avsm/xen-unstable/blob/master/tools/xenballoon/</a>
xenballoond.README)).</p><p>The <a href=/new-docs/squeezed/design/index.html#toolstack-interface>Toolstack interface</a> is used by Xenopsd to free
memory for starting new VMs. Although the only known client is Xenopsd, the
interface can in theory be used by other clients. Multiple clients can safely
use the interface at the same time.</p><p>The <a href=/new-docs/squeezed/design/index.html#the-structure-of-the-daemon>internal structure</a> consists of a
single-thread event loop. To see how it works end-to-end, consult the
<a href=/new-docs/squeezed/design/index.html#example-operation>example</a>.</p><p>No software is ever perfect; to understand the flaws in Squeezed, please
consult the <a href=/new-docs/squeezed/design/index.html#issues>list of issues</a>.</p><h1 id=environmental-assumptions>Environmental assumptions</h1><ol><li><p>The Squeezed daemon runs within a Xen domain 0 and
communicates to xenstored via a Unix domain socket. Therefore
Squeezed
is granted full access to xenstore, enabling it to modify every
domain’s <code>memory/target</code>.</p></li><li><p>The Squeezed daemon calls <code>setmaxmem</code> in order to cap the amount of memory
a domain can use. This relies on a patch to xen which allows <code>maxmem</code> to
be set lower than <code>totpages</code> See Section <a href=/new-docs/squeezed/design/index.html#use-of-maxmem>maxmem</a> for more
information.</p></li><li><p>The Squeezed daemon
assumes that only domains which write <code>control/feature-balloon</code> into
xenstore can respond to ballooning requests. It will not ask any
other domains to balloon.</p></li><li><p>The Squeezed daemon
assumes that the memory used by a domain is: (i) that listed in
<code>domain_getinfo</code> as <code>totpages</code>; (ii) shadow as given by
<code>shadow_allocation_get</code>; and (iii) a small (few KiB) of
miscellaneous Xen structures
(e.g. for domains, vcpus) which are invisible.</p></li><li><p>The Squeezed daemon
assumes that a domain which is created with a particular
<code>memory/target</code> (and <code>startmem</code>, to within rounding error) will
reach a stable value of <code>totpages</code> before writing
<code>control/feature-balloon</code>. The daemon writes this value to
<code>memory/memory-offset</code> for future reference.</p><ul><li>The Squeezed daemon
does not know or care exactly what causes the difference between
<code>totpages</code> and <code>memory/target</code> and it does <em>not</em>
expect it to remain constant across Xen releases. It
only expects the value to remain constant over the lifetime of a
domain.</li></ul></li><li><p>The Squeezed daemon
assumes that the balloon driver has hit its target when difference
between <code>memory/target</code> and <code>totpages</code> equals the <code>memory-offset</code>
value.</p><ul><li>Corrollary: to make a domain with a responsive balloon driver
currenty using <code>totpages</code> allocate or free
<em>x</em>
it suffices to
set <code>memory/target</code> to
<em>x+<code>totpages</code>-<code>memoryoffset</code></em>
and wait for the
balloon driver to finish. See Section <a href=/new-docs/squeezed/design/index.html#the-memory-model>memory model</a> for more
detail.</li></ul></li><li><p>The Squeezed daemon must
maintain a “slush fund” of memory (currently 9MiB) which it must
prevent any domain from allocating. Since (i) some Xen operations (such
as domain creation) require memory within a physical address range
(e.g. less than 4GiB) and (ii) since Xen preferentially
allocates memory outside these ranges, it follows that by preventing
guests from allocating <em>all</em> host memory (even
transiently) we guarantee that memory from within these special
ranges is always available. Squeezed operates in
<a href=/new-docs/squeezed/design/index.html#two-phase-target-setting>two phases</a>: first causing memory to be freed; and
second causing memory to be allocated.</p></li><li><p>The Squeezed daemon
assumes that it may set <code>memory/target</code> to any value within range:
<code>memory/dynamic-max</code> to <code>memory/dynamic-min</code></p></li><li><p>The Squeezed daemon
assumes that the probability of a domain booting successfully may be
increased by setting <code>memory/target</code> closer to <code>memory/static-max</code>.</p></li><li><p>The Squeezed daemon
assumes that, if a balloon driver has not made any visible progress
after 5 seconds, it is effectively <em>inactive</em>. Active
domains will be expected to pick up the slack.</p></li></ol><h1 id=toolstack-interface>Toolstack interface</h1><p>The toolstack interface introduces the concept of a <em>reservation</em>.
A <em>reservation</em> is: an amount of host free memory tagged
with an associated <em>reservation id</em>. Note this is an
internal Squeezed concept and Xen is
completely unaware of it. When the daemon is moving memory between
domains, it always aims to keep</p><p><img alt="host free memory >= s + sum_i(reservation_i)" class="noborder lazy nolightbox shadow figure-image" loading=lazy src=/new-docs/squeezed/design/hostfreemem.svg style=height:auto;width:auto></p><p>where <em>s</em> is the size of the “slush fund” (currently 9MiB) and
<img alt=reservation_t class="noborder lazy nolightbox shadow figure-image" loading=lazy src=/new-docs/squeezed/design/reservation.svg style=height:auto;width:auto>
is the amount corresponding to the <em>i</em>th
reservation.</p><p>As an aside: Earlier versions of Squeezed always
associated memory with a Xen domain. Unfortunately
this required domains to be created before memory was freed which was
problematic because domain creation requires small amounts of contiguous
frames. Rather than implement some form of memory defragmentation,
Squeezed and Xenopsd were
modified to free memory before creating a domain. This necessitated
making memory <em>reservations</em> first-class stand-alone
entities.</p><p>Once a <em>reservation</em> is made (and the corresponding memory
is freed), it can be <em>transferred</em> to a domain created by a
toolstack. This associates the <em>reservation</em> with that
domain so that, if the domain is destroyed, the
<em>reservation</em> is also freed. Note that Squeezed is careful not
to count both a domain’s <em>reservation</em> and its <code>totpages</code>
during e.g. domain building: instead it considers the domain’s
allocation to be the maximum of <em>reservation</em> and
<code>totpages</code>.</p><p>The size of a <em>reservation</em> may either be specified exactly
by the caller or the caller may provide a memory range. If a range is
provided the daemon will allocate at least as much as the minimum value
provided and as much as possible up to the maximum. By allocating as
much memory as possible to the domain, the probability of a successful
boot is increased.</p><p>Clients of the Squeezed provide a string
name when they log in. All untransferred reservations made by a client
are automatically deleted when a client logs in. This prevents memory
leaks where a client crashes and loses track of its own reservation ids.</p><p>The interface looks like this:</p><pre><code>string session_id login(
  string client_name
)

string reservation_id reserve_memory(
  string client_name,
  int kib
)

int amount, string reservation_id reserve_memory_range(
  string client_name,
  int min,
  int max
)

void delete_reservation(
  string client_name,
  string reservation_id
)

void transfer_reservation_to_domain(
  string client_name,
  string reservation_id,
  int domid
)
</code></pre><p><a href=https://github.com/xapi-project/xenopsd/blob/bf4f8d13ded299b56e55a4b36221ada3dfa0b2b1/xc/xenops_server_xen.ml#L353 rel=external target=_blank>The Xenopsd code</a> in pseudocode works as follows:</p><pre><code> r_id = reserve_memory_range(&quot;xenopsd&quot;, min, max);
 try:
    d = domain_create()
    transfer_reservation_to_domain(&quot;xenopsd&quot;, r_id, d)
 with:
    delete_reservation(&quot;xenopsd&quot;, r_id)
</code></pre><p>The interface is currently implemented using a trivial RPC protocol
over a Unix domain socket in domain 0.</p><h1 id=ballooning-policy>Ballooning policy</h1><p>This section describes the very simple default policy currently
built-into Squeezed.</p><p>Every domain has a pair of values written into xenstore:
<code>memory/dynamic-min</code> and <code>memory/dynamic-max</code> with the following
meanings:</p><ul><li><code>memory/dynamic-min</code> the lowest value that Squeezed is allowed
to set <code>memory/target</code>. The administrator should make this as low as
possible but high enough to ensure that the applications inside the
domain actually work.</li><li><code>memory/dynamic-max</code>
the highest value that Squeezed is allowed
to set <code>memory/target</code>. This can be used to dynamically cap the
amount of memory a domain can use.</li></ul><p>If all balloon drivers are responsive then Squeezed daemon allocates
memory proportionally, so that each domain has the same value of:
<img alt=target-min/(max-min) class="noborder lazy nolightbox shadow figure-image" loading=lazy src=/new-docs/squeezed/design/fraction.svg style=height:auto;width:auto></p><p>So:</p><ul><li><p>if memory is plentiful then all domains will have
<code>memory/target</code>=<code>memory/dynamic-max</code></p></li><li><p>if memory is scarce then all domains will have
<code>memory/target</code>=<code>memory/dynamic-min</code></p></li></ul><p>Note that the values of <code>memory/target</code> suggested by the policy are
ideal values. In many real-life situations (e.g. when a balloon driver
fails to make progress and is declared <em>inactive</em>) the
<code>memory/target</code> values will be different.</p><p>Note that, by default, domain 0 has
<code>memory/dynamic-min</code>=<code>memory/dynamic-max</code>, effectively disabling
ballooning. Clearly a more sophisticated policy would be required here
since ballooning down domain 0 as extra domains are started would be
counterproductive while backends and control interfaces remain in
domain 0.</p><h1 id=the-memory-model>The memory model</h1><p>Squeezed
considers a ballooning-aware domain (i.e. one which has written
the <code>feature-balloon</code> flag into xenstore) to be completely described by
the parameters:</p><ul><li><p><code>dynamic-min</code>: policy value written to <code>memory/dynamic-min</code> in xenstore by a
toolstack (see Section <a href=/new-docs/squeezed/design/index.html#ballooning-policy>Ballooning policy</a>)</p></li><li><p><code>dynamic-max</code>: policy value written to <code>memory/dynamic-max</code> in xenstore by a
toolstack (see Section <a href=/new-docs/squeezed/design/index.html#ballooning-policy>Ballooning policy</a>)</p></li><li><p><code>target</code>: balloon driver target written to <code>memory/target</code> in xenstore by
Squeezed.</p></li><li><p><code>totpages</code>: instantaneous number of pages used by the domain as returned by
the hypercall <code>domain_getinfo</code></p></li><li><p><code>memory-offset</code>: constant difference between <code>target</code> and <code>totpages</code> when the
balloon driver believes no ballooning is necessary: where
<code>memory-offset</code> = <code>totpages</code> - <code>target</code> when the balloon driver believes it
has reached its target.</p></li><li><p><code>maxmem</code>: upper limit on <code>totpages</code>: where <code>totpages</code> &lt;= <code>maxmem</code></p></li></ul><p>For convenience we define a <code>adjusted-target</code> to be the <em>target</em> value necessary
to cause a domain currently using <code>totpages</code> to maintain this value
indefinitely so <code>adjusted-target</code> = <code>totpages</code> - <code>memory-offset</code>.</p><p>The Squeezed
daemon believes that:</p><ul><li><p>a domain should be ballooning iff
<code>adjusted-target</code> &lt;> <code>target</code> (unless it has become <em>inactive</em>)</p></li><li><p>a domain has hit its target iff
<code>adjusted-target</code> = <code>target</code> (to within 1 page);</p></li><li><p>if a domain has
<code>target</code> = <code>x</code> then, when ballooning
is complete, it will have
<code>totpages</code> = <code>memory-offset</code> + <code>x</code>; and therefore</p></li><li><p>to cause a domain to free <code>y</code> it sufficies to set
<code>target</code> := <code>totpages</code> - <code>memory-offset</code> - <code>y</code>.</p></li></ul><p>The Squeezed
daemon considers non-ballooning aware domains (i.e. those which have not
written <code>feature-balloon</code>) to be represented by pairs of:</p><ul><li><p><code>totpages</code>: instantaneous number of pages used by the domain as returned by
<code>domain_getinfo</code></p></li><li><p><code>reservation</code>: memory initially freed for this domain by Squeezed after a
<code>transfer_reservation_to_domid</code> call</p></li></ul><p>Note that non-ballooning aware domains will always have
<code>startmem</code> = <code>target</code>
since the domain will not be
instructed to balloon. Since a domain which is being built will have
0 &lt;= <code>totpages</code> &lt;= <code>reservation</code>, Squeezed computes
<img alt="unused(i)=reservation(i)-totpages" class="noborder lazy nolightbox shadow figure-image" loading=lazy src=/new-docs/squeezed/design/unused.svg style=height:auto;width:auto>
and subtracts this from its model of the host’s free memory, ensuring
that it doesn’t accidentally reallocate this memory for some other
purpose.</p><p>The Squeezed
daemon believes that:</p><ul><li><p>all guest domains start out as non-ballooning aware domains where
<code>target</code>=<code>reservation</code>=<code>startmem</code>$;</p></li><li><p>some guest domains become ballooning-aware during their boot
sequence i.e. when they write <code>feature-balloon</code></p></li></ul><p>The Squeezed
daemon considers a host to be represented by:</p><ul><li><p>ballooning domains: a set of domains which Squeezed will instruct
to balloon;</p></li><li><p>other domains: a set of booting domains and domains which have no
balloon drivers (or whose balloon drivers have failed)</p></li><li><p>a &ldquo;slush fund&rdquo; of low memory required for Xen</p></li><li><p><code>physinfo.free_pages</code> total amount of memory instantanously free
(including both <code>free_pages</code> and <code>scrub_pages</code>)</p></li><li><p>reservations: batches of free memory which are not (yet) associated
with any domain</p></li></ul><p>The Squeezed
daemon considers memory to be unused (i.e. not allocated for any useful
purpose) if it is neither in use by a domain nor reserved.</p><h1 id=the-main-loop>The main loop</h1><p>The main loop is triggered by either:</p><ol><li><p>the arrival of an allocation request on the toolstack interface; or</p></li><li><p>the policy engine – polled every 10s – deciding that a target
<a href=https://github.com/xapi-project/squeezed/blob/7a5601d1543bd27e1e390a0a4f0a50aa531760e6/src/memory_server.ml#L60 rel=external target=_blank>adjustment is needed</a>.</p></li></ol><p>Each iteration of the main loop generates the following actions:</p><ol><li><p>Domains which were active but have failed to make progress towards
their target in 5s are declared <em>inactive</em>. These
domains then have:
<code>maxmem</code> set to the minimum of <code>target</code> and <code>totpages</code>.</p></li><li><p>Domains which were inactive but have started to make progress
towards their target are declared <em>active</em>. These
domains then have: <code>maxmem</code> set to <code>target</code>.</p></li><li><p>Domains which are currently active have new targets computed
according to the policy (see Section <a href=/new-docs/squeezed/design/index.html#ballooning-policy>Ballooning policy</a>). Note that
inactive domains are ignored and not expected to balloon.</p></li></ol><p>Note that domains remain classified as <em>inactive</em> only
during one run of the main loop. Once the loop has terminated all
domains are optimistically assumed to be <em>active</em> again.
Therefore should a domain be classified as <em>inactive</em> once,
it will get many later chances to respond.</p><p>The targets are set in <a href=/new-docs/squeezed/design/index.html#two-phase-target-setting>two phases</a>.
The <a href=/new-docs/squeezed/design/index.html#use-of-maxmem>maxmem</a> is used to prevent domains suddenly allocating
more memory than we want them to.</p><p>The main loop has a notion of a host free memory “target”, similar to
the existing domain memory <code>target</code>. When we are trying to free memory
(e.g. for starting a new VM), the host free memory “target” is
increased. When we are trying to distribute memory among guests
(e.g. after a domain has shutdown and freed lots of memory), the host
free memory “target” is low. Note the host free memory “target” is
always at least several MiB to ensure that some host free memory with
physical address less than 4GiB is free (see <a href=/new-docs/squeezed/design/index.html#two-phase-target-setting>Two phase target setting</a> for
related information).</p><p>The main loop terminates when all <em>active</em> domains have
reached their targets (this could be because all domains responded or
because they all wedged and became inactive); and the policy function
hasn’t suggested any new target changes. There are three possible
results:</p><ol><li><p>Success if the host free memory is near enough its “target”;</p></li><li><p>Failure if the operation is simply impossible within the policy
limits (i.e. <code>dynamic_min</code> values are too high;</p></li><li><p>Failure if the operation failed because one or more domains became
<em>inactive</em> and this prevented us from reaching our host
free memory “target”.</p></li></ol><p>Note that, since only <em>active</em> domains have their targets
set, the system effectively rewards domains which refuse to free memory
(<em>inactive</em>) and punishes those which do free memory
(<em>active</em>). This effect is countered by signalling to the
admin which domains/VMs aren’t responding so they can take corrective
action. To achieve this, the daemon monitors the list of
<em>inactive</em> domains and if a domain is
<em>inactive</em> for more than 20s it writes a flag into xenstore
<code>memory/uncooperative</code>. This key can be monitored and used to generate
an alert, if desired.</p><h2 id=two-phase-target-setting>Two phase target setting</h2><p>The following diagram shows how a system with two domains can evolve if domain
<code>memory/target</code> values are increased for some domains and decreased for
others, at the same time. Each graph shows two domains (domain 1 and
domain 2) and a host. For a domain, the square box shows its
<code>adjusted-totpages</code> and the arrow indicates the direction of the
<code>memory/target</code>. For the host the square box indicates total free
memory. Note the highlighted state where the host’s free memory is
temporarily exhausted</p><p><img alt="Two phase target setting" class="noborder lazy nolightbox shadow figure-image" loading=lazy src=/new-docs/squeezed/design/twophase.svg style=height:auto;width:auto></p><p>In the
initial state (at the top of the diagram), there are two domains, one
which has been requested to use more memory and the other requested to
use less memory. In effect the memory is to be transferred from one
domain to the other. In the final state (at the bottom of the diagram),
both domains have reached their respective targets, the memory has been
transferred and the host free memory is at the same value it was
initially. However the system will not move atomically from the initial
state to the final: there are a number of possible transient in-between
states, two of which have been drawn in the middle of the diagram. In
the left-most transient state the domain which was asked to
<em>free</em> memory has freed all the memory requested: this is
reflected in the large amount of host memory free. In the right-most
transient state the domain which was asked to <em>allocate</em>
memory has allocated all the memory requested: now the host’s free
memory has hit zero.</p><p>If the host’s free memory hits zero then Xen has been forced to
give all memory to guests, including memory less than 4GiB which is critical
for allocating certain structures. Even if we ask a domain to free
memory via the balloon driver there is no guarantee that it will free
the <em>useful</em> memory. This leads to an annoying failure mode
where operations such as creating a domain free due to <code>ENOMEM</code> despite
the fact that there is apparently lots of memory free.</p><p>The solution to this problem is to adopt a two-phase <code>memory/target</code>
setting policy. The Squeezed daemon forces
domains to free memory first before allowing domains to allocate,
in-effect forcing the system to move through the left-most state in the
diagram above.</p><h2 id=use-of-maxmem>Use of maxmem</h2><p>The Xen
domain <code>maxmem</code> value is used to limit memory allocations by the domain.
The rules are:</p><ol><li><p>if the domain has never been run and is paused then
<code>maxmem</code> is set to <code>reservation</code> (reservations were described
in the <a href=/new-docs/squeezed/design/index.html#toolstack-interface>Toolstack interface</a> section above);</p><ul><li><p>these domains are probably still being built and we must let
them allocate their <code>startmem</code></p></li><li><p><strong>FIXME</strong>: this &ldquo;never been run&rdquo; concept pre-dates the
<code>feature-balloon</code> flag: perhaps we should use the
<code>feature-balloon</code> flag instead.</p></li></ul></li><li><p>if the domain is running and the balloon driver is thought to be
working then <code>maxmem</code> is set to <code>target</code>; and</p><ul><li>there may be a delay between lowering a target and the domain
noticing so we prevent the domain from allocating memory when it
should in fact be deallocating.</li></ul></li><li><p>if the domain is running and the balloon driver is thought to be
inactive then
<code>maxmem</code> is set to the minimum of <code>target</code> and <code>actual</code>.</p><ul><li><p>if the domain is using more memory than it should then we allow
it to make progress down towards its target; however</p></li><li><p>if the domain is using less memory than it should then we must
prevent it from suddenly waking up and allocating more since we
have probably just given it to someone else</p></li><li><p><strong>FIXME</strong>: should we reduce the target to leave the domain in a
neutral state instead of asking it to allocate and fail forever?</p></li></ul></li></ol><h1 id=example-operation>Example operation</h1><p>The diagram shows an initial system state comprising 3 domains on a
single host. The state is not ideal; the domains each have the same
policy settings (<code>dynamic-min</code> and <code>dynamic-max</code>) and yet are using
differing values of <code>adjusted-totpages</code>. In addition the host has more
memory free than desired. The second diagram shows the result of
computing ideal target values and the third diagram shows the result
after targets have been set and the balloon drivers have
responded.</p><p><img alt=calculation class="noborder lazy nolightbox shadow figure-image" loading=lazy src=/new-docs/squeezed/design/calculation.svg style=height:auto;width:auto></p><p>The scenario above includes 3 domains (domain 1,
domain 2, domain 3) on a host. Each of the domains has a non-ideal
<code>adjusted-totpages</code> value.</p><p>Recall we also have the policy constraint that:
<code>dynamic-min</code> &lt;= <code>target</code> &lt;= <code>dynamic-max</code>
Hypothetically if we reduce <code>target</code> by
<code>target</code>-<code>dynamic-min</code> (i.e. by setting
<code>target</code> to <code>dynamic-min</code>) then we should reduce
<code>totpages</code> by the same amount, freeing this much memory on the host. In
the upper-most graph in the diagram above, the total amount of memory
which would be freed if we set each of the 3 domain’s
<code>target</code> to <code>dynamic-min</code> is:
<code>d1</code> + <code>d2</code> + <code>d3</code>. In this hypothetical
situation we would now have
<code>x</code> + <code>s</code> + <code>d1</code> + <code>d2</code> + <code>d3</code> free on the host where
<code>s</code> is the host slush fund and <code>x</code> is completely unallocated. Since we
always want to keep the host free memory above <code>s</code>, we are free to
return <code>x</code> + <code>d1</code> + <code>d2</code> + <code>d3</code> to guests. If we
use the default built-in proportional policy then, since all domains
have the same <code>dynamic-min</code> and <code>dynamic-max</code>, each gets the same
fraction of this free memory which we call <code>g</code>:
<img alt="definition of g" class="noborder lazy nolightbox shadow figure-image" loading=lazy src=/new-docs/squeezed/design/g.svg style=height:auto;width:auto>
For each domain, the ideal balloon target is now
<code>target</code> = <code>dynamic-min</code> + <code>g</code>.
Squeezed does not set all the targets at once: this would allow the
allocating domains to race with the deallocating domains, potentially allowing
all low memory to be allocated. Therefore Squeezed sets the
targets in <a href=/new-docs/squeezed/design/index.html#two-phase-target-setting>two phases</a>.</p><h1 id=the-structure-of-the-daemon>The structure of the daemon</h1><p>Squeezed is a single-threaded daemon which is started by an <code>init.d</code>
script. It sits waiting for incoming requests on its toolstack interface
and checks every 10s whether all domain targets are set to the ideal
values
(recall the <a href=/new-docs/squeezed/design/index.html#ballooning-policy>Ballooning policy</a>). If an allocation request
arrives or if the domain targets require adjusting then it calls into
the module
<a href=https://github.com/xapi-project/squeezed/blob/master/src/squeeze_xen.ml rel=external target=_blank>squeeze_xen.ml</a>.</p><p>The module
<a href=https://github.com/xapi-project/squeezed/blob/master/src/squeeze_xen.ml rel=external target=_blank>src/squeeze_xen.ml</a>
contains code which inspects the state of the host (through hypercalls
and reading xenstore) and creates a set of records describing the
current state of the host and all the domains. Note this snapshot of
state is not atomic – it is pieced together from multiple hypercalls and
xenstore reads – we assume that the errors generated are small and we
ignore them. These records are passed into the
<a href=https://github.com/xapi-project/squeezed/blob/master/lib/squeeze.ml rel=external target=_blank>squeeze.ml</a>
module where they
are processed and converted into a list of <em>actions</em> i.e.
(i) updates to <code>memory/target</code> and; (ii) declarations that particular
domains have become <em>inactive</em> or <em>active</em>.
The rationale for separating the Xen interface from the
main ballooning logic was to make testing easier: the module
<a href=https://github.com/xapi-project/squeezed/blob/master/test/squeeze_test.ml rel=external target=_blank>test/squeeze_test.ml</a>
contains a simple simulator which allows various edge-cases to be
checked.</p><h1 id=issues>Issues</h1><ul><li><p>If a linux domU kernel has the netback, blkback or blktap modules
then they away pages via <code>alloc_empty_pages_and_pagevec()</code> during
boot. This interacts with the balloon driver to break the assumption
that, reducing the target by <code>x</code> from a neutral value should free
<code>x</code> amount of memory.</p></li><li><p>Polling the state of the host (particular the xenstore contents) is
a bit inefficient. Perhaps we should move the policy values
<code>dynamic_min</code> and <code>dynamic_max</code> to a separate place in the xenstore
tree and use watches instead.</p></li><li><p>The memory values given to the domain builder are in units of MiB.
We may wish to similarly quantise the <code>target</code> value or check that
the <code>memory-offset</code> calculation still works.</p></li><li><p>The Xen
patch queue reintroduces the lowmem emergency pool. This was an
attempt to prevent guests from allocating lowmem before we switched
to a two-phase target setting procedure. This patch can probably be
removed.</p></li><li><p>It seems unnecessarily evil to modify an <em>inactive</em>
domain’s <code>maxmem</code> leaving <code>maxmem</code> less than <code>target</code>, causing
the guest to attempt allocations forwever. It’s probably neater to
move the <code>target</code> at the same time.</p></li><li><p>Declaring a domain <em>active</em> just because it makes small
amounts of progress shouldn’t be enough. Otherwise a domain could
free 1 byte (or maybe 1 page) every 5s.</p></li><li><p>Likewise, declaring a domain “uncooperative” only if it has been
<em>inactive</em> for 20s means that a domain could alternate
between <em>inactive</em> for 19s and <em>active</em>
for 1s and not be declared “uncooperative”.</p></li></ul><h2 id=document-history>Document history</h2><table><thead><tr><th>Version</th><th>Date</th><th>Change</th></tr></thead><tbody><tr><td>0.2</td><td>10th Nov 2014</td><td>Update to markdown</td></tr><tr><td>0.1</td><td>9th Nov 2009</td><td>Initial version</td></tr></tbody></table><script>for(let e of document.querySelectorAll(".inline-type"))e.innerHTML=renderType(e.innerHTML)</script><footer class=footline></footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><img src=https://xapi-project.github.io/new-docs//images/xapi-project.png></div><script>window.index_js_url="/new-docs/searchindex.en.js?1757579785"</script><search><form action=/new-docs/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search><script>var contentLangs=["en"]</script><script src=/new-docs/js/auto-complete.js?1757579785 defer></script><script src=/new-docs/js/lunr/lunr.min.js?1757579785 defer></script><script src=/new-docs/js/lunr/lunr.stemmer.support.min.js?1757579785 defer></script><script src=/new-docs/js/lunr/lunr.multi.min.js?1757579785 defer></script><script src=/new-docs/js/lunr/lunr.en.min.js?1757579785 defer></script><script src=/new-docs/js/search.js?1757579785 defer></script></div><div id=R-homelinks class="default-animation homelinks"><ul><li><a class=padding href=/new-docs/index.html><i class="fa-fw fas fa-home"></i> Home</a></li></ul><hr class=padding></div><div id=R-content-wrapper class=highlightable><div id=R-shortcutmenu-home class=R-sidebarmenu><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/new-docs/toolstack/index.html><input type=checkbox id=R-section-cdb5571004e49cdb09f50d87f536567a aria-controls=R-subsections-cdb5571004e49cdb09f50d87f536567a><label for=R-section-cdb5571004e49cdb09f50d87f536567a><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu The Toolstack</span></label><a class=padding href=/new-docs/toolstack/index.html>The Toolstack</a><ul id=R-subsections-cdb5571004e49cdb09f50d87f536567a class=collapsible-menu><li data-nav-id=/new-docs/toolstack/responsibilities/index.html><a class=padding href=/new-docs/toolstack/responsibilities/index.html>Responsibilities</a></li><li data-nav-id=/new-docs/toolstack/high-level/index.html><input type=checkbox id=R-section-dde4854617c1f5d00e4646f449a8ec77 aria-controls=R-subsections-dde4854617c1f5d00e4646f449a8ec77><label for=R-section-dde4854617c1f5d00e4646f449a8ec77><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu High-level architecture</span></label><a class=padding href=/new-docs/toolstack/high-level/index.html>High-level architecture</a><ul id=R-subsections-dde4854617c1f5d00e4646f449a8ec77 class=collapsible-menu><li data-nav-id=/new-docs/toolstack/high-level/environment/index.html><a class=padding href=/new-docs/toolstack/high-level/environment/index.html>Environment</a></li><li data-nav-id=/new-docs/toolstack/high-level/daemons/index.html><a class=padding href=/new-docs/toolstack/high-level/daemons/index.html>Daemons</a></li><li data-nav-id=/new-docs/toolstack/high-level/interfaces/index.html><a class=padding href=/new-docs/toolstack/high-level/interfaces/index.html>Interfaces</a></li></ul></li><li data-nav-id=/new-docs/toolstack/features/index.html><input type=checkbox id=R-section-5d4df6b6fbc8d5af47c300ab507cc521 aria-controls=R-subsections-5d4df6b6fbc8d5af47c300ab507cc521><label for=R-section-5d4df6b6fbc8d5af47c300ab507cc521><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Features</span></label><a class=padding href=/new-docs/toolstack/features/index.html>Features</a><ul id=R-subsections-5d4df6b6fbc8d5af47c300ab507cc521 class=collapsible-menu><li data-nav-id=/new-docs/toolstack/features/DR/index.html><a class=padding href=/new-docs/toolstack/features/DR/index.html>Disaster Recovery</a></li><li data-nav-id=/new-docs/toolstack/features/events/index.html><a class=padding href=/new-docs/toolstack/features/events/index.html>Event handling</a></li><li data-nav-id=/new-docs/toolstack/features/HA/index.html><a class=padding href=/new-docs/toolstack/features/HA/index.html>High-Availability</a></li><li data-nav-id=/new-docs/toolstack/features/MVD/index.html><a class=padding href=/new-docs/toolstack/features/MVD/index.html>Multi-version drivers</a></li><li data-nav-id=/new-docs/toolstack/features/NUMA/index.html><a class=padding href=/new-docs/toolstack/features/NUMA/index.html>NUMA</a></li><li data-nav-id=/new-docs/toolstack/features/snapshots/index.html><a class=padding href=/new-docs/toolstack/features/snapshots/index.html>Snapshots</a></li><li data-nav-id=/new-docs/toolstack/features/Tracing/index.html><a class=padding href=/new-docs/toolstack/features/Tracing/index.html>Tracing</a></li><li data-nav-id=/new-docs/toolstack/features/VGPU/index.html><a class=padding href=/new-docs/toolstack/features/VGPU/index.html>vGPU</a></li><li data-nav-id=/new-docs/toolstack/features/XSM/index.html><a class=padding href=/new-docs/toolstack/features/XSM/index.html>Xapi Storage Migration</a></li></ul></li></ul></li><li data-nav-id=/new-docs/xapi/index.html><input type=checkbox id=R-section-67e12bf3d95935fbf56dca0e788c11f2 aria-controls=R-subsections-67e12bf3d95935fbf56dca0e788c11f2><label for=R-section-67e12bf3d95935fbf56dca0e788c11f2><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Xapi</span></label><a class=padding href=/new-docs/xapi/index.html>Xapi</a><ul id=R-subsections-67e12bf3d95935fbf56dca0e788c11f2 class=collapsible-menu><li data-nav-id=/new-docs/xapi/guides/index.html><input type=checkbox id=R-section-cf20b1aa06d1cc447ea310de2b605d51 aria-controls=R-subsections-cf20b1aa06d1cc447ea310de2b605d51><label for=R-section-cf20b1aa06d1cc447ea310de2b605d51><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Guides</span></label><a class=padding href=/new-docs/xapi/guides/index.html>Guides</a><ul id=R-subsections-cf20b1aa06d1cc447ea310de2b605d51 class=collapsible-menu><li data-nav-id=/new-docs/xapi/guides/howtos/index.html><input type=checkbox id=R-section-3ffc2fd44b0a843a38dd54cb698aadf0 aria-controls=R-subsections-3ffc2fd44b0a843a38dd54cb698aadf0><label for=R-section-3ffc2fd44b0a843a38dd54cb698aadf0><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu How to add....</span></label><a class=padding href=/new-docs/xapi/guides/howtos/index.html>How to add....</a><ul id=R-subsections-3ffc2fd44b0a843a38dd54cb698aadf0 class=collapsible-menu><li data-nav-id=/new-docs/xapi/guides/howtos/add-class/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-class/index.html>Adding a Class to the API</a></li><li data-nav-id=/new-docs/xapi/guides/howtos/add-field/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-field/index.html>Adding a field to the API</a></li><li data-nav-id=/new-docs/xapi/guides/howtos/add-function/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-function/index.html>Adding a function to the API</a></li><li data-nav-id=/new-docs/xapi/guides/howtos/add-api-extension/index.html><a class=padding href=/new-docs/xapi/guides/howtos/add-api-extension/index.html>Adding a XenAPI extension</a></li></ul></li></ul></li><li data-nav-id=/new-docs/xapi/cli/index.html><a class=padding href=/new-docs/xapi/cli/index.html>CLI</a></li><li data-nav-id=/new-docs/xapi/database/index.html><input type=checkbox id=R-section-44b9d28660dda49c2b7949290a3e1b89 aria-controls=R-subsections-44b9d28660dda49c2b7949290a3e1b89><label for=R-section-44b9d28660dda49c2b7949290a3e1b89><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Database</span></label><a class=padding href=/new-docs/xapi/database/index.html>Database</a><ul id=R-subsections-44b9d28660dda49c2b7949290a3e1b89 class=collapsible-menu><li data-nav-id=/new-docs/xapi/database/redo-log/index.html><a class=padding href=/new-docs/xapi/database/redo-log/index.html>Metadata-on-LUN</a></li></ul></li><li data-nav-id=/new-docs/xapi/internals/index.html><input type=checkbox id=R-section-e47da3b3a01078022dd7e240a34b6bc4 aria-controls=R-subsections-e47da3b3a01078022dd7e240a34b6bc4><label for=R-section-e47da3b3a01078022dd7e240a34b6bc4><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Internals</span></label><a class=padding href=/new-docs/xapi/internals/index.html>Internals</a><ul id=R-subsections-e47da3b3a01078022dd7e240a34b6bc4 class=collapsible-menu><li data-nav-id=/new-docs/xapi/internals/certificates/index.html><a class=padding href=/new-docs/xapi/internals/certificates/index.html>Certificates and PEM Files</a></li><li data-nav-id=/new-docs/xapi/internals/generated/index.html><a class=padding href=/new-docs/xapi/internals/generated/index.html>Generated Parts of Xapi</a></li></ul></li><li data-nav-id=/new-docs/xapi/memory/index.html><a class=padding href=/new-docs/xapi/memory/index.html>Memory</a></li><li data-nav-id=/new-docs/xapi/storage/index.html><input type=checkbox id=R-section-d5e50434ccd4672b573b8b9cfa1e675a aria-controls=R-subsections-d5e50434ccd4672b573b8b9cfa1e675a><label for=R-section-d5e50434ccd4672b573b8b9cfa1e675a><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Storage</span></label><a class=padding href=/new-docs/xapi/storage/index.html>Storage</a><ul id=R-subsections-d5e50434ccd4672b573b8b9cfa1e675a class=collapsible-menu><li data-nav-id=/new-docs/xapi/storage/sxm/index.html><a class=padding href=/new-docs/xapi/storage/sxm/index.html>Storage migration</a></li></ul></li><li data-nav-id=/new-docs/xapi/walkthroughs/index.html><input type=checkbox id=R-section-ae42e6008c3827e3783a76feed214d3a aria-controls=R-subsections-ae42e6008c3827e3783a76feed214d3a><label for=R-section-ae42e6008c3827e3783a76feed214d3a><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Walk-throughs</span></label><a class=padding href=/new-docs/xapi/walkthroughs/index.html>Walk-throughs</a><ul id=R-subsections-ae42e6008c3827e3783a76feed214d3a class=collapsible-menu><li data-nav-id=/new-docs/xapi/walkthroughs/migration_overview/index.html><a class=padding href=/new-docs/xapi/walkthroughs/migration_overview/index.html>How XAPI handles migration request</a></li></ul></li></ul></li><li data-nav-id=/new-docs/xenopsd/index.html><input type=checkbox id=R-section-eaf872be43aeecdfeb5e6f8d151be1a6 aria-controls=R-subsections-eaf872be43aeecdfeb5e6f8d151be1a6><label for=R-section-eaf872be43aeecdfeb5e6f8d151be1a6><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Xenopsd</span></label><a class=padding href=/new-docs/xenopsd/index.html>Xenopsd</a><ul id=R-subsections-eaf872be43aeecdfeb5e6f8d151be1a6 class=collapsible-menu><li data-nav-id=/new-docs/xenopsd/architecture/index.html><a class=padding href=/new-docs/xenopsd/architecture/index.html>Architecture</a></li><li data-nav-id=/new-docs/xenopsd/design/index.html><input type=checkbox id=R-section-c4ba0778266b15d8b43f3f7369b55454 aria-controls=R-subsections-c4ba0778266b15d8b43f3f7369b55454><label for=R-section-c4ba0778266b15d8b43f3f7369b55454><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Design</span></label><a class=padding href=/new-docs/xenopsd/design/index.html>Design</a><ul id=R-subsections-c4ba0778266b15d8b43f3f7369b55454 class=collapsible-menu><li data-nav-id=/new-docs/xenopsd/design/Events/index.html><a class=padding href=/new-docs/xenopsd/design/Events/index.html>Events</a></li><li data-nav-id=/new-docs/xenopsd/design/hooks/index.html><a class=padding href=/new-docs/xenopsd/design/hooks/index.html>Hooks</a></li><li data-nav-id=/new-docs/xenopsd/design/pvs-proxy-ovs/index.html><a class=padding href=/new-docs/xenopsd/design/pvs-proxy-ovs/index.html>PVS Proxy OVS Rules</a></li><li data-nav-id=/new-docs/xenopsd/design/suspend-image-considerations/index.html><a class=padding href=/new-docs/xenopsd/design/suspend-image-considerations/index.html>Requirements for suspend image framing</a></li><li data-nav-id=/new-docs/xenopsd/design/suspend-image-framing-format/index.html><a class=padding href=/new-docs/xenopsd/design/suspend-image-framing-format/index.html>Suspend image framing format</a></li><li data-nav-id=/new-docs/xenopsd/design/Tasks/index.html><a class=padding href=/new-docs/xenopsd/design/Tasks/index.html>Tasks</a></li></ul></li><li data-nav-id=/new-docs/xenopsd/features/index.html><a class=padding href=/new-docs/xenopsd/features/index.html>Features</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/index.html><input type=checkbox id=R-section-82a272712946f38915b8e2cefa80a829 aria-controls=R-subsections-82a272712946f38915b8e2cefa80a829><label for=R-section-82a272712946f38915b8e2cefa80a829><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Walk-throughs</span></label><a class=padding href=/new-docs/xenopsd/walkthroughs/index.html>Walk-throughs</a><ul id=R-subsections-82a272712946f38915b8e2cefa80a829 class=collapsible-menu><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.start/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.start/index.html>Starting a VM</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.build/index.html><input type=checkbox id=R-section-cb0e73c14bd7f69383fe23bf9475f55d aria-controls=R-subsections-cb0e73c14bd7f69383fe23bf9475f55d><label for=R-section-cb0e73c14bd7f69383fe23bf9475f55d><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Building a VM</span></label><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.build/index.html>Building a VM</a><ul id=R-subsections-cb0e73c14bd7f69383fe23bf9475f55d class=collapsible-menu><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.build/VM_build/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.build/VM_build/index.html>VM_build μ-op</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.build/Domain.build/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.build/Domain.build/index.html>Domain.build</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.build/xenguest/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.build/xenguest/index.html>xenguest</a></li></ul></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/VM.migrate/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/VM.migrate/index.html>Migrating a VM</a></li><li data-nav-id=/new-docs/xenopsd/walkthroughs/live-migration/index.html><a class=padding href=/new-docs/xenopsd/walkthroughs/live-migration/index.html>Live Migration</a></li></ul></li></ul></li><li data-nav-id=/new-docs/xcp-networkd/index.html><a class=padding href=/new-docs/xcp-networkd/index.html>Networkd</a></li><li class=parent data-nav-id=/new-docs/squeezed/index.html><input type=checkbox id=R-section-2b908e757f8297a064be7fe32eedad70 aria-controls=R-subsections-2b908e757f8297a064be7fe32eedad70 checked><label for=R-section-2b908e757f8297a064be7fe32eedad70><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Squeezed</span></label><a class=padding href=/new-docs/squeezed/index.html>Squeezed</a><ul id=R-subsections-2b908e757f8297a064be7fe32eedad70 class=collapsible-menu><li data-nav-id=/new-docs/squeezed/architecture/index.html><a class=padding href=/new-docs/squeezed/architecture/index.html>Architecture</a></li><li class=active data-nav-id=/new-docs/squeezed/design/index.html><a class=padding href=/new-docs/squeezed/design/index.html>Design</a></li></ul></li><li data-nav-id=/new-docs/xapi-guard/index.html><a class=padding href=/new-docs/xapi-guard/index.html>Xapi-guard</a></li><li data-nav-id=/new-docs/design/index.html><input type=checkbox id=R-section-584881683b3574eff66f4a8e3d60d561 aria-controls=R-subsections-584881683b3574eff66f4a8e3d60d561><label for=R-section-584881683b3574eff66f4a8e3d60d561><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Designs</span></label><a class=padding href=/new-docs/design/index.html>Designs</a><ul id=R-subsections-584881683b3574eff66f4a8e3d60d561 class=collapsible-menu><li data-nav-id=/new-docs/design/add-qcow-tool-for-vdi-import-export/index.html><a class=padding href=/new-docs/design/add-qcow-tool-for-vdi-import-export/index.html>Add qcow tool to allow VDI import/export</a></li><li data-nav-id=/new-docs/design/sm-supported-image-formats/index.html><a class=padding href=/new-docs/design/sm-supported-image-formats/index.html>Add supported image formats in sm-list</a></li><li data-nav-id=/new-docs/design/aggr-storage-reboots/index.html><a class=padding href=/new-docs/design/aggr-storage-reboots/index.html>Aggregated Local Storage and Host Reboots</a></li><li data-nav-id=/new-docs/design/backtraces/index.html><a class=padding href=/new-docs/design/backtraces/index.html>Backtrace support</a></li><li data-nav-id=/new-docs/design/bonding-improvements/index.html><a class=padding href=/new-docs/design/bonding-improvements/index.html>Bonding Improvements design</a></li><li data-nav-id=/new-docs/design/coverage/index.html><a class=padding href=/new-docs/design/coverage/index.html>Code Coverage Profiling</a></li><li data-nav-id=/new-docs/design/cpu-levelling-v2/index.html><a class=padding href=/new-docs/design/cpu-levelling-v2/index.html>CPU feature levelling 2.0</a></li><li data-nav-id=/new-docs/design/distributed-database/index.html><a class=padding href=/new-docs/design/distributed-database/index.html>Distributed database</a></li><li data-nav-id=/new-docs/design/emergency-network-reset/index.html><a class=padding href=/new-docs/design/emergency-network-reset/index.html>Emergency Network Reset Design</a></li><li data-nav-id=/new-docs/design/fcoe-nics/index.html><a class=padding href=/new-docs/design/fcoe-nics/index.html>FCoE capable NICs</a></li><li data-nav-id=/new-docs/design/gpu-passthrough/index.html><a class=padding href=/new-docs/design/gpu-passthrough/index.html>GPU pass-through support</a></li><li data-nav-id=/new-docs/design/gpu-support-evolution/index.html><a class=padding href=/new-docs/design/gpu-support-evolution/index.html>GPU support evolution</a></li><li data-nav-id=/new-docs/design/pif-properties/index.html><a class=padding href=/new-docs/design/pif-properties/index.html>GRO and other properties of PIFs</a></li><li data-nav-id=/new-docs/design/heterogeneous-pools/index.html><a class=padding href=/new-docs/design/heterogeneous-pools/index.html>Heterogeneous pools</a></li><li data-nav-id=/new-docs/design/snapshot-revert/index.html><a class=padding href=/new-docs/design/snapshot-revert/index.html>Improving snapshot revert behaviour</a></li><li data-nav-id=/new-docs/design/integrated-gpu-passthrough/index.html><a class=padding href=/new-docs/design/integrated-gpu-passthrough/index.html>Integrated GPU passthrough support</a></li><li data-nav-id=/new-docs/design/local-database/index.html><a class=padding href=/new-docs/design/local-database/index.html>Local database</a></li><li data-nav-id=/new-docs/design/management-interface-on-vlan/index.html><a class=padding href=/new-docs/design/management-interface-on-vlan/index.html>Management Interface on VLAN</a></li><li data-nav-id=/new-docs/design/multiple-cluster-managers/index.html><a class=padding href=/new-docs/design/multiple-cluster-managers/index.html>Multiple Cluster Managers</a></li><li data-nav-id=/new-docs/design/multiple-device-emulators/index.html><a class=padding href=/new-docs/design/multiple-device-emulators/index.html>Multiple device emulators</a></li><li data-nav-id=/new-docs/design/ocfs2/index.html><a class=padding href=/new-docs/design/ocfs2/index.html>OCFS2 storage</a></li><li data-nav-id=/new-docs/design/patches-in-vdis/index.html><a class=padding href=/new-docs/design/patches-in-vdis/index.html>patches in VDIs</a></li><li data-nav-id=/new-docs/design/pci-passthrough/index.html><a class=padding href=/new-docs/design/pci-passthrough/index.html>PCI passthrough support</a></li><li data-nav-id=/new-docs/design/pool-wide-ssh/index.html><a class=padding href=/new-docs/design/pool-wide-ssh/index.html>Pool-wide SSH</a></li><li data-nav-id=/new-docs/design/xenopsd_events/index.html><a class=padding href=/new-docs/design/xenopsd_events/index.html>Process events from xenopsd in a timely manner</a></li><li data-nav-id=/new-docs/design/RDP/index.html><a class=padding href=/new-docs/design/RDP/index.html>RDP control</a></li><li data-nav-id=/new-docs/design/archival-redesign/index.html><a class=padding href=/new-docs/design/archival-redesign/index.html>RRDD archival redesign</a></li><li data-nav-id=/new-docs/design/plugin-protocol-v2/index.html><a class=padding href=/new-docs/design/plugin-protocol-v2/index.html>RRDD plugin protocol v2</a></li><li data-nav-id=/new-docs/design/plugin-protocol-v3/index.html><a class=padding href=/new-docs/design/plugin-protocol-v3/index.html>RRDD plugin protocol v3</a></li><li data-nav-id=/new-docs/design/schedule-snapshot/index.html><a class=padding href=/new-docs/design/schedule-snapshot/index.html>Schedule Snapshot Design</a></li><li data-nav-id=/new-docs/design/smapiv3/index.html><a class=padding href=/new-docs/design/smapiv3/index.html>SMAPIv3</a></li><li data-nav-id=/new-docs/design/emulated-pci-spec/index.html><a class=padding href=/new-docs/design/emulated-pci-spec/index.html>Specifying Emulated PCI Devices</a></li><li data-nav-id=/new-docs/design/sr-level-rrds/index.html><a class=padding href=/new-docs/design/sr-level-rrds/index.html>SR-Level RRDs</a></li><li data-nav-id=/new-docs/design/thin-lvhd/index.html><a class=padding href=/new-docs/design/thin-lvhd/index.html>thin LVHD storage</a></li><li data-nav-id=/new-docs/design/pool-certificates/index.html><a class=padding href=/new-docs/design/pool-certificates/index.html>TLS vertification for intra-pool communications</a></li><li data-nav-id=/new-docs/design/tunnelling/index.html><a class=padding href=/new-docs/design/tunnelling/index.html>Tunnelling API design</a></li><li data-nav-id=/new-docs/design/user-certificates/index.html><a class=padding href=/new-docs/design/user-certificates/index.html>User-installable host certificates</a></li><li data-nav-id=/new-docs/design/vgpu-type-identifiers/index.html><a class=padding href=/new-docs/design/vgpu-type-identifiers/index.html>VGPU type identifiers</a></li><li data-nav-id=/new-docs/design/virt-hw-platform-vn/index.html><a class=padding href=/new-docs/design/virt-hw-platform-vn/index.html>Virtual Hardware Platform Version</a></li><li data-nav-id=/new-docs/design/xenprep/index.html><a class=padding href=/new-docs/design/xenprep/index.html>XenPrep</a></li></ul></li><li data-nav-id=/new-docs/python/index.html><a class=padding href=/new-docs/python/index.html>Python</a></li><li data-nav-id=/new-docs/xcp-rrdd/index.html><input type=checkbox id=R-section-38712d4ba58933e242c69e06308c5176 aria-controls=R-subsections-38712d4ba58933e242c69e06308c5176><label for=R-section-38712d4ba58933e242c69e06308c5176><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu RRDD</span></label><a class=padding href=/new-docs/xcp-rrdd/index.html>RRDD</a><ul id=R-subsections-38712d4ba58933e242c69e06308c5176 class=collapsible-menu><li data-nav-id=/new-docs/xcp-rrdd/futures/archival-redesign/index.html><a class=padding href=/new-docs/xcp-rrdd/futures/archival-redesign/index.html>RRDD archival redesign</a></li><li data-nav-id=/new-docs/xcp-rrdd/design/plugin-protocol-v2/index.html><a class=padding href=/new-docs/xcp-rrdd/design/plugin-protocol-v2/index.html>RRDD plugin protocol v2</a></li><li data-nav-id=/new-docs/xcp-rrdd/futures/sr-level-rrds/index.html><a class=padding href=/new-docs/xcp-rrdd/futures/sr-level-rrds/index.html>SR-Level RRDs</a></li></ul></li><li data-nav-id=/new-docs/xen-api/index.html><input type=checkbox id=R-section-85499c3ba3e3f693ce7955637d671edd aria-controls=R-subsections-85499c3ba3e3f693ce7955637d671edd><label for=R-section-85499c3ba3e3f693ce7955637d671edd><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu XenAPI</span></label><a class=padding href=/new-docs/xen-api/index.html>XenAPI</a><ul id=R-subsections-85499c3ba3e3f693ce7955637d671edd class=collapsible-menu><li data-nav-id=/new-docs/xen-api/basics/index.html><a class=padding href=/new-docs/xen-api/basics/index.html>XenAPI Basics</a></li><li data-nav-id=/new-docs/xen-api/wire-protocol/index.html><a class=padding href=/new-docs/xen-api/wire-protocol/index.html>Wire Protocol</a></li><li data-nav-id=/new-docs/xen-api/overview/index.html><a class=padding href=/new-docs/xen-api/overview/index.html>Overview of the XenAPI</a></li><li data-nav-id=/new-docs/xen-api/evolution/index.html><a class=padding href=/new-docs/xen-api/evolution/index.html>API evolution</a></li><li data-nav-id=/new-docs/xen-api/usage/index.html><a class=padding href=/new-docs/xen-api/usage/index.html>Using the API</a></li><li data-nav-id=/new-docs/xen-api/classes/index.html><input type=checkbox id=R-section-c18ca4c7a790a34a3710541914952da2 aria-controls=R-subsections-c18ca4c7a790a34a3710541914952da2><label for=R-section-c18ca4c7a790a34a3710541914952da2><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu XenAPI Reference</span></label><a class=padding href=/new-docs/xen-api/classes/index.html>XenAPI Reference</a><ul id=R-subsections-c18ca4c7a790a34a3710541914952da2 class=collapsible-menu><li data-nav-id=/new-docs/xen-api/classes/auth/index.html><a class=padding href=/new-docs/xen-api/classes/auth/index.html>auth</a></li><li data-nav-id=/new-docs/xen-api/classes/blob/index.html><a class=padding href=/new-docs/xen-api/classes/blob/index.html>blob</a></li><li data-nav-id=/new-docs/xen-api/classes/bond/index.html><a class=padding href=/new-docs/xen-api/classes/bond/index.html>Bond</a></li><li data-nav-id=/new-docs/xen-api/classes/certificate/index.html><a class=padding href=/new-docs/xen-api/classes/certificate/index.html>Certificate</a></li><li data-nav-id=/new-docs/xen-api/classes/cluster/index.html><a class=padding href=/new-docs/xen-api/classes/cluster/index.html>Cluster</a></li><li data-nav-id=/new-docs/xen-api/classes/cluster_host/index.html><a class=padding href=/new-docs/xen-api/classes/cluster_host/index.html>Cluster_host</a></li><li data-nav-id=/new-docs/xen-api/classes/console/index.html><a class=padding href=/new-docs/xen-api/classes/console/index.html>console</a></li><li data-nav-id=/new-docs/xen-api/classes/crashdump/index.html><a class=padding href=/new-docs/xen-api/classes/crashdump/index.html>crashdump</a></li><li data-nav-id=/new-docs/xen-api/classes/data_source/index.html><a class=padding href=/new-docs/xen-api/classes/data_source/index.html>data_source</a></li><li data-nav-id=/new-docs/xen-api/classes/dr_task/index.html><a class=padding href=/new-docs/xen-api/classes/dr_task/index.html>DR_task</a></li><li data-nav-id=/new-docs/xen-api/classes/event/index.html><a class=padding href=/new-docs/xen-api/classes/event/index.html>event</a></li><li data-nav-id=/new-docs/xen-api/classes/feature/index.html><a class=padding href=/new-docs/xen-api/classes/feature/index.html>Feature</a></li><li data-nav-id=/new-docs/xen-api/classes/gpu_group/index.html><a class=padding href=/new-docs/xen-api/classes/gpu_group/index.html>GPU_group</a></li><li data-nav-id=/new-docs/xen-api/classes/host/index.html><a class=padding href=/new-docs/xen-api/classes/host/index.html>host</a></li><li data-nav-id=/new-docs/xen-api/classes/host_cpu/index.html><a class=padding href=/new-docs/xen-api/classes/host_cpu/index.html>host_cpu</a></li><li data-nav-id=/new-docs/xen-api/classes/host_crashdump/index.html><a class=padding href=/new-docs/xen-api/classes/host_crashdump/index.html>host_crashdump</a></li><li data-nav-id=/new-docs/xen-api/classes/host_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/host_metrics/index.html>host_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/host_patch/index.html><a class=padding href=/new-docs/xen-api/classes/host_patch/index.html>host_patch</a></li><li data-nav-id=/new-docs/xen-api/classes/lvhd/index.html><a class=padding href=/new-docs/xen-api/classes/lvhd/index.html>LVHD</a></li><li data-nav-id=/new-docs/xen-api/classes/message/index.html><a class=padding href=/new-docs/xen-api/classes/message/index.html>message</a></li><li data-nav-id=/new-docs/xen-api/classes/network/index.html><a class=padding href=/new-docs/xen-api/classes/network/index.html>network</a></li><li data-nav-id=/new-docs/xen-api/classes/network_sriov/index.html><a class=padding href=/new-docs/xen-api/classes/network_sriov/index.html>network_sriov</a></li><li data-nav-id=/new-docs/xen-api/classes/observer/index.html><a class=padding href=/new-docs/xen-api/classes/observer/index.html>Observer</a></li><li data-nav-id=/new-docs/xen-api/classes/pbd/index.html><a class=padding href=/new-docs/xen-api/classes/pbd/index.html>PBD</a></li><li data-nav-id=/new-docs/xen-api/classes/pci/index.html><a class=padding href=/new-docs/xen-api/classes/pci/index.html>PCI</a></li><li data-nav-id=/new-docs/xen-api/classes/pgpu/index.html><a class=padding href=/new-docs/xen-api/classes/pgpu/index.html>PGPU</a></li><li data-nav-id=/new-docs/xen-api/classes/pif/index.html><a class=padding href=/new-docs/xen-api/classes/pif/index.html>PIF</a></li><li data-nav-id=/new-docs/xen-api/classes/pif_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/pif_metrics/index.html>PIF_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/pool/index.html><a class=padding href=/new-docs/xen-api/classes/pool/index.html>pool</a></li><li data-nav-id=/new-docs/xen-api/classes/pool_patch/index.html><a class=padding href=/new-docs/xen-api/classes/pool_patch/index.html>pool_patch</a></li><li data-nav-id=/new-docs/xen-api/classes/pool_update/index.html><a class=padding href=/new-docs/xen-api/classes/pool_update/index.html>pool_update</a></li><li data-nav-id=/new-docs/xen-api/classes/probe_result/index.html><a class=padding href=/new-docs/xen-api/classes/probe_result/index.html>probe_result</a></li><li data-nav-id=/new-docs/xen-api/classes/pusb/index.html><a class=padding href=/new-docs/xen-api/classes/pusb/index.html>PUSB</a></li><li data-nav-id=/new-docs/xen-api/classes/pvs_cache_storage/index.html><a class=padding href=/new-docs/xen-api/classes/pvs_cache_storage/index.html>PVS_cache_storage</a></li><li data-nav-id=/new-docs/xen-api/classes/pvs_proxy/index.html><a class=padding href=/new-docs/xen-api/classes/pvs_proxy/index.html>PVS_proxy</a></li><li data-nav-id=/new-docs/xen-api/classes/pvs_server/index.html><a class=padding href=/new-docs/xen-api/classes/pvs_server/index.html>PVS_server</a></li><li data-nav-id=/new-docs/xen-api/classes/pvs_site/index.html><a class=padding href=/new-docs/xen-api/classes/pvs_site/index.html>PVS_site</a></li><li data-nav-id=/new-docs/xen-api/classes/repository/index.html><a class=padding href=/new-docs/xen-api/classes/repository/index.html>Repository</a></li><li data-nav-id=/new-docs/xen-api/classes/role/index.html><a class=padding href=/new-docs/xen-api/classes/role/index.html>role</a></li><li data-nav-id=/new-docs/xen-api/classes/sdn_controller/index.html><a class=padding href=/new-docs/xen-api/classes/sdn_controller/index.html>SDN_controller</a></li><li data-nav-id=/new-docs/xen-api/classes/secret/index.html><a class=padding href=/new-docs/xen-api/classes/secret/index.html>secret</a></li><li data-nav-id=/new-docs/xen-api/classes/session/index.html><a class=padding href=/new-docs/xen-api/classes/session/index.html>session</a></li><li data-nav-id=/new-docs/xen-api/classes/sm/index.html><a class=padding href=/new-docs/xen-api/classes/sm/index.html>SM</a></li><li data-nav-id=/new-docs/xen-api/classes/sr/index.html><a class=padding href=/new-docs/xen-api/classes/sr/index.html>SR</a></li><li data-nav-id=/new-docs/xen-api/classes/sr_stat/index.html><a class=padding href=/new-docs/xen-api/classes/sr_stat/index.html>sr_stat</a></li><li data-nav-id=/new-docs/xen-api/classes/subject/index.html><a class=padding href=/new-docs/xen-api/classes/subject/index.html>subject</a></li><li data-nav-id=/new-docs/xen-api/classes/task/index.html><a class=padding href=/new-docs/xen-api/classes/task/index.html>task</a></li><li data-nav-id=/new-docs/xen-api/classes/tunnel/index.html><a class=padding href=/new-docs/xen-api/classes/tunnel/index.html>tunnel</a></li><li data-nav-id=/new-docs/xen-api/classes/usb_group/index.html><a class=padding href=/new-docs/xen-api/classes/usb_group/index.html>USB_group</a></li><li data-nav-id=/new-docs/xen-api/classes/user/index.html><a class=padding href=/new-docs/xen-api/classes/user/index.html>user</a></li><li data-nav-id=/new-docs/xen-api/classes/vbd/index.html><a class=padding href=/new-docs/xen-api/classes/vbd/index.html>VBD</a></li><li data-nav-id=/new-docs/xen-api/classes/vbd_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/vbd_metrics/index.html>VBD_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/vdi/index.html><a class=padding href=/new-docs/xen-api/classes/vdi/index.html>VDI</a></li><li data-nav-id=/new-docs/xen-api/classes/vdi_nbd_server_info/index.html><a class=padding href=/new-docs/xen-api/classes/vdi_nbd_server_info/index.html>vdi_nbd_server_info</a></li><li data-nav-id=/new-docs/xen-api/classes/vgpu/index.html><a class=padding href=/new-docs/xen-api/classes/vgpu/index.html>VGPU</a></li><li data-nav-id=/new-docs/xen-api/classes/vgpu_type/index.html><a class=padding href=/new-docs/xen-api/classes/vgpu_type/index.html>VGPU_type</a></li><li data-nav-id=/new-docs/xen-api/classes/vif/index.html><a class=padding href=/new-docs/xen-api/classes/vif/index.html>VIF</a></li><li data-nav-id=/new-docs/xen-api/classes/vif_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/vif_metrics/index.html>VIF_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/vlan/index.html><a class=padding href=/new-docs/xen-api/classes/vlan/index.html>VLAN</a></li><li data-nav-id=/new-docs/xen-api/classes/vm/index.html><a class=padding href=/new-docs/xen-api/classes/vm/index.html>VM</a></li><li data-nav-id=/new-docs/xen-api/classes/vm_appliance/index.html><a class=padding href=/new-docs/xen-api/classes/vm_appliance/index.html>VM_appliance</a></li><li data-nav-id=/new-docs/xen-api/classes/vm_guest_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/vm_guest_metrics/index.html>VM_guest_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/vm_metrics/index.html><a class=padding href=/new-docs/xen-api/classes/vm_metrics/index.html>VM_metrics</a></li><li data-nav-id=/new-docs/xen-api/classes/vmpp/index.html><a class=padding href=/new-docs/xen-api/classes/vmpp/index.html>VMPP</a></li><li data-nav-id=/new-docs/xen-api/classes/vmss/index.html><a class=padding href=/new-docs/xen-api/classes/vmss/index.html>VMSS</a></li><li data-nav-id=/new-docs/xen-api/classes/vtpm/index.html><a class=padding href=/new-docs/xen-api/classes/vtpm/index.html>VTPM</a></li><li data-nav-id=/new-docs/xen-api/classes/vusb/index.html><a class=padding href=/new-docs/xen-api/classes/vusb/index.html>VUSB</a></li></ul></li><li data-nav-id=/new-docs/xen-api/releases/index.html><input type=checkbox id=R-section-163f98f7fb9ab44b225cce7a0165c198 aria-controls=R-subsections-163f98f7fb9ab44b225cce7a0165c198><label for=R-section-163f98f7fb9ab44b225cce7a0165c198><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu XenAPI Releases</span></label><a class=padding href=/new-docs/xen-api/releases/index.html>XenAPI Releases</a><ul id=R-subsections-163f98f7fb9ab44b225cce7a0165c198 class=collapsible-menu><li data-nav-id=/new-docs/xen-api/releases/24.16.0/index.html><a class=padding href=/new-docs/xen-api/releases/24.16.0/index.html>XAPI 24.16.0</a></li><li data-nav-id=/new-docs/xen-api/releases/24.14.0/index.html><a class=padding href=/new-docs/xen-api/releases/24.14.0/index.html>XAPI 24.14.0</a></li><li data-nav-id=/new-docs/xen-api/releases/24.10.0/index.html><a class=padding href=/new-docs/xen-api/releases/24.10.0/index.html>XAPI 24.10.0</a></li><li data-nav-id=/new-docs/xen-api/releases/24.3.0/index.html><a class=padding href=/new-docs/xen-api/releases/24.3.0/index.html>XAPI 24.3.0</a></li><li data-nav-id=/new-docs/xen-api/releases/24.0.0/index.html><a class=padding href=/new-docs/xen-api/releases/24.0.0/index.html>XAPI 24.0.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.30.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.30.0/index.html>XAPI 23.30.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.27.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.27.0/index.html>XAPI 23.27.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.25.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.25.0/index.html>XAPI 23.25.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.18.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.18.0/index.html>XAPI 23.18.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.14.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.14.0/index.html>XAPI 23.14.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.9.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.9.0/index.html>XAPI 23.9.0</a></li><li data-nav-id=/new-docs/xen-api/releases/23.1.0/index.html><a class=padding href=/new-docs/xen-api/releases/23.1.0/index.html>XAPI 23.1.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.37.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.37.0/index.html>XAPI 22.37.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.33.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.33.0/index.html>XAPI 22.33.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.27.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.27.0/index.html>XAPI 22.27.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.26.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.26.0/index.html>XAPI 22.26.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.20.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.20.0/index.html>XAPI 22.20.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.19.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.19.0/index.html>XAPI 22.19.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.16.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.16.0/index.html>XAPI 22.16.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.12.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.12.0/index.html>XAPI 22.12.0</a></li><li data-nav-id=/new-docs/xen-api/releases/22.5.0/index.html><a class=padding href=/new-docs/xen-api/releases/22.5.0/index.html>XAPI 22.5.0</a></li><li data-nav-id=/new-docs/xen-api/releases/21.4.0/index.html><a class=padding href=/new-docs/xen-api/releases/21.4.0/index.html>XAPI 21.4.0</a></li><li data-nav-id=/new-docs/xen-api/releases/21.3.0/index.html><a class=padding href=/new-docs/xen-api/releases/21.3.0/index.html>XAPI 21.3.0</a></li><li data-nav-id=/new-docs/xen-api/releases/21.2.0/index.html><a class=padding href=/new-docs/xen-api/releases/21.2.0/index.html>XAPI 21.2.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.329.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.329.0/index.html>XAPI 1.329.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.318.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.318.0/index.html>XAPI 1.318.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.313.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.313.0/index.html>XAPI 1.313.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.307.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.307.0/index.html>XAPI 1.307.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.304.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.304.0/index.html>XAPI 1.304.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.303.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.303.0/index.html>XAPI 1.303.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.301.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.301.0/index.html>XAPI 1.301.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.298.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.298.0/index.html>XAPI 1.298.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.297.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.297.0/index.html>XAPI 1.297.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.294.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.294.0/index.html>XAPI 1.294.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.290.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.290.0/index.html>XAPI 1.290.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.271.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.271.0/index.html>XAPI 1.271.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.257.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.257.0/index.html>XAPI 1.257.0</a></li><li data-nav-id=/new-docs/xen-api/releases/1.250.0/index.html><a class=padding href=/new-docs/xen-api/releases/1.250.0/index.html>XAPI 1.250.0</a></li><li data-nav-id=/new-docs/xen-api/releases/nile-preview/index.html><a class=padding href=/new-docs/xen-api/releases/nile-preview/index.html>XenServer 8 Preview</a></li><li data-nav-id=/new-docs/xen-api/releases/stockholm_psr/index.html><a class=padding href=/new-docs/xen-api/releases/stockholm_psr/index.html>Citrix Hypervisor 8.2 Hotfix 2</a></li><li data-nav-id=/new-docs/xen-api/releases/stockholm/index.html><a class=padding href=/new-docs/xen-api/releases/stockholm/index.html>Citrix Hypervisor 8.2</a></li><li data-nav-id=/new-docs/xen-api/releases/quebec/index.html><a class=padding href=/new-docs/xen-api/releases/quebec/index.html>Citrix Hypervisor 8.1</a></li><li data-nav-id=/new-docs/xen-api/releases/naples/index.html><a class=padding href=/new-docs/xen-api/releases/naples/index.html>Citrix Hypervisor 8.0</a></li><li data-nav-id=/new-docs/xen-api/releases/lima/index.html><a class=padding href=/new-docs/xen-api/releases/lima/index.html>XenServer 7.6</a></li><li data-nav-id=/new-docs/xen-api/releases/kolkata/index.html><a class=padding href=/new-docs/xen-api/releases/kolkata/index.html>XenServer 7.5</a></li><li data-nav-id=/new-docs/xen-api/releases/jura/index.html><a class=padding href=/new-docs/xen-api/releases/jura/index.html>XenServer 7.4</a></li><li data-nav-id=/new-docs/xen-api/releases/inverness/index.html><a class=padding href=/new-docs/xen-api/releases/inverness/index.html>XenServer 7.3</a></li><li data-nav-id=/new-docs/xen-api/releases/falcon/index.html><a class=padding href=/new-docs/xen-api/releases/falcon/index.html>XenServer 7.2</a></li><li data-nav-id=/new-docs/xen-api/releases/ely/index.html><a class=padding href=/new-docs/xen-api/releases/ely/index.html>XenServer 7.1</a></li><li data-nav-id=/new-docs/xen-api/releases/dundee/index.html><a class=padding href=/new-docs/xen-api/releases/dundee/index.html>XenServer 7.0</a></li><li data-nav-id=/new-docs/xen-api/releases/indigo/index.html><a class=padding href=/new-docs/xen-api/releases/indigo/index.html>XenServer 6.5 SP1 Hotfix 31</a></li><li data-nav-id=/new-docs/xen-api/releases/cream/index.html><a class=padding href=/new-docs/xen-api/releases/cream/index.html>XenServer 6.5 SP1</a></li><li data-nav-id=/new-docs/xen-api/releases/creedence/index.html><a class=padding href=/new-docs/xen-api/releases/creedence/index.html>XenServer 6.5</a></li><li data-nav-id=/new-docs/xen-api/releases/clearwater-whetstone/index.html><a class=padding href=/new-docs/xen-api/releases/clearwater-whetstone/index.html>XenServer 6.2 SP1 Hotfix 11</a></li><li data-nav-id=/new-docs/xen-api/releases/clearwater-felton/index.html><a class=padding href=/new-docs/xen-api/releases/clearwater-felton/index.html>XenServer 6.2 SP1 Hotfix 4</a></li><li data-nav-id=/new-docs/xen-api/releases/vgpu-productisation/index.html><a class=padding href=/new-docs/xen-api/releases/vgpu-productisation/index.html>XenServer 6.2 SP1</a></li><li data-nav-id=/new-docs/xen-api/releases/vgpu-tech-preview/index.html><a class=padding href=/new-docs/xen-api/releases/vgpu-tech-preview/index.html>XenServer 6.2 SP1 Tech-Preview</a></li><li data-nav-id=/new-docs/xen-api/releases/clearwater/index.html><a class=padding href=/new-docs/xen-api/releases/clearwater/index.html>XenServer 6.2</a></li><li data-nav-id=/new-docs/xen-api/releases/tampa/index.html><a class=padding href=/new-docs/xen-api/releases/tampa/index.html>XenServer 6.1</a></li><li data-nav-id=/new-docs/xen-api/releases/boston/index.html><a class=padding href=/new-docs/xen-api/releases/boston/index.html>XenServer 6.0</a></li><li data-nav-id=/new-docs/xen-api/releases/cowley/index.html><a class=padding href=/new-docs/xen-api/releases/cowley/index.html>XenServer 5.6 FP1</a></li><li data-nav-id=/new-docs/xen-api/releases/midnight-ride/index.html><a class=padding href=/new-docs/xen-api/releases/midnight-ride/index.html>XenServer 5.6</a></li><li data-nav-id=/new-docs/xen-api/releases/george/index.html><a class=padding href=/new-docs/xen-api/releases/george/index.html>XenServer 5.5</a></li><li data-nav-id=/new-docs/xen-api/releases/orlando-update-1/index.html><a class=padding href=/new-docs/xen-api/releases/orlando-update-1/index.html>XenServer 5.0 Update 1</a></li><li data-nav-id=/new-docs/xen-api/releases/orlando/index.html><a class=padding href=/new-docs/xen-api/releases/orlando/index.html>XenServer 5.0</a></li><li data-nav-id=/new-docs/xen-api/releases/symc/index.html><a class=padding href=/new-docs/xen-api/releases/symc/index.html>XenServer 4.1.1</a></li><li data-nav-id=/new-docs/xen-api/releases/miami/index.html><a class=padding href=/new-docs/xen-api/releases/miami/index.html>XenServer 4.1</a></li><li data-nav-id=/new-docs/xen-api/releases/rio/index.html><a class=padding href=/new-docs/xen-api/releases/rio/index.html>XenServer 4.0</a></li></ul></li><li data-nav-id=/new-docs/xen-api/topics/index.html><input type=checkbox id=R-section-7bfdf54ffdbca634ba4315d64a0b4174 aria-controls=R-subsections-7bfdf54ffdbca634ba4315d64a0b4174><label for=R-section-7bfdf54ffdbca634ba4315d64a0b4174><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Topics</span></label><a class=padding href=/new-docs/xen-api/topics/index.html>Topics</a><ul id=R-subsections-7bfdf54ffdbca634ba4315d64a0b4174 class=collapsible-menu><li data-nav-id=/new-docs/xen-api/topics/udhcp/index.html><a class=padding href=/new-docs/xen-api/topics/udhcp/index.html>API for configuring the udhcp server in Dom0</a></li><li data-nav-id=/new-docs/xen-api/topics/guest-agents/index.html><a class=padding href=/new-docs/xen-api/topics/guest-agents/index.html>Guest agents</a></li><li data-nav-id=/new-docs/xen-api/topics/memory/index.html><a class=padding href=/new-docs/xen-api/topics/memory/index.html>Memory</a></li><li data-nav-id=/new-docs/xen-api/topics/metrics/index.html><a class=padding href=/new-docs/xen-api/topics/metrics/index.html>Metrics</a></li><li data-nav-id=/new-docs/xen-api/topics/snapshots/index.html><a class=padding href=/new-docs/xen-api/topics/snapshots/index.html>Snapshots</a></li><li data-nav-id=/new-docs/xen-api/topics/consoles/index.html><a class=padding href=/new-docs/xen-api/topics/consoles/index.html>VM consoles</a></li><li data-nav-id=/new-docs/xen-api/topics/importexport/index.html><a class=padding href=/new-docs/xen-api/topics/importexport/index.html>VM import/export</a></li><li data-nav-id=/new-docs/xen-api/topics/vm-lifecycle/index.html><a class=padding href=/new-docs/xen-api/topics/vm-lifecycle/index.html>VM Lifecycle</a></li><li data-nav-id=/new-docs/xen-api/topics/xencenter/index.html><a class=padding href=/new-docs/xen-api/topics/xencenter/index.html>XenCenter</a></li></ul></li></ul></li></ul></div><div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"></div><div id=R-menu-footer><hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"><div id=R-prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVariantSwitch"><ul><li id=R-select-language-container class=footerLangSwitch><div class="padding menu-control"><i class="fa-fw fas fa-language"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-language>Language</label>
<select id=R-select-language onchange="location=this.querySelector(this.value).dataset.url"><option id=R-select-language-en value=#R-select-language-en data-url=/new-docs/squeezed/design/index.html lang=en-us selected></option></select></div><div class=clear></div></div></li><li id=R-select-variant-container class="footerVariantSwitch showVariantSwitch"><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Theme</label>
<select id=R-select-variant onchange=window.relearn.changeVariant(this.value)><option id=R-select-variant-auto value=auto selected>Auto</option><option id=R-select-variant-zen-light value=zen-light>Zen Light</option><option id=R-select-variant-zen-dark value=zen-dark>Zen Dark</option><option id=R-select-variant-red value=red>Red</option><option id=R-select-variant-blue value=blue>Blue</option><option id=R-select-variant-green value=green>Green</option><option id=R-select-variant-learn value=learn>Learn</option><option id=R-select-variant-neon value=neon>Neon</option><option id=R-select-variant-relearn-light value=relearn-light>Relearn Light</option><option id=R-select-variant-relearn-bright value=relearn-bright>Relearn Bright</option><option id=R-select-variant-relearn-dark value=relearn-dark>Relearn Dark</option></select></div><div class=clear></div></div><script>window.relearn.markVariant()</script></li><li class=footerVisitedLinks><div class="padding menu-control"><i class="fa-fw fas fa-history"></i>
<span>&nbsp;</span><div class=control-style><button onclick=clearHistory()>Clear History</button></div><div class=clear></div></div></li></ul></div><div id=R-footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></div></aside><script src=/new-docs/js/clipboard.min.js?1757579785 defer></script><script src=/new-docs/js/perfect-scrollbar.min.js?1757579785 defer></script><script src=/new-docs/js/theme.js?1757579785 defer></script><script>function apply_image_invert_filter(e){document.querySelectorAll("img").forEach(function(t){if(t.classList.contains("no-invert"))return;t.style="filter: invert("+e+");"})}function darkThemeUsed(){const t=window.getComputedStyle(document.querySelector("body")),n=t.getPropertyValue("background-color");var e=n.match(/\d+/g).map(function(e){return parseInt(e,10)});return e.length===3&&.2126*e[0]+.7152*e[1]+.0722*e[2]<165}const invertToDarkGray=.85;darkThemeUsed()&&apply_image_invert_filter(invertToDarkGray),document.addEventListener("themeVariantLoaded",function(e){apply_image_invert_filter(e.detail.variant.endsWith("dark")?invertToDarkGray:0)})</script></body></html>